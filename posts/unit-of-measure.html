<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Guilherme Silva Blog - Types for units of measure</title>
        <link rel="stylesheet" href="../css/default.css" />
        <link rel="stylesheet" href="Agda.css" />
    </head>
    <body>
        <header>
            <div class="logo">
                <a href="../">Guilherme Silva</a>
            </div>
            <nav>
                <a href="../">Home</a>
                <a href="../archive.html">Archive</a>
            </nav>
        </header>

        <main role="main">
            <h1>Types for units of measure</h1>
            <article>
    <section class="header">
        Posted on December 18, 2021
        
            by Guilherme
        
    </section>
    <section>
        <h1 id="motivation">Motivation</h1>
<p>My motivation to create types for units of measure is to try to avoid bugs when dealing with dimensional. For example, using these types, it would be impossible to add numbers of different dimensional. Another advantage of using them is that when you deal with multiplication and division, the measure of both values is multiples and divided.</p>
<h1 id="imports">Imports</h1>
<p>Importing libraries of Agda Stdlib:</p>
<pre class="Agda"><a id="489" class="Keyword">open</a> <a id="494" class="Keyword">import</a> <a id="501" href="Level.html" class="Module">Level</a>
<a id="507" class="Keyword">open</a> <a id="512" class="Keyword">import</a> <a id="519" href="Algebra.Core.html" class="Module">Algebra.Core</a>
<a id="532" class="Keyword">open</a> <a id="537" class="Keyword">import</a> <a id="544" href="Data.Nat.html" class="Module">Data.Nat</a> <a id="553" class="Keyword">hiding</a> <a id="560" class="Symbol">(</a><a id="561" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">_+_</a><a id="564" class="Symbol">;</a> <a id="566" href="Agda.Builtin.Nat.html#528" class="Primitive Operator">_*_</a><a id="569" class="Symbol">;</a> <a id="571" href="Data.Nat.Properties.html#2529" class="Function Operator">_≟_</a><a id="574" class="Symbol">)</a>
<a id="576" class="Keyword">open</a> <a id="581" class="Keyword">import</a> <a id="588" href="Data.Bool.html" class="Module">Data.Bool</a> <a id="598" class="Keyword">hiding</a> <a id="605" class="Symbol">(</a><a id="606" href="Data.Bool.Properties.html#1126" class="Function Operator">_≟_</a><a id="609" class="Symbol">)</a>
<a id="611" class="Keyword">open</a> <a id="616" class="Keyword">import</a> <a id="623" href="Data.Vec.html" class="Module">Data.Vec</a>
<a id="632" class="Keyword">open</a> <a id="637" class="Keyword">import</a> <a id="644" href="Data.Product.html" class="Module">Data.Product</a>
<a id="657" class="Keyword">open</a> <a id="662" class="Keyword">import</a> <a id="669" href="Data.Rational.html" class="Module">Data.Rational</a> <a id="683" class="Symbol">as</a> <a id="686" class="Module">ℚ</a>
  <a id="690" class="Keyword">renaming</a> <a id="699" class="Symbol">(</a><a id="700" href="Data.Rational.Base.html#6099" class="Function Operator">_+_</a> <a id="704" class="Symbol">to</a> <a id="707" class="Function Operator">_+q_</a><a id="711" class="Symbol">;</a> <a id="713" href="Data.Rational.Base.html#6190" class="Function Operator">_*_</a> <a id="717" class="Symbol">to</a> <a id="720" class="Function Operator">_*q_</a><a id="724" class="Symbol">;</a> <a id="726" href="Data.Rational.Base.html#4102" class="Function Operator">_/_</a> <a id="730" class="Symbol">to</a> <a id="733" class="Function Operator">_/q_</a><a id="737" class="Symbol">)</a>
  <a id="741" class="Keyword">hiding</a> <a id="748" class="Symbol">(</a><a id="749" href="Data.Rational.Properties.html#3468" class="Function Operator">_≟_</a><a id="752" class="Symbol">;</a> <a id="754" href="Data.Rational.Base.html#6568" class="Function Operator">_÷_</a><a id="757" class="Symbol">;</a> <a id="759" href="Data.Rational.Base.html#6360" class="Function Operator">1/_</a><a id="762" class="Symbol">)</a>
<a id="764" class="Keyword">open</a> <a id="769" class="Keyword">import</a> <a id="776" href="Data.Integer.html" class="Module">Data.Integer</a>
  <a id="791" class="Keyword">renaming</a> <a id="800" class="Symbol">(</a><a id="801" href="Data.Integer.Base.html#4844" class="Function Operator">_+_</a> <a id="805" class="Symbol">to</a> <a id="808" class="Function Operator">_+z_</a><a id="812" class="Symbol">;</a> <a id="814" href="Data.Integer.Base.html#5169" class="Function Operator">_*_</a> <a id="818" class="Symbol">to</a> <a id="821" class="Function Operator">_*z_</a><a id="825" class="Symbol">;</a> <a id="827" href="Data.Integer.Base.html#5023" class="Function Operator">_-_</a> <a id="831" class="Symbol">to</a> <a id="834" class="Function Operator">_-z_</a><a id="838" class="Symbol">)</a>
  <a id="842" class="Keyword">hiding</a> <a id="849" class="Symbol">(</a><a id="850" href="Data.Integer.Properties.html#2102" class="Function Operator">_≟_</a><a id="853" class="Symbol">)</a>
<a id="855" class="Keyword">open</a> <a id="860" class="Keyword">import</a> <a id="867" href="Data.Integer.Instances.html" class="Module">Data.Integer.Instances</a>
<a id="890" class="Keyword">open</a> <a id="895" class="Keyword">import</a> <a id="902" href="Relation.Binary.html" class="Module">Relation.Binary</a>
<a id="918" class="Keyword">open</a> <a id="923" class="Keyword">import</a> <a id="930" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>
<a id="968" class="Keyword">open</a> <a id="973" class="Keyword">import</a> <a id="980" href="Relation.Nullary.html" class="Module">Relation.Nullary</a>
<a id="997" class="Keyword">open</a> <a id="1002" class="Keyword">import</a> <a id="1009" href="Relation.Nullary.Decidable.html" class="Module">Relation.Nullary.Decidable</a>
<a id="1036" class="Keyword">open</a> <a id="1041" class="Keyword">import</a> <a id="1048" href="Function.html" class="Module">Function</a>
<a id="1057" class="Keyword">open</a> <a id="1062" class="Keyword">import</a> <a id="1069" href="internal-library.html" class="Module">internal-library</a>
</pre>
<h1 id="minimalist-case">Minimalist Case</h1>
<p>In the minimalist case, I will only define seconds and meters. In more complex examples, it is possible to define more dimensional.</p>
<pre class="Agda"><a id="1247" class="Keyword">record</a> <a id="Dimensional"></a><a id="1254" href="unit-of-measure.html#1254" class="Record">Dimensional</a> <a id="1266" class="Symbol">:</a> <a id="1268" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1272" class="Keyword">where</a>
  <a id="1280" class="Keyword">constructor</a> <a id="m^_s^_"></a><a id="1292" href="unit-of-measure.html#1292" class="InductiveConstructor Operator">m^_s^_</a>
  <a id="1301" class="Keyword">field</a>
    <a id="Dimensional.meters"></a><a id="1311" href="unit-of-measure.html#1311" class="Field">meters</a>  <a id="1319" class="Symbol">:</a> <a id="1321" href="Agda.Builtin.Int.html#246" class="Datatype">ℤ</a>
    <a id="Dimensional.seconds"></a><a id="1327" href="unit-of-measure.html#1327" class="Field">seconds</a> <a id="1335" class="Symbol">:</a> <a id="1337" href="Agda.Builtin.Int.html#246" class="Datatype">ℤ</a>

<a id="m^_"></a><a id="1340" href="unit-of-measure.html#1340" class="Function Operator">m^_</a> <a id="1344" class="Symbol">:</a> <a id="1346" href="Agda.Builtin.Int.html#246" class="Datatype">ℤ</a> <a id="1348" class="Symbol">→</a> <a id="1350" href="unit-of-measure.html#1254" class="Record">Dimensional</a>
<a id="1362" href="unit-of-measure.html#1340" class="Function Operator">m^</a> <a id="1365" href="unit-of-measure.html#1365" class="Bound">z</a> <a id="1367" class="Symbol">=</a> <a id="1369" href="unit-of-measure.html#1292" class="InductiveConstructor Operator">m^</a> <a id="1372" href="unit-of-measure.html#1365" class="Bound">z</a> <a id="1374" href="unit-of-measure.html#1292" class="InductiveConstructor Operator">s^</a> <a id="1377" class="Symbol">(</a><a id="1378" href="Agda.Builtin.Int.html#264" class="InductiveConstructor Operator">+</a> <a id="1380" class="Number">0</a><a id="1381" class="Symbol">)</a>

<a id="s^_"></a><a id="1384" href="unit-of-measure.html#1384" class="Function Operator">s^_</a> <a id="1388" class="Symbol">:</a> <a id="1390" href="Agda.Builtin.Int.html#246" class="Datatype">ℤ</a> <a id="1392" class="Symbol">→</a> <a id="1394" href="unit-of-measure.html#1254" class="Record">Dimensional</a>
<a id="1406" href="unit-of-measure.html#1384" class="Function Operator">s^</a> <a id="1409" href="unit-of-measure.html#1409" class="Bound">z</a> <a id="1411" class="Symbol">=</a> <a id="1413" href="unit-of-measure.html#1292" class="InductiveConstructor Operator">m^</a> <a id="1416" href="Agda.Builtin.Int.html#264" class="InductiveConstructor Operator">+</a> <a id="1418" class="Number">0</a> <a id="1420" href="unit-of-measure.html#1292" class="InductiveConstructor Operator">s^</a> <a id="1423" href="unit-of-measure.html#1409" class="Bound">z</a>
</pre>
<h2 id="measure-type">Measure Type</h2>
<p>In the measure type, the dimensional is in the type. It will be useful when defining the addition of values with the same dimensional.</p>
<pre class="Agda"><a id="1587" class="Keyword">record</a> <a id="Measure"></a><a id="1594" href="unit-of-measure.html#1594" class="Record">Measure</a> <a id="1602" class="Symbol">(</a><a id="1603" href="unit-of-measure.html#1603" class="Bound">dimensional</a> <a id="1615" class="Symbol">:</a> <a id="1617" href="unit-of-measure.html#1254" class="Record">Dimensional</a><a id="1628" class="Symbol">)</a> <a id="1630" class="Symbol">:</a> <a id="1632" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1636" class="Keyword">where</a>
  <a id="1644" class="Keyword">constructor</a> <a id="⟦_⟧"></a><a id="1656" href="unit-of-measure.html#1656" class="InductiveConstructor Operator">⟦_⟧</a>
  <a id="1662" class="Keyword">field</a>
    <a id="Measure.measure"></a><a id="1672" href="unit-of-measure.html#1672" class="Field">measure</a> <a id="1680" class="Symbol">:</a> <a id="1682" href="Data.Rational.Base.html#1883" class="Record">ℚ</a>
</pre>
<p>These variables will be used later:</p>
<pre class="Agda"><a id="1730" class="Keyword">private</a>
  <a id="1740" class="Keyword">variable</a>
    <a id="1753" href="unit-of-measure.html#1753" class="Generalizable">ℓ</a> <a id="1755" href="unit-of-measure.html#1755" class="Generalizable">ℓ'</a> <a id="1758" class="Symbol">:</a> <a id="1760" href="Agda.Primitive.html#597" class="Postulate">Level</a>
    <a id="1770" href="unit-of-measure.html#1770" class="Generalizable">d</a> <a id="1772" class="Symbol">:</a> <a id="1774" href="unit-of-measure.html#1254" class="Record">Dimensional</a>
</pre>
<h3 id="operations">Operations</h3>
<p>In addition, both have to have the same Dimensional Type.</p>
<pre class="Agda"><a id="_+_"></a><a id="1870" href="unit-of-measure.html#1870" class="Function Operator">_+_</a> <a id="1874" class="Symbol">:</a> <a id="1876" href="Algebra.Core.html#518" class="Function">Op₂</a> <a id="1880" class="Symbol">(</a><a id="1881" href="unit-of-measure.html#1594" class="Record">Measure</a> <a id="1889" href="unit-of-measure.html#1770" class="Generalizable">d</a><a id="1890" class="Symbol">)</a>
<a id="1892" href="unit-of-measure.html#1656" class="InductiveConstructor Operator">⟦</a> <a id="1894" href="unit-of-measure.html#1894" class="Bound">a</a> <a id="1896" href="unit-of-measure.html#1656" class="InductiveConstructor Operator">⟧</a> <a id="1898" href="unit-of-measure.html#1870" class="Function Operator">+</a> <a id="1900" href="unit-of-measure.html#1656" class="InductiveConstructor Operator">⟦</a> <a id="1902" href="unit-of-measure.html#1902" class="Bound">b</a> <a id="1904" href="unit-of-measure.html#1656" class="InductiveConstructor Operator">⟧</a> <a id="1906" class="Symbol">=</a> <a id="1908" href="unit-of-measure.html#1656" class="InductiveConstructor Operator">⟦</a> <a id="1910" href="unit-of-measure.html#1894" class="Bound">a</a> <a id="1912" href="unit-of-measure.html#707" class="Function Operator">+q</a> <a id="1915" href="unit-of-measure.html#1902" class="Bound">b</a>  <a id="1918" href="unit-of-measure.html#1656" class="InductiveConstructor Operator">⟧</a>
</pre>
<p>In multiplication and division of dimensional, both meters and seconds are added and subtracted respectively.</p>
<pre class="Agda"><a id="_*_"></a><a id="2040" href="unit-of-measure.html#2040" class="Function Operator">_*_</a> <a id="2044" class="Symbol">:</a> <a id="2046" href="Algebra.Core.html#518" class="Function">Op₂</a> <a id="2050" href="unit-of-measure.html#1254" class="Record">Dimensional</a>
<a id="2062" class="Symbol">(</a><a id="2063" href="unit-of-measure.html#1292" class="InductiveConstructor Operator">m^</a> <a id="2066" href="unit-of-measure.html#2066" class="Bound">mA</a> <a id="2069" href="unit-of-measure.html#1292" class="InductiveConstructor Operator">s^</a> <a id="2072" href="unit-of-measure.html#2072" class="Bound">sA</a><a id="2074" class="Symbol">)</a> <a id="2076" href="unit-of-measure.html#2040" class="Function Operator">*</a> <a id="2078" class="Symbol">(</a><a id="2079" href="unit-of-measure.html#1292" class="InductiveConstructor Operator">m^</a> <a id="2082" href="unit-of-measure.html#2082" class="Bound">mB</a> <a id="2085" href="unit-of-measure.html#1292" class="InductiveConstructor Operator">s^</a> <a id="2088" href="unit-of-measure.html#2088" class="Bound">sB</a><a id="2090" class="Symbol">)</a> <a id="2092" class="Symbol">=</a> <a id="2094" href="unit-of-measure.html#1292" class="InductiveConstructor Operator">m^</a> <a id="2097" href="unit-of-measure.html#2066" class="Bound">mA</a> <a id="2100" href="unit-of-measure.html#808" class="Function Operator">+z</a> <a id="2103" href="unit-of-measure.html#2082" class="Bound">mB</a> <a id="2106" href="unit-of-measure.html#1292" class="InductiveConstructor Operator">s^</a> <a id="2109" class="Symbol">(</a><a id="2110" href="unit-of-measure.html#2072" class="Bound">sA</a> <a id="2113" href="unit-of-measure.html#808" class="Function Operator">+z</a> <a id="2116" href="unit-of-measure.html#2088" class="Bound">sB</a><a id="2118" class="Symbol">)</a>

<a id="_/_"></a><a id="2121" href="unit-of-measure.html#2121" class="Function Operator">_/_</a> <a id="2125" class="Symbol">:</a> <a id="2127" href="Algebra.Core.html#518" class="Function">Op₂</a> <a id="2131" href="unit-of-measure.html#1254" class="Record">Dimensional</a>
<a id="2143" class="Symbol">(</a><a id="2144" href="unit-of-measure.html#1292" class="InductiveConstructor Operator">m^</a> <a id="2147" href="unit-of-measure.html#2147" class="Bound">mA</a> <a id="2150" href="unit-of-measure.html#1292" class="InductiveConstructor Operator">s^</a> <a id="2153" href="unit-of-measure.html#2153" class="Bound">sA</a><a id="2155" class="Symbol">)</a> <a id="2157" href="unit-of-measure.html#2121" class="Function Operator">/</a> <a id="2159" class="Symbol">(</a><a id="2160" href="unit-of-measure.html#1292" class="InductiveConstructor Operator">m^</a> <a id="2163" href="unit-of-measure.html#2163" class="Bound">mB</a> <a id="2166" href="unit-of-measure.html#1292" class="InductiveConstructor Operator">s^</a> <a id="2169" href="unit-of-measure.html#2169" class="Bound">sB</a><a id="2171" class="Symbol">)</a> <a id="2173" class="Symbol">=</a> <a id="2175" href="unit-of-measure.html#1292" class="InductiveConstructor Operator">m^</a> <a id="2178" class="Symbol">(</a><a id="2179" href="unit-of-measure.html#2147" class="Bound">mA</a> <a id="2182" href="unit-of-measure.html#834" class="Function Operator">-z</a> <a id="2185" href="unit-of-measure.html#2163" class="Bound">mB</a><a id="2187" class="Symbol">)</a> <a id="2189" href="unit-of-measure.html#1292" class="InductiveConstructor Operator">s^</a> <a id="2192" class="Symbol">(</a><a id="2193" href="unit-of-measure.html#2153" class="Bound">sA</a> <a id="2196" href="unit-of-measure.html#834" class="Function Operator">-z</a> <a id="2199" href="unit-of-measure.html#2169" class="Bound">sB</a><a id="2201" class="Symbol">)</a>
</pre>
<h2 id="measure-and-dimensional-types">Measure and Dimensional Types</h2>
<p>In this case, the dimensional is not in the type, but inside the record.</p>
<pre class="Agda"><a id="2320" class="Keyword">record</a> <a id="MeasureDimensional"></a><a id="2327" href="unit-of-measure.html#2327" class="Record">MeasureDimensional</a> <a id="2346" class="Symbol">:</a> <a id="2348" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="2352" class="Keyword">where</a>
  <a id="2360" class="Keyword">constructor</a> <a id="_**_"></a><a id="2372" href="unit-of-measure.html#2372" class="InductiveConstructor Operator">_**_</a>
  <a id="2379" class="Keyword">field</a>
    <a id="MeasureDimensional.measure"></a><a id="2389" href="unit-of-measure.html#2389" class="Field">measure</a>     <a id="2401" class="Symbol">:</a> <a id="2403" href="Data.Rational.Base.html#1883" class="Record">ℚ</a>
    <a id="MeasureDimensional.dimensional"></a><a id="2409" href="unit-of-measure.html#2409" class="Field">dimensional</a> <a id="2421" class="Symbol">:</a> <a id="2423" href="unit-of-measure.html#1254" class="Record">Dimensional</a>

<a id="2436" class="Keyword">open</a> <a id="2441" href="unit-of-measure.html#2327" class="Module">MeasureDimensional</a>
</pre>
<h3 id="operations-1">Operations</h3>
<p>To multiply and divide measure units, both the measure and the dimensional should be multiplied and divided respectively.</p>
<pre class="Agda"><a id="_*m_"></a><a id="2608" href="unit-of-measure.html#2608" class="Function Operator">_*m_</a> <a id="2613" class="Symbol">:</a> <a id="2615" href="Algebra.Core.html#518" class="Function">Op₂</a> <a id="2619" href="unit-of-measure.html#2327" class="Record">MeasureDimensional</a>
<a id="2638" class="Symbol">(</a><a id="2639" href="unit-of-measure.html#2639" class="Bound">mA</a> <a id="2642" href="unit-of-measure.html#2372" class="InductiveConstructor Operator">**</a> <a id="2645" href="unit-of-measure.html#2645" class="Bound">uA</a><a id="2647" class="Symbol">)</a> <a id="2649" href="unit-of-measure.html#2608" class="Function Operator">*m</a> <a id="2652" class="Symbol">(</a><a id="2653" href="unit-of-measure.html#2653" class="Bound">mB</a> <a id="2656" href="unit-of-measure.html#2372" class="InductiveConstructor Operator">**</a> <a id="2659" href="unit-of-measure.html#2659" class="Bound">uB</a><a id="2661" class="Symbol">)</a> <a id="2663" class="Symbol">=</a> <a id="2665" class="Symbol">(</a><a id="2666" href="unit-of-measure.html#2639" class="Bound">mA</a> <a id="2669" href="unit-of-measure.html#720" class="Function Operator">*q</a> <a id="2672" href="unit-of-measure.html#2653" class="Bound">mB</a><a id="2674" class="Symbol">)</a> <a id="2676" href="unit-of-measure.html#2372" class="InductiveConstructor Operator">**</a> <a id="2679" class="Symbol">(</a><a id="2680" href="unit-of-measure.html#2645" class="Bound">uA</a> <a id="2683" href="unit-of-measure.html#2040" class="Function Operator">*</a> <a id="2685" href="unit-of-measure.html#2659" class="Bound">uB</a><a id="2687" class="Symbol">)</a>


<a id="_/m_"></a><a id="2691" href="unit-of-measure.html#2691" class="Function Operator">_/m_</a> <a id="2696" class="Symbol">:</a> <a id="2698" class="Symbol">(</a><a id="2699" href="unit-of-measure.html#2699" class="Bound">a</a> <a id="2701" href="unit-of-measure.html#2701" class="Bound">b</a> <a id="2703" class="Symbol">:</a> <a id="2705" href="unit-of-measure.html#2327" class="Record">MeasureDimensional</a><a id="2723" class="Symbol">)</a> <a id="2725" class="Symbol">⦃</a> <a id="2727" href="unit-of-measure.html#2727" class="Bound">_</a> <a id="2729" class="Symbol">:</a> <a id="2731" href="Data.Rational.Base.html#4738" class="Function">ℚ.NonZero</a> <a id="2741" class="Symbol">(</a><a id="2742" href="unit-of-measure.html#2701" class="Bound">b</a> <a id="2744" class="Symbol">.</a><a id="2745" href="unit-of-measure.html#2389" class="Field">measure</a><a id="2752" class="Symbol">)</a> <a id="2754" class="Symbol">⦄</a> <a id="2756" class="Symbol">→</a> <a id="2758" href="unit-of-measure.html#2327" class="Record">MeasureDimensional</a>
<a id="2777" class="Symbol">(</a><a id="2778" href="unit-of-measure.html#2778" class="Bound">mA</a> <a id="2781" href="unit-of-measure.html#2372" class="InductiveConstructor Operator">**</a> <a id="2784" href="unit-of-measure.html#2784" class="Bound">uA</a><a id="2786" class="Symbol">)</a> <a id="2788" href="unit-of-measure.html#2691" class="Function Operator">/m</a> <a id="2791" class="Symbol">(</a><a id="2792" href="unit-of-measure.html#2792" class="Bound">mB</a> <a id="2795" href="unit-of-measure.html#2372" class="InductiveConstructor Operator">**</a> <a id="2798" href="unit-of-measure.html#2798" class="Bound">uB</a><a id="2800" class="Symbol">)</a> <a id="2802" class="Symbol">=</a> <a id="2804" class="Symbol">(</a><a id="2805" href="unit-of-measure.html#2778" class="Bound">mA</a> <a id="2808" href="internal-library.html#576" class="Function Operator">÷</a> <a id="2810" href="unit-of-measure.html#2792" class="Bound">mB</a><a id="2812" class="Symbol">)</a> <a id="2814" href="unit-of-measure.html#2372" class="InductiveConstructor Operator">**</a> <a id="2817" class="Symbol">(</a><a id="2818" href="unit-of-measure.html#2784" class="Bound">uA</a> <a id="2821" href="unit-of-measure.html#2121" class="Function Operator">/</a> <a id="2823" href="unit-of-measure.html#2798" class="Bound">uB</a><a id="2825" class="Symbol">)</a>
</pre>
<h3 id="equality-of-dimensional.">Equality of Dimensional.</h3>
<p>In the addition of both measures, it is necessary to verify if both values have the same dimension. So, I will define what it means.</p>
<pre class="Agda"><a id="_≡u_"></a><a id="3000" href="unit-of-measure.html#3000" class="Function Operator">_≡u_</a> <a id="3005" class="Symbol">:</a> <a id="3007" href="internal-library.html#311" class="Function">Op2</a> <a id="3011" href="unit-of-measure.html#2327" class="Record">MeasureDimensional</a> <a id="3030" href="Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="3034" href="unit-of-measure.html#3000" class="Function Operator">_≡u_</a> <a id="3039" class="Symbol">=</a> <a id="3041" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">_≡_</a> <a id="3045" href="Function.Base.html#6285" class="Function Operator">on</a> <a id="3048" href="unit-of-measure.html#2409" class="Field">dimensional</a>
</pre>
<p>The equality of two integers is decidable, so I will use it to prove that the equality of two dimensional is decidable too.</p>
<pre class="Agda"><a id="3194" class="Keyword">open</a> <a id="3199" href="Relation.Binary.Structures.html#1824" class="Module">IsDecEquivalence</a> <a id="3216" class="Symbol">⦃</a> <a id="3218" class="Symbol">...</a> <a id="3222" class="Symbol">⦄</a> <a id="3224" class="Keyword">hiding</a> <a id="3231" class="Symbol">(</a><a id="3232" href="Relation.Binary.Structures.html#1568" class="Function">refl</a><a id="3236" class="Symbol">)</a>

<a id="_≟u_"></a><a id="3239" href="unit-of-measure.html#3239" class="Function Operator">_≟u_</a> <a id="3244" class="Symbol">:</a> <a id="3246" href="Relation.Binary.Definitions.html#4575" class="Function">Decidable</a> <a id="3256" class="Symbol">{</a><a id="3257" class="Argument">A</a> <a id="3259" class="Symbol">=</a> <a id="3261" href="unit-of-measure.html#2327" class="Record">MeasureDimensional</a><a id="3279" class="Symbol">}</a> <a id="3281" href="unit-of-measure.html#3000" class="Function Operator">_≡u_</a>
<a id="3286" class="Symbol">(_</a> <a id="3289" href="unit-of-measure.html#2372" class="InductiveConstructor Operator">**</a> <a id="3292" class="Symbol">(</a><a id="3293" href="unit-of-measure.html#1292" class="InductiveConstructor Operator">m^</a> <a id="3296" href="unit-of-measure.html#3296" class="Bound">mA</a> <a id="3299" href="unit-of-measure.html#1292" class="InductiveConstructor Operator">s^</a> <a id="3302" href="unit-of-measure.html#3302" class="Bound">sA</a><a id="3304" class="Symbol">))</a> <a id="3307" href="unit-of-measure.html#3239" class="Function Operator">≟u</a> <a id="3310" class="Symbol">(_</a> <a id="3313" href="unit-of-measure.html#2372" class="InductiveConstructor Operator">**</a> <a id="3316" class="Symbol">(</a><a id="3317" href="unit-of-measure.html#1292" class="InductiveConstructor Operator">m^</a> <a id="3320" href="unit-of-measure.html#3320" class="Bound">mB</a> <a id="3323" href="unit-of-measure.html#1292" class="InductiveConstructor Operator">s^</a> <a id="3326" href="unit-of-measure.html#3326" class="Bound">sB</a><a id="3328" class="Symbol">))</a> <a id="3331" class="Keyword">with</a> <a id="3336" href="unit-of-measure.html#3296" class="Bound">mA</a> <a id="3339" href="Relation.Binary.Structures.html#1921" class="Field Operator">≟</a> <a id="3341" href="unit-of-measure.html#3320" class="Bound">mB</a> <a id="3344" class="Symbol">|</a> <a id="3346" href="unit-of-measure.html#3302" class="Bound">sA</a> <a id="3349" href="Relation.Binary.Structures.html#1921" class="Field Operator">≟</a> <a id="3351" href="unit-of-measure.html#3326" class="Bound">sB</a>
<a id="3354" class="Symbol">...</a> <a id="3358" class="Symbol">|</a> <a id="3360" href="Relation.Nullary.html#1685" class="InductiveConstructor">no</a> <a id="3363" href="unit-of-measure.html#3363" class="Bound">¬p</a>    <a id="3369" class="Symbol">|</a> <a id="3371" class="Symbol">_</a>        <a id="3380" class="Symbol">=</a> <a id="3382" href="Agda.Builtin.Bool.html#182" class="InductiveConstructor">false</a> <a id="3388" href="Relation.Nullary.html#1559" class="InductiveConstructor Operator">because</a> <a id="3396" href="Relation.Nullary.html#939" class="InductiveConstructor">ofⁿ</a> <a id="3400" class="Symbol">(λ{</a><a id="3403" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="3408" class="Symbol">→</a> <a id="3410" href="unit-of-measure.html#3363" class="Bound">¬p</a> <a id="3413" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="3417" class="Symbol">})</a>
<a id="3420" class="CatchallClause Symbol">...</a><a id="3423" class="CatchallClause"> </a><a id="3424" class="CatchallClause Symbol">|</a><a id="3425" class="CatchallClause"> </a><a id="3426" class="CatchallClause Symbol">_</a><a id="3427" class="CatchallClause">        </a><a id="3435" class="CatchallClause Symbol">|</a><a id="3436" class="CatchallClause"> </a><a id="3437" href="Relation.Nullary.html#1685" class="CatchallClause InductiveConstructor">no</a><a id="3439" class="CatchallClause"> </a><a id="3440" href="unit-of-measure.html#3440" class="CatchallClause Bound">¬p</a>    <a id="3446" class="Symbol">=</a> <a id="3448" href="Agda.Builtin.Bool.html#182" class="InductiveConstructor">false</a> <a id="3454" href="Relation.Nullary.html#1559" class="InductiveConstructor Operator">because</a> <a id="3462" href="Relation.Nullary.html#939" class="InductiveConstructor">ofⁿ</a> <a id="3466" class="Symbol">(λ{</a><a id="3469" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="3474" class="Symbol">→</a> <a id="3476" href="unit-of-measure.html#3440" class="Bound">¬p</a> <a id="3479" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="3483" class="Symbol">})</a>
<a id="3486" class="Symbol">...</a> <a id="3490" class="Symbol">|</a> <a id="3492" href="Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="3496" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="3501" class="Symbol">|</a> <a id="3503" href="Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="3507" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="3512" class="Symbol">=</a> <a id="3514" href="Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="3518" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
</pre>
<p>With the decidable property, I can extract easily the Boolean operation and the dimensional type of equality. The dimensional type is interested because it can be inferred easily. After all, there is just one value of the Dimensional type.</p>
<pre class="Agda"><a id="_≡uᵇ_"></a><a id="3773" href="unit-of-measure.html#3773" class="Function Operator">_≡uᵇ_</a> <a id="3779" class="Symbol">:</a> <a id="3781" href="internal-library.html#311" class="Function">Op2</a> <a id="3785" href="unit-of-measure.html#2327" class="Record">MeasureDimensional</a> <a id="3804" href="Agda.Builtin.Bool.html#163" class="Datatype">Bool</a>
<a id="3809" href="unit-of-measure.html#3773" class="Function Operator">_≡uᵇ_</a> <a id="3815" class="Symbol">=</a> <a id="3817" href="Relation.Nullary.Decidable.Core.html#1027" class="Function">isYes</a> <a id="3823" href="Function.Base.html#1219" class="Function Operator">∘₂</a> <a id="3826" href="unit-of-measure.html#3239" class="Function Operator">_≟u_</a>

<a id="_≡uT_"></a><a id="3832" href="unit-of-measure.html#3832" class="Function Operator">_≡uT_</a> <a id="3838" class="Symbol">:</a> <a id="3840" href="internal-library.html#311" class="Function">Op2</a> <a id="3844" href="unit-of-measure.html#2327" class="Record">MeasureDimensional</a> <a id="3863" href="Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="3867" href="unit-of-measure.html#3832" class="Function Operator">_≡uT_</a> <a id="3873" class="Symbol">=</a> <a id="3875" href="Relation.Nullary.Decidable.Core.html#1365" class="Function">True</a> <a id="3880" href="Function.Base.html#1219" class="Function Operator">∘₂</a> <a id="3883" href="unit-of-measure.html#3239" class="Function Operator">_≟u_</a>
</pre>
<h3 id="addition">Addition</h3>
<p>I created first the addition with proof that the returned result has the dimensional of both values.</p>
<pre class="Agda"><a id="_+m'_"></a><a id="4013" href="unit-of-measure.html#4013" class="Function Operator">_+m'_</a> <a id="4019" class="Symbol">:</a> <a id="4021" class="Symbol">(</a><a id="4022" href="unit-of-measure.html#4022" class="Bound">x</a> <a id="4024" href="unit-of-measure.html#4024" class="Bound">y</a> <a id="4026" class="Symbol">:</a> <a id="4028" href="unit-of-measure.html#2327" class="Record">MeasureDimensional</a><a id="4046" class="Symbol">)</a> <a id="4048" class="Symbol">{</a><a id="4049" href="unit-of-measure.html#4049" class="Bound">eq</a> <a id="4052" class="Symbol">:</a> <a id="4054" href="unit-of-measure.html#4022" class="Bound">x</a> <a id="4056" href="unit-of-measure.html#3832" class="Function Operator">≡uT</a> <a id="4060" href="unit-of-measure.html#4024" class="Bound">y</a><a id="4061" class="Symbol">}</a> <a id="4063" class="Symbol">→</a> <a id="4065" href="Data.Product.html#916" class="Function">Σ[</a> <a id="4068" href="unit-of-measure.html#4068" class="Bound">m</a> <a id="4070" href="Data.Product.html#916" class="Function">∈</a> <a id="4072" href="unit-of-measure.html#2327" class="Record">MeasureDimensional</a> <a id="4091" href="Data.Product.html#916" class="Function">]</a> <a id="4093" class="Symbol">(</a><a id="4094" href="unit-of-measure.html#4022" class="Bound">x</a> <a id="4096" href="unit-of-measure.html#3000" class="Function Operator">≡u</a> <a id="4099" href="unit-of-measure.html#4068" class="Bound">m</a> <a id="4101" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="4103" href="unit-of-measure.html#4024" class="Bound">y</a> <a id="4105" href="unit-of-measure.html#3000" class="Function Operator">≡u</a> <a id="4108" href="unit-of-measure.html#4068" class="Bound">m</a><a id="4109" class="Symbol">)</a>
<a id="4111" href="unit-of-measure.html#4111" class="Bound">x</a><a id="4112" class="Symbol">@(</a><a id="4114" href="unit-of-measure.html#4114" class="Bound">mX</a> <a id="4117" href="unit-of-measure.html#2372" class="InductiveConstructor Operator">**</a> <a id="4120" class="Symbol">_)</a> <a id="4123" href="unit-of-measure.html#4013" class="Function Operator">+m'</a> <a id="4127" href="unit-of-measure.html#4127" class="Bound">y</a><a id="4128" class="Symbol">@(</a><a id="4130" href="unit-of-measure.html#4130" class="Bound">mY</a> <a id="4133" href="unit-of-measure.html#2372" class="InductiveConstructor Operator">**</a> <a id="4136" class="Symbol">_)</a> <a id="4139" class="Keyword">with</a> <a id="4144" href="unit-of-measure.html#4111" class="Bound">x</a> <a id="4146" href="unit-of-measure.html#3239" class="Function Operator">≟u</a> <a id="4149" href="unit-of-measure.html#4127" class="Bound">y</a>
<a id="4151" class="Symbol">...</a> <a id="4155" class="Symbol">|</a> <a id="4157" href="Relation.Nullary.html#1648" class="InductiveConstructor">yes</a> <a id="4161" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="4166" class="Symbol">=</a> <a id="4168" class="Symbol">((</a><a id="4170" class="Bound">mX</a> <a id="4173" href="unit-of-measure.html#707" class="Function Operator">+q</a> <a id="4176" class="Bound">mY</a><a id="4178" class="Symbol">)</a> <a id="4180" href="unit-of-measure.html#2372" class="InductiveConstructor Operator">**</a> <a id="4183" class="Symbol">_)</a> <a id="4186" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4188" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="4193" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4195" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
</pre>
<p>It is easy to remove the proof if necessary:</p>
<pre class="Agda"><a id="_+m_"></a><a id="4255" href="unit-of-measure.html#4255" class="Function Operator">_+m_</a> <a id="4260" class="Symbol">:</a> <a id="4262" class="Symbol">(</a><a id="4263" href="unit-of-measure.html#4263" class="Bound">x</a> <a id="4265" href="unit-of-measure.html#4265" class="Bound">y</a> <a id="4267" class="Symbol">:</a> <a id="4269" href="unit-of-measure.html#2327" class="Record">MeasureDimensional</a><a id="4287" class="Symbol">)</a> <a id="4289" class="Symbol">{</a><a id="4290" href="unit-of-measure.html#4290" class="Bound">eq</a> <a id="4293" class="Symbol">:</a> <a id="4295" href="unit-of-measure.html#4263" class="Bound">x</a> <a id="4297" href="unit-of-measure.html#3832" class="Function Operator">≡uT</a> <a id="4301" href="unit-of-measure.html#4265" class="Bound">y</a><a id="4302" class="Symbol">}</a> <a id="4304" class="Symbol">→</a> <a id="4306" href="unit-of-measure.html#2327" class="Record">MeasureDimensional</a>
<a id="4325" class="Symbol">(</a><a id="4326" href="unit-of-measure.html#4326" class="Bound">x</a> <a id="4328" href="unit-of-measure.html#4255" class="Function Operator">+m</a> <a id="4331" href="unit-of-measure.html#4331" class="Bound">y</a><a id="4332" class="Symbol">)</a> <a id="4334" class="Symbol">{</a><a id="4335" href="unit-of-measure.html#4335" class="Bound">eq</a><a id="4337" class="Symbol">}</a> <a id="4339" class="Symbol">=</a> <a id="4341" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="4347" class="Symbol">(</a><a id="4348" href="unit-of-measure.html#4013" class="Function Operator">_+m'_</a> <a id="4354" href="unit-of-measure.html#4326" class="Bound">x</a> <a id="4356" href="unit-of-measure.html#4331" class="Bound">y</a> <a id="4358" class="Symbol">{</a><a id="4359" href="unit-of-measure.html#4335" class="Bound">eq</a><a id="4361" class="Symbol">})</a>
</pre>
<h4 id="simple-examples">Simple examples</h4>
<p>These are simple examples using the addition defined early.</p>
<pre class="Agda"><a id="4456" class="Keyword">private</a>
  <a id="ℕℚ"></a><a id="4466" href="unit-of-measure.html#4466" class="Function">ℕℚ</a> <a id="4469" class="Symbol">=</a> <a id="4471" class="Symbol">λ</a> <a id="4473" href="unit-of-measure.html#4473" class="Bound">n</a> <a id="4475" class="Symbol">→</a> <a id="4477" href="Agda.Builtin.Int.html#264" class="InductiveConstructor Operator">+</a> <a id="4479" href="unit-of-measure.html#4473" class="Bound">n</a> <a id="4481" href="unit-of-measure.html#733" class="Function Operator">/q</a> <a id="4484" class="Number">1</a>

  <a id="_u₂"></a><a id="4489" href="unit-of-measure.html#4489" class="Function Operator">_u₂</a> <a id="4493" class="Symbol">=</a> <a id="4495" href="unit-of-measure.html#2372" class="InductiveConstructor Operator">_**</a> <a id="4499" href="unit-of-measure.html#1292" class="InductiveConstructor Operator">m^</a> <a id="4502" class="Symbol">(</a><a id="4503" href="Agda.Builtin.Int.html#264" class="InductiveConstructor Operator">+</a> <a id="4505" class="Number">1</a><a id="4506" class="Symbol">)</a> <a id="4508" href="unit-of-measure.html#1292" class="InductiveConstructor Operator">s^</a> <a id="4511" class="Symbol">(</a><a id="4512" href="Agda.Builtin.Int.html#264" class="InductiveConstructor Operator">+</a> <a id="4514" class="Number">0</a><a id="4515" class="Symbol">)</a>

  <a id="2ℚ"></a><a id="4520" href="unit-of-measure.html#4520" class="Function">2ℚ</a> <a id="4523" class="Symbol">=</a> <a id="4525" href="unit-of-measure.html#4466" class="Function">ℕℚ</a> <a id="4528" class="Number">2</a>
  <a id="3ℚ"></a><a id="4532" href="unit-of-measure.html#4532" class="Function">3ℚ</a> <a id="4535" class="Symbol">=</a> <a id="4537" href="unit-of-measure.html#4466" class="Function">ℕℚ</a> <a id="4540" class="Number">3</a>

  <a id="x"></a><a id="4545" href="unit-of-measure.html#4545" class="Function">x</a> <a id="4547" class="Symbol">=</a> <a id="4549" href="Data.Rational.Base.html#4586" class="Function">1ℚ</a> <a id="4552" href="unit-of-measure.html#4489" class="Function Operator">u₂</a>
  <a id="y"></a><a id="4557" href="unit-of-measure.html#4557" class="Function">y</a> <a id="4559" class="Symbol">=</a> <a id="4561" href="unit-of-measure.html#4520" class="Function">2ℚ</a> <a id="4564" href="unit-of-measure.html#4489" class="Function Operator">u₂</a>

  <a id="4570" href="unit-of-measure.html#4570" class="Function">_</a> <a id="4572" class="Symbol">:</a> <a id="4574" href="unit-of-measure.html#4545" class="Function">x</a> <a id="4576" href="unit-of-measure.html#4255" class="Function Operator">+m</a> <a id="4579" href="unit-of-measure.html#4557" class="Function">y</a> <a id="4581" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="4583" href="unit-of-measure.html#4532" class="Function">3ℚ</a> <a id="4586" href="unit-of-measure.html#4489" class="Function Operator">u₂</a>
  <a id="4591" class="Symbol">_</a> <a id="4593" class="Symbol">=</a> <a id="4595" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
</pre>
    </section>
</article>

        </main>

        <footer>
            Site proudly generated by
            <a style="color:yellow;" href="http://jaspervdj.be/hakyll">Hakyll</a> with
            <a style="color:yellow;" href="https://github.com/guilhermehas/guilhermehas.github.io">source code</a>
        </footer>
    </body>
</html>
