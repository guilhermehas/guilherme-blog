<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Guilherme Silva Blog - Using small step reduction in addition</title>
        <link rel="stylesheet" href="../css/default.css" />
        <link rel="stylesheet" href="Agda.css" />
    </head>
    <body>
        <header>
            <div class="logo">
                <a href="../">Guilherme Silva</a>
            </div>
            <nav>
                <a href="../">Home</a>
                <a href="../archive.html">Archive</a>
            </nav>
        </header>

        <main role="main">
            <h1>Using small step reduction in addition</h1>
            <article>
    <section class="header">
        Posted on August 28, 2021
        
            by Guilherme
        
    </section>
    <section>
        <h1 id="motivation">Motivation</h1>
<p>The objective of this project is to do a minimalistic example of small step semantics using the concepts of the book <a href="https://plfa.github.io/">Programming Language Foundations in Agda</a>.</p>
<h1 id="imports">Imports</h1>
<p>Importing from <a href="https://github.com/agda/agda-stdlib">Agda standard library</a>.</p>
<pre class="Agda"><a id="385" class="Keyword">open</a> <a id="390" class="Keyword">import</a> <a id="397" href="Data.Nat.html" class="Module">Data.Nat</a> <a id="406" class="Keyword">hiding</a> <a id="413" class="Symbol">(</a><a id="414" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">_+_</a><a id="417" class="Symbol">)</a>
<a id="419" class="Keyword">open</a> <a id="424" class="Keyword">import</a> <a id="431" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>
<a id="469" class="Keyword">open</a> <a id="474" class="Keyword">import</a> <a id="481" href="Data.Product.html" class="Module">Data.Product</a> <a id="494" class="Keyword">renaming</a> <a id="503" class="Symbol">(</a><a id="504" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">_,_</a> <a id="508" class="Symbol">to</a> <a id="511" class="InductiveConstructor Operator">⟨_,_⟩</a><a id="516" class="Symbol">)</a>
</pre>
<h1 id="defining-the-language">Defining the language</h1>
<p>The language is a simple expression that can be a natural number or a sum of two expressions.</p>
<pre class="Agda"><a id="647" class="Keyword">infixr</a> <a id="654" class="Number">6</a> <a id="656" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">_+_</a>
<a id="660" class="Keyword">data</a> <a id="Expr"></a><a id="665" href="add-small-step-reduction.html#665" class="Datatype">Expr</a> <a id="670" class="Symbol">:</a> <a id="672" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="676" class="Keyword">where</a>
  <a id="Expr.nat"></a><a id="684" href="add-small-step-reduction.html#684" class="InductiveConstructor">nat</a> <a id="688" class="Symbol">:</a> <a id="690" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="692" class="Symbol">→</a> <a id="694" href="add-small-step-reduction.html#665" class="Datatype">Expr</a>
  <a id="Expr._+_"></a><a id="701" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">_+_</a> <a id="705" class="Symbol">:</a> <a id="707" href="add-small-step-reduction.html#665" class="Datatype">Expr</a> <a id="712" class="Symbol">→</a> <a id="714" href="add-small-step-reduction.html#665" class="Datatype">Expr</a> <a id="719" class="Symbol">→</a> <a id="721" href="add-small-step-reduction.html#665" class="Datatype">Expr</a>
</pre>
<h1 id="values">Values</h1>
<p>Value represents its normal form. It is the final answer when the expression is fully evaluated.</p>
<pre class="Agda"><a id="843" class="Keyword">data</a> <a id="Value"></a><a id="848" href="add-small-step-reduction.html#848" class="Datatype">Value</a> <a id="854" class="Symbol">:</a> <a id="856" href="add-small-step-reduction.html#665" class="Datatype">Expr</a> <a id="861" class="Symbol">→</a> <a id="863" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="867" class="Keyword">where</a>
  <a id="Value.nat"></a><a id="875" href="add-small-step-reduction.html#875" class="InductiveConstructor">nat</a>  <a id="880" class="Symbol">:</a> <a id="882" class="Symbol">∀</a> <a id="884" href="add-small-step-reduction.html#884" class="Bound">x</a>
      <a id="892" class="Comment">-------------</a>
    <a id="910" class="Symbol">→</a> <a id="912" href="add-small-step-reduction.html#848" class="Datatype">Value</a> <a id="918" class="Symbol">(</a><a id="919" href="add-small-step-reduction.html#684" class="InductiveConstructor">nat</a> <a id="923" href="add-small-step-reduction.html#884" class="Bound">x</a><a id="924" class="Symbol">)</a>
</pre>
<h1 id="small-step">Small Step</h1>
<p>Now, it will be defined the small step semantic of this programming language:</p>
<pre class="Agda"><a id="1028" class="Keyword">infixr</a> <a id="1035" class="Number">2</a> <a id="1037" href="add-small-step-reduction.html#1047" class="Datatype Operator">_—→_</a>
<a id="1042" class="Keyword">data</a> <a id="_—→_"></a><a id="1047" href="add-small-step-reduction.html#1047" class="Datatype Operator">_—→_</a> <a id="1052" class="Symbol">:</a> <a id="1054" href="add-small-step-reduction.html#665" class="Datatype">Expr</a> <a id="1059" class="Symbol">→</a> <a id="1061" href="add-small-step-reduction.html#665" class="Datatype">Expr</a> <a id="1066" class="Symbol">→</a> <a id="1068" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1072" class="Keyword">where</a>
  <a id="_—→_.ξ₁"></a><a id="1080" href="add-small-step-reduction.html#1080" class="InductiveConstructor">ξ₁</a> <a id="1083" class="Symbol">:</a> <a id="1085" class="Symbol">∀</a> <a id="1087" class="Symbol">{</a><a id="1088" href="add-small-step-reduction.html#1088" class="Bound">m</a> <a id="1090" href="add-small-step-reduction.html#1090" class="Bound">m'</a> <a id="1093" href="add-small-step-reduction.html#1093" class="Bound">n</a><a id="1094" class="Symbol">}</a>
    <a id="1100" class="Symbol">→</a> <a id="1102" href="add-small-step-reduction.html#1088" class="Bound">m</a> <a id="1104" href="add-small-step-reduction.html#1047" class="Datatype Operator">—→</a> <a id="1107" href="add-small-step-reduction.html#1090" class="Bound">m'</a>
    <a id="1114" class="Symbol">→</a> <a id="1116" href="add-small-step-reduction.html#1088" class="Bound">m</a> <a id="1118" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="1120" href="add-small-step-reduction.html#1093" class="Bound">n</a> <a id="1122" href="add-small-step-reduction.html#1047" class="Datatype Operator">—→</a> <a id="1125" href="add-small-step-reduction.html#1090" class="Bound">m'</a> <a id="1128" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="1130" href="add-small-step-reduction.html#1093" class="Bound">n</a>
  <a id="_—→_.ξ₂"></a><a id="1134" href="add-small-step-reduction.html#1134" class="InductiveConstructor">ξ₂</a> <a id="1137" class="Symbol">:</a> <a id="1139" class="Symbol">∀</a> <a id="1141" class="Symbol">{</a><a id="1142" href="add-small-step-reduction.html#1142" class="Bound">m</a> <a id="1144" href="add-small-step-reduction.html#1144" class="Bound">n</a> <a id="1146" href="add-small-step-reduction.html#1146" class="Bound">n'</a><a id="1148" class="Symbol">}</a>
    <a id="1154" class="Symbol">→</a> <a id="1156" href="add-small-step-reduction.html#848" class="Datatype">Value</a> <a id="1162" href="add-small-step-reduction.html#1142" class="Bound">m</a>
    <a id="1168" class="Symbol">→</a> <a id="1170" href="add-small-step-reduction.html#1144" class="Bound">n</a> <a id="1172" href="add-small-step-reduction.html#1047" class="Datatype Operator">—→</a> <a id="1175" href="add-small-step-reduction.html#1146" class="Bound">n'</a>
    <a id="1182" class="Symbol">→</a> <a id="1184" href="add-small-step-reduction.html#1142" class="Bound">m</a> <a id="1186" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="1188" href="add-small-step-reduction.html#1144" class="Bound">n</a> <a id="1190" href="add-small-step-reduction.html#1047" class="Datatype Operator">—→</a> <a id="1193" href="add-small-step-reduction.html#1142" class="Bound">m</a> <a id="1195" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="1197" href="add-small-step-reduction.html#1146" class="Bound">n'</a>
  <a id="_—→_.ϕ0"></a><a id="1202" href="add-small-step-reduction.html#1202" class="InductiveConstructor">ϕ0</a> <a id="1205" class="Symbol">:</a> <a id="1207" class="Symbol">∀</a> <a id="1209" class="Symbol">{</a><a id="1210" href="add-small-step-reduction.html#1210" class="Bound">n</a><a id="1211" class="Symbol">}</a> <a id="1213" class="Symbol">→</a> <a id="1215" href="add-small-step-reduction.html#684" class="InductiveConstructor">nat</a> <a id="1219" class="Number">0</a> <a id="1221" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="1223" href="add-small-step-reduction.html#684" class="InductiveConstructor">nat</a> <a id="1227" href="add-small-step-reduction.html#1210" class="Bound">n</a> <a id="1229" href="add-small-step-reduction.html#1047" class="Datatype Operator">—→</a> <a id="1232" href="add-small-step-reduction.html#684" class="InductiveConstructor">nat</a> <a id="1236" href="add-small-step-reduction.html#1210" class="Bound">n</a>
  <a id="_—→_.ϕ+"></a><a id="1240" href="add-small-step-reduction.html#1240" class="InductiveConstructor">ϕ+</a> <a id="1243" class="Symbol">:</a> <a id="1245" class="Symbol">∀</a> <a id="1247" class="Symbol">{</a><a id="1248" href="add-small-step-reduction.html#1248" class="Bound">m</a> <a id="1250" href="add-small-step-reduction.html#1250" class="Bound">n</a><a id="1251" class="Symbol">}</a> <a id="1253" class="Symbol">→</a> <a id="1255" href="add-small-step-reduction.html#684" class="InductiveConstructor">nat</a> <a id="1259" class="Symbol">(</a><a id="1260" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="1264" href="add-small-step-reduction.html#1248" class="Bound">m</a><a id="1265" class="Symbol">)</a> <a id="1267" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="1269" href="add-small-step-reduction.html#684" class="InductiveConstructor">nat</a> <a id="1273" href="add-small-step-reduction.html#1250" class="Bound">n</a> <a id="1275" href="add-small-step-reduction.html#1047" class="Datatype Operator">—→</a> <a id="1278" href="add-small-step-reduction.html#684" class="InductiveConstructor">nat</a> <a id="1282" href="add-small-step-reduction.html#1248" class="Bound">m</a> <a id="1284" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="1286" href="add-small-step-reduction.html#684" class="InductiveConstructor">nat</a> <a id="1290" class="Symbol">(</a><a id="1291" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="1295" href="add-small-step-reduction.html#1250" class="Bound">n</a><a id="1296" class="Symbol">)</a>

<a id="1299" href="add-small-step-reduction.html#1299" class="Function">_</a> <a id="1301" class="Symbol">:</a> <a id="1303" class="InductiveConstructor">nat</a> <a id="1307" class="Number">0</a> <a id="1309" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="1311" class="InductiveConstructor">nat</a> <a id="1315" class="Number">0</a> <a id="1317" href="add-small-step-reduction.html#1047" class="Datatype Operator">—→</a> <a id="1320" class="InductiveConstructor">nat</a> <a id="1324" class="Number">0</a>
<a id="1326" class="Symbol">_</a> <a id="1328" class="Symbol">=</a> <a id="1330" href="add-small-step-reduction.html#1202" class="InductiveConstructor">ϕ0</a>
</pre>
<p>The first two steps are reduction of some part of the addition. <code>ϕ0</code> is related to the reduction when the left part is zero. <code>ϕ+</code> is the reduction when the left part is the successor of a natural number. The definitions of <code>ϕ0</code> and <code>ϕ+</code> look like the induction definition of addition. While <code>ξ₁</code> and <code>ξ₂</code> are extra steps.</p>
<h2 id="deterministic">Deterministic</h2>
<p>With determinism, it is only possible to have one step of reduction. If there are two, both reduce to the same expression.</p>
<pre class="Agda"><a id="deterministic"></a><a id="1809" href="add-small-step-reduction.html#1809" class="Function">deterministic</a> <a id="1823" class="Symbol">:</a> <a id="1825" class="Symbol">∀</a> <a id="1827" class="Symbol">{</a><a id="1828" href="add-small-step-reduction.html#1828" class="Bound">L</a> <a id="1830" href="add-small-step-reduction.html#1830" class="Bound">M</a> <a id="1832" href="add-small-step-reduction.html#1832" class="Bound">N</a><a id="1833" class="Symbol">}</a>
  <a id="1837" class="Symbol">→</a> <a id="1839" href="add-small-step-reduction.html#1828" class="Bound">L</a> <a id="1841" href="add-small-step-reduction.html#1047" class="Datatype Operator">—→</a> <a id="1844" href="add-small-step-reduction.html#1830" class="Bound">M</a>
  <a id="1848" class="Symbol">→</a> <a id="1850" href="add-small-step-reduction.html#1828" class="Bound">L</a> <a id="1852" href="add-small-step-reduction.html#1047" class="Datatype Operator">—→</a> <a id="1855" href="add-small-step-reduction.html#1832" class="Bound">N</a>
      <a id="1863" class="Comment">------</a>
  <a id="1872" class="Symbol">→</a> <a id="1874" href="add-small-step-reduction.html#1830" class="Bound">M</a> <a id="1876" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="1878" href="add-small-step-reduction.html#1832" class="Bound">N</a>
<a id="1880" href="add-small-step-reduction.html#1809" class="Function">deterministic</a> <a id="1894" href="add-small-step-reduction.html#1202" class="InductiveConstructor">ϕ0</a> <a id="1897" href="add-small-step-reduction.html#1202" class="InductiveConstructor">ϕ0</a> <a id="1900" class="Symbol">=</a> <a id="1902" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="1907" href="add-small-step-reduction.html#1809" class="Function">deterministic</a> <a id="1921" href="add-small-step-reduction.html#1240" class="InductiveConstructor">ϕ+</a> <a id="1924" href="add-small-step-reduction.html#1240" class="InductiveConstructor">ϕ+</a> <a id="1927" class="Symbol">=</a> <a id="1929" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="1934" href="add-small-step-reduction.html#1809" class="Function">deterministic</a> <a id="1948" class="Symbol">(</a><a id="1949" href="add-small-step-reduction.html#1080" class="InductiveConstructor">ξ₁</a> <a id="1952" href="add-small-step-reduction.html#1952" class="Bound">LM</a><a id="1954" class="Symbol">)</a> <a id="1956" class="Symbol">(</a><a id="1957" href="add-small-step-reduction.html#1080" class="InductiveConstructor">ξ₁</a> <a id="1960" href="add-small-step-reduction.html#1960" class="Bound">LN</a><a id="1962" class="Symbol">)</a> <a id="1964" class="Keyword">with</a> <a id="1969" href="add-small-step-reduction.html#1809" class="Function">deterministic</a> <a id="1983" href="add-small-step-reduction.html#1952" class="Bound">LM</a> <a id="1986" href="add-small-step-reduction.html#1960" class="Bound">LN</a>
<a id="1989" class="Symbol">...</a> <a id="1993" class="Symbol">|</a> <a id="1995" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="2000" class="Symbol">=</a> <a id="2002" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="2007" href="add-small-step-reduction.html#1809" class="Function">deterministic</a> <a id="2021" class="Symbol">(</a><a id="2022" href="add-small-step-reduction.html#1080" class="InductiveConstructor">ξ₁</a> <a id="2025" class="Symbol">())</a> <a id="2029" class="Symbol">(</a><a id="2030" href="add-small-step-reduction.html#1134" class="InductiveConstructor">ξ₂</a> <a id="2033" class="Symbol">(</a><a id="2034" href="add-small-step-reduction.html#875" class="InductiveConstructor">nat</a> <a id="2038" href="add-small-step-reduction.html#2038" class="Bound">x</a><a id="2039" class="Symbol">)</a> <a id="2041" href="add-small-step-reduction.html#2041" class="Bound">LN</a><a id="2043" class="Symbol">)</a>
<a id="2045" href="add-small-step-reduction.html#1809" class="Function">deterministic</a> <a id="2059" class="Symbol">(</a><a id="2060" href="add-small-step-reduction.html#1134" class="InductiveConstructor">ξ₂</a> <a id="2063" class="Symbol">(</a><a id="2064" href="add-small-step-reduction.html#875" class="InductiveConstructor">nat</a> <a id="2068" href="add-small-step-reduction.html#2068" class="Bound">x</a><a id="2069" class="Symbol">)</a> <a id="2071" href="add-small-step-reduction.html#2071" class="Bound">LM</a><a id="2073" class="Symbol">)</a> <a id="2075" class="Symbol">(</a><a id="2076" href="add-small-step-reduction.html#1080" class="InductiveConstructor">ξ₁</a> <a id="2079" class="Symbol">())</a>
<a id="2083" href="add-small-step-reduction.html#1809" class="CatchallClause Function">deterministic</a><a id="2096" class="CatchallClause"> </a><a id="2097" class="CatchallClause Symbol">(</a><a id="2098" href="add-small-step-reduction.html#1134" class="CatchallClause InductiveConstructor">ξ₂</a><a id="2100" class="CatchallClause"> </a><a id="2101" href="add-small-step-reduction.html#2101" class="CatchallClause Bound">x</a><a id="2102" class="CatchallClause"> </a><a id="2103" href="add-small-step-reduction.html#2103" class="CatchallClause Bound">LM</a><a id="2105" class="CatchallClause Symbol">)</a><a id="2106" class="CatchallClause"> </a><a id="2107" class="CatchallClause Symbol">(</a><a id="2108" href="add-small-step-reduction.html#1134" class="CatchallClause InductiveConstructor">ξ₂</a><a id="2110" class="CatchallClause"> </a><a id="2111" href="add-small-step-reduction.html#2111" class="CatchallClause Bound">x₁</a><a id="2113" class="CatchallClause"> </a><a id="2114" href="add-small-step-reduction.html#2114" class="CatchallClause Bound">LN</a><a id="2116" class="CatchallClause Symbol">)</a> <a id="2118" class="Keyword">with</a> <a id="2123" href="add-small-step-reduction.html#1809" class="Function">deterministic</a> <a id="2137" href="add-small-step-reduction.html#2103" class="Bound">LM</a> <a id="2140" href="add-small-step-reduction.html#2114" class="Bound">LN</a>
<a id="2143" class="Symbol">...</a> <a id="2147" class="Symbol">|</a> <a id="2149" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="2154" class="Symbol">=</a> <a id="2156" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
</pre>
<h2 id="progress">Progress</h2>
<p>Progress means that the expression is a value or there is a next step to reduce.</p>
<pre class="Agda"><a id="2265" class="Keyword">data</a> <a id="Progress"></a><a id="2270" href="add-small-step-reduction.html#2270" class="Datatype">Progress</a> <a id="2279" class="Symbol">(</a><a id="2280" href="add-small-step-reduction.html#2280" class="Bound">M</a> <a id="2282" class="Symbol">:</a> <a id="2284" href="add-small-step-reduction.html#665" class="Datatype">Expr</a><a id="2288" class="Symbol">)</a> <a id="2290" class="Symbol">:</a> <a id="2292" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="2296" class="Keyword">where</a>
  <a id="Progress.step"></a><a id="2304" href="add-small-step-reduction.html#2304" class="InductiveConstructor">step</a> <a id="2309" class="Symbol">:</a> <a id="2311" class="Symbol">∀</a> <a id="2313" class="Symbol">{</a><a id="2314" href="add-small-step-reduction.html#2314" class="Bound">N</a><a id="2315" class="Symbol">}</a>
    <a id="2321" class="Symbol">→</a> <a id="2323" href="add-small-step-reduction.html#2280" class="Bound">M</a> <a id="2325" href="add-small-step-reduction.html#1047" class="Datatype Operator">—→</a> <a id="2328" href="add-small-step-reduction.html#2314" class="Bound">N</a>
      <a id="2336" class="Comment">----------</a>
    <a id="2351" class="Symbol">→</a> <a id="2353" href="add-small-step-reduction.html#2270" class="Datatype">Progress</a> <a id="2362" href="add-small-step-reduction.html#2280" class="Bound">M</a>

  <a id="Progress.done"></a><a id="2367" href="add-small-step-reduction.html#2367" class="InductiveConstructor">done</a> <a id="2372" class="Symbol">:</a>
      <a id="2380" href="add-small-step-reduction.html#848" class="Datatype">Value</a> <a id="2386" href="add-small-step-reduction.html#2280" class="Bound">M</a>
      <a id="2394" class="Comment">----------</a>
    <a id="2409" class="Symbol">→</a> <a id="2411" href="add-small-step-reduction.html#2270" class="Datatype">Progress</a> <a id="2420" href="add-small-step-reduction.html#2280" class="Bound">M</a>
</pre>
<p>I will show that every expression has this property:</p>
<pre class="Agda"><a id="progress"></a><a id="2485" href="add-small-step-reduction.html#2485" class="Function">progress</a> <a id="2494" class="Symbol">:</a> <a id="2496" class="Symbol">∀</a> <a id="2498" href="add-small-step-reduction.html#2498" class="Bound">M</a> <a id="2500" class="Symbol">→</a> <a id="2502" href="add-small-step-reduction.html#2270" class="Datatype">Progress</a> <a id="2511" href="add-small-step-reduction.html#2498" class="Bound">M</a>
<a id="2513" href="add-small-step-reduction.html#2485" class="Function">progress</a> <a id="2522" class="Symbol">(</a><a id="2523" href="add-small-step-reduction.html#684" class="InductiveConstructor">nat</a> <a id="2527" href="add-small-step-reduction.html#2527" class="Bound">x</a><a id="2528" class="Symbol">)</a> <a id="2530" class="Symbol">=</a> <a id="2532" href="add-small-step-reduction.html#2367" class="InductiveConstructor">done</a> <a id="2537" class="Symbol">(</a><a id="2538" href="add-small-step-reduction.html#875" class="InductiveConstructor">nat</a> <a id="2542" href="add-small-step-reduction.html#2527" class="Bound">x</a><a id="2543" class="Symbol">)</a>
<a id="2545" href="add-small-step-reduction.html#2485" class="Function">progress</a> <a id="2554" class="Symbol">(</a><a id="2555" href="add-small-step-reduction.html#2555" class="Bound">M</a> <a id="2557" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="2559" href="add-small-step-reduction.html#2559" class="Bound">N</a><a id="2560" class="Symbol">)</a> <a id="2562" class="Keyword">with</a> <a id="2567" href="add-small-step-reduction.html#511" class="InductiveConstructor Operator">⟨</a> <a id="2569" href="add-small-step-reduction.html#2485" class="Function">progress</a> <a id="2578" href="add-small-step-reduction.html#2555" class="Bound">M</a> <a id="2580" href="add-small-step-reduction.html#511" class="InductiveConstructor Operator">,</a> <a id="2582" href="add-small-step-reduction.html#2485" class="Function">progress</a> <a id="2591" href="add-small-step-reduction.html#2559" class="Bound">N</a> <a id="2593" href="add-small-step-reduction.html#511" class="InductiveConstructor Operator">⟩</a>
<a id="2595" class="Symbol">...</a> <a id="2599" class="Symbol">|</a> <a id="2601" href="add-small-step-reduction.html#511" class="InductiveConstructor Operator">⟨</a> <a id="2603" href="add-small-step-reduction.html#2304" class="InductiveConstructor">step</a> <a id="2608" href="add-small-step-reduction.html#2608" class="Bound">x</a> <a id="2610" href="add-small-step-reduction.html#511" class="InductiveConstructor Operator">,</a> <a id="2612" href="add-small-step-reduction.html#2612" class="Bound">snd</a> <a id="2616" href="add-small-step-reduction.html#511" class="InductiveConstructor Operator">⟩</a> <a id="2618" class="Symbol">=</a> <a id="2620" href="add-small-step-reduction.html#2304" class="InductiveConstructor">step</a> <a id="2625" class="Symbol">(</a><a id="2626" href="add-small-step-reduction.html#1080" class="InductiveConstructor">ξ₁</a> <a id="2629" href="add-small-step-reduction.html#2608" class="Bound">x</a><a id="2630" class="Symbol">)</a>
<a id="2632" class="Symbol">...</a> <a id="2636" class="Symbol">|</a> <a id="2638" href="add-small-step-reduction.html#511" class="InductiveConstructor Operator">⟨</a> <a id="2640" href="add-small-step-reduction.html#2367" class="InductiveConstructor">done</a> <a id="2645" href="add-small-step-reduction.html#2645" class="Bound">x</a> <a id="2647" href="add-small-step-reduction.html#511" class="InductiveConstructor Operator">,</a> <a id="2649" href="add-small-step-reduction.html#2304" class="InductiveConstructor">step</a> <a id="2654" href="add-small-step-reduction.html#2654" class="Bound">x₁</a> <a id="2657" href="add-small-step-reduction.html#511" class="InductiveConstructor Operator">⟩</a> <a id="2659" class="Symbol">=</a> <a id="2661" href="add-small-step-reduction.html#2304" class="InductiveConstructor">step</a> <a id="2666" class="Symbol">(</a><a id="2667" href="add-small-step-reduction.html#1134" class="InductiveConstructor">ξ₂</a> <a id="2670" href="add-small-step-reduction.html#2645" class="Bound">x</a> <a id="2672" href="add-small-step-reduction.html#2654" class="Bound">x₁</a><a id="2674" class="Symbol">)</a>
<a id="2676" class="Symbol">...</a> <a id="2680" class="Symbol">|</a> <a id="2682" href="add-small-step-reduction.html#511" class="InductiveConstructor Operator">⟨</a> <a id="2684" href="add-small-step-reduction.html#2367" class="InductiveConstructor">done</a> <a id="2689" class="Symbol">(</a><a id="2690" href="add-small-step-reduction.html#875" class="InductiveConstructor">nat</a> <a id="2694" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a><a id="2698" class="Symbol">)</a> <a id="2700" href="add-small-step-reduction.html#511" class="InductiveConstructor Operator">,</a> <a id="2702" href="add-small-step-reduction.html#2367" class="InductiveConstructor">done</a> <a id="2707" class="Symbol">(</a><a id="2708" href="add-small-step-reduction.html#875" class="InductiveConstructor">nat</a> <a id="2712" href="add-small-step-reduction.html#2712" class="Bound">y</a><a id="2713" class="Symbol">)</a> <a id="2715" href="add-small-step-reduction.html#511" class="InductiveConstructor Operator">⟩</a> <a id="2717" class="Symbol">=</a> <a id="2719" href="add-small-step-reduction.html#2304" class="InductiveConstructor">step</a> <a id="2724" href="add-small-step-reduction.html#1202" class="InductiveConstructor">ϕ0</a>
<a id="2727" class="Symbol">...</a> <a id="2731" class="Symbol">|</a> <a id="2733" href="add-small-step-reduction.html#511" class="InductiveConstructor Operator">⟨</a> <a id="2735" href="add-small-step-reduction.html#2367" class="InductiveConstructor">done</a> <a id="2740" class="Symbol">(</a><a id="2741" href="add-small-step-reduction.html#875" class="InductiveConstructor">nat</a> <a id="2745" class="Symbol">(</a><a id="2746" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="2750" href="add-small-step-reduction.html#2750" class="Bound">x</a><a id="2751" class="Symbol">))</a> <a id="2754" href="add-small-step-reduction.html#511" class="InductiveConstructor Operator">,</a> <a id="2756" href="add-small-step-reduction.html#2367" class="InductiveConstructor">done</a> <a id="2761" class="Symbol">(</a><a id="2762" href="add-small-step-reduction.html#875" class="InductiveConstructor">nat</a> <a id="2766" href="add-small-step-reduction.html#2766" class="Bound">y</a><a id="2767" class="Symbol">)</a> <a id="2769" href="add-small-step-reduction.html#511" class="InductiveConstructor Operator">⟩</a> <a id="2771" class="Symbol">=</a> <a id="2773" href="add-small-step-reduction.html#2304" class="InductiveConstructor">step</a> <a id="2778" href="add-small-step-reduction.html#1240" class="InductiveConstructor">ϕ+</a>
</pre>
<h1 id="multi-step">Multi step</h1>
<p>Now, it will be defined the multi step of the language. It can be a zero step, so an expression <code>M</code> can go to <code>M</code> (<code>M —↠ M</code>) or a multiple step (that can be one, two or any natural number).</p>
<pre class="Agda"><a id="2995" class="Keyword">infix</a>  <a id="3002" class="Number">2</a> <a id="3004" href="add-small-step-reduction.html#3060" class="Datatype Operator">_—↠_</a>
<a id="3009" class="Keyword">infix</a>  <a id="3016" class="Number">1</a> <a id="3018" href="add-small-step-reduction.html#3210" class="Function Operator">begin_</a>
<a id="3025" class="Keyword">infixr</a> <a id="3032" class="Number">2</a> <a id="3034" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">_—→⟨_⟩_</a>
<a id="3042" class="Keyword">infix</a>  <a id="3049" class="Number">3</a> <a id="3051" href="add-small-step-reduction.html#3094" class="InductiveConstructor Operator">_∎</a>

<a id="3055" class="Keyword">data</a> <a id="_—↠_"></a><a id="3060" href="add-small-step-reduction.html#3060" class="Datatype Operator">_—↠_</a> <a id="3065" class="Symbol">:</a> <a id="3067" href="add-small-step-reduction.html#665" class="Datatype">Expr</a> <a id="3072" class="Symbol">→</a> <a id="3074" href="add-small-step-reduction.html#665" class="Datatype">Expr</a> <a id="3079" class="Symbol">→</a> <a id="3081" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="3085" class="Keyword">where</a>

  <a id="_—↠_._∎"></a><a id="3094" href="add-small-step-reduction.html#3094" class="InductiveConstructor Operator">_∎</a> <a id="3097" class="Symbol">:</a> <a id="3099" class="Symbol">∀</a> <a id="3101" href="add-small-step-reduction.html#3101" class="Bound">M</a>
      <a id="3109" class="Comment">--------</a>
    <a id="3122" class="Symbol">→</a> <a id="3124" href="add-small-step-reduction.html#3101" class="Bound">M</a> <a id="3126" href="add-small-step-reduction.html#3060" class="Datatype Operator">—↠</a> <a id="3129" href="add-small-step-reduction.html#3101" class="Bound">M</a>

  <a id="_—↠_._—→⟨_⟩_"></a><a id="3134" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">_—→⟨_⟩_</a> <a id="3142" class="Symbol">:</a> <a id="3144" class="Symbol">∀</a> <a id="3146" href="add-small-step-reduction.html#3146" class="Bound">L</a> <a id="3148" class="Symbol">{</a><a id="3149" href="add-small-step-reduction.html#3149" class="Bound">M</a> <a id="3151" href="add-small-step-reduction.html#3151" class="Bound">N</a><a id="3152" class="Symbol">}</a>
    <a id="3158" class="Symbol">→</a> <a id="3160" href="add-small-step-reduction.html#3146" class="Bound">L</a> <a id="3162" href="add-small-step-reduction.html#1047" class="Datatype Operator">—→</a> <a id="3165" href="add-small-step-reduction.html#3149" class="Bound">M</a>
    <a id="3171" class="Symbol">→</a> <a id="3173" href="add-small-step-reduction.html#3149" class="Bound">M</a> <a id="3175" href="add-small-step-reduction.html#3060" class="Datatype Operator">—↠</a> <a id="3178" href="add-small-step-reduction.html#3151" class="Bound">N</a>
      <a id="3186" class="Comment">---------</a>
    <a id="3200" class="Symbol">→</a> <a id="3202" href="add-small-step-reduction.html#3146" class="Bound">L</a> <a id="3204" href="add-small-step-reduction.html#3060" class="Datatype Operator">—↠</a> <a id="3207" href="add-small-step-reduction.html#3151" class="Bound">N</a>

<a id="begin_"></a><a id="3210" href="add-small-step-reduction.html#3210" class="Function Operator">begin_</a> <a id="3217" class="Symbol">:</a> <a id="3219" class="Symbol">∀</a> <a id="3221" class="Symbol">{</a><a id="3222" href="add-small-step-reduction.html#3222" class="Bound">M</a> <a id="3224" href="add-small-step-reduction.html#3224" class="Bound">N</a><a id="3225" class="Symbol">}</a>
  <a id="3229" class="Symbol">→</a> <a id="3231" href="add-small-step-reduction.html#3222" class="Bound">M</a> <a id="3233" href="add-small-step-reduction.html#3060" class="Datatype Operator">—↠</a> <a id="3236" href="add-small-step-reduction.html#3224" class="Bound">N</a>
    <a id="3242" class="Comment">------</a>
  <a id="3251" class="Symbol">→</a> <a id="3253" href="add-small-step-reduction.html#3222" class="Bound">M</a> <a id="3255" href="add-small-step-reduction.html#3060" class="Datatype Operator">—↠</a> <a id="3258" href="add-small-step-reduction.html#3224" class="Bound">N</a>
<a id="3260" href="add-small-step-reduction.html#3210" class="Function Operator">begin</a> <a id="3266" href="add-small-step-reduction.html#3266" class="Bound">M—↠N</a> <a id="3271" class="Symbol">=</a> <a id="3273" href="add-small-step-reduction.html#3266" class="Bound">M—↠N</a>
</pre>
<h1 id="evaluation">Evaluation</h1>
<p>For the definition evaluation, it will be necessary to defined when an expression was finished in the evaluation and the steps of the evaluation.</p>
<pre class="Agda"><a id="3448" class="Keyword">data</a> <a id="Finished"></a><a id="3453" href="add-small-step-reduction.html#3453" class="Datatype">Finished</a> <a id="3462" class="Symbol">(</a><a id="3463" href="add-small-step-reduction.html#3463" class="Bound">N</a> <a id="3465" class="Symbol">:</a> <a id="3467" href="add-small-step-reduction.html#665" class="Datatype">Expr</a><a id="3471" class="Symbol">)</a> <a id="3473" class="Symbol">:</a> <a id="3475" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="3479" class="Keyword">where</a>
   <a id="Finished.done"></a><a id="3488" href="add-small-step-reduction.html#3488" class="InductiveConstructor">done</a> <a id="3493" class="Symbol">:</a>
       <a id="3502" href="add-small-step-reduction.html#848" class="Datatype">Value</a> <a id="3508" href="add-small-step-reduction.html#3463" class="Bound">N</a>
       <a id="3517" class="Comment">----------</a>
     <a id="3533" class="Symbol">→</a> <a id="3535" href="add-small-step-reduction.html#3453" class="Datatype">Finished</a> <a id="3544" href="add-small-step-reduction.html#3463" class="Bound">N</a>

   <a id="Finished.out-of-gas"></a><a id="3550" href="add-small-step-reduction.html#3550" class="InductiveConstructor">out-of-gas</a> <a id="3561" class="Symbol">:</a>
       <a id="3570" class="Comment">----------</a>
       <a id="3588" href="add-small-step-reduction.html#3453" class="Datatype">Finished</a> <a id="3597" href="add-small-step-reduction.html#3463" class="Bound">N</a>
</pre>
<p>A expression is finished when it is a value or when there is no more gas available to calculate it. In Agda, every computation must terminate. So it is impossible to have an infinite loop. So when an expression takes so much time or computation to finish, it runs out of gas and there is no result.</p>
<pre class="Agda"><a id="3908" class="Keyword">data</a> <a id="Steps"></a><a id="3913" href="add-small-step-reduction.html#3913" class="Datatype">Steps</a> <a id="3919" class="Symbol">:</a> <a id="3921" href="add-small-step-reduction.html#665" class="Datatype">Expr</a> <a id="3926" class="Symbol">→</a> <a id="3928" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="3932" class="Keyword">where</a>
  <a id="Steps.steps"></a><a id="3940" href="add-small-step-reduction.html#3940" class="InductiveConstructor">steps</a> <a id="3946" class="Symbol">:</a> <a id="3948" class="Symbol">∀</a> <a id="3950" class="Symbol">{</a><a id="3951" href="add-small-step-reduction.html#3951" class="Bound">L</a> <a id="3953" href="add-small-step-reduction.html#3953" class="Bound">N</a><a id="3954" class="Symbol">}</a>
    <a id="3960" class="Symbol">→</a> <a id="3962" href="add-small-step-reduction.html#3951" class="Bound">L</a> <a id="3964" href="add-small-step-reduction.html#3060" class="Datatype Operator">—↠</a> <a id="3967" href="add-small-step-reduction.html#3953" class="Bound">N</a>
    <a id="3973" class="Symbol">→</a> <a id="3975" href="add-small-step-reduction.html#3453" class="Datatype">Finished</a> <a id="3984" href="add-small-step-reduction.html#3953" class="Bound">N</a>
      <a id="3992" class="Comment">----------</a>
    <a id="4007" class="Symbol">→</a> <a id="4009" href="add-small-step-reduction.html#3913" class="Datatype">Steps</a> <a id="4015" href="add-small-step-reduction.html#3951" class="Bound">L</a>
</pre>
<p>The evaluation finishes when there is a proof of multi step for the value and it is already finished.</p>
<pre class="Agda"><a id="eval"></a><a id="4129" href="add-small-step-reduction.html#4129" class="Function">eval</a> <a id="4134" class="Symbol">:</a>
    <a id="4140" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
  <a id="4144" class="Symbol">→</a> <a id="4146" class="Symbol">(</a><a id="4147" href="add-small-step-reduction.html#4147" class="Bound">L</a> <a id="4149" class="Symbol">:</a> <a id="4151" href="add-small-step-reduction.html#665" class="Datatype">Expr</a><a id="4155" class="Symbol">)</a>
    <a id="4161" class="Comment">-----------</a>
  <a id="4175" class="Symbol">→</a> <a id="4177" href="add-small-step-reduction.html#3913" class="Datatype">Steps</a> <a id="4183" href="add-small-step-reduction.html#4147" class="Bound">L</a>
<a id="4185" href="add-small-step-reduction.html#4129" class="Function">eval</a> <a id="4190" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a> <a id="4195" href="add-small-step-reduction.html#4195" class="Bound">L</a> <a id="4197" class="Symbol">=</a> <a id="4199" href="add-small-step-reduction.html#3940" class="InductiveConstructor">steps</a> <a id="4205" class="Symbol">(</a><a id="4206" href="add-small-step-reduction.html#4195" class="Bound">L</a> <a id="4208" href="add-small-step-reduction.html#3094" class="InductiveConstructor Operator">∎</a><a id="4209" class="Symbol">)</a> <a id="4211" href="add-small-step-reduction.html#3550" class="InductiveConstructor">out-of-gas</a>
<a id="4222" href="add-small-step-reduction.html#4129" class="Function">eval</a> <a id="4227" class="Symbol">(</a><a id="4228" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="4232" href="add-small-step-reduction.html#4232" class="Bound">n</a><a id="4233" class="Symbol">)</a> <a id="4235" href="add-small-step-reduction.html#4235" class="Bound">L</a> <a id="4237" class="Keyword">with</a> <a id="4242" href="add-small-step-reduction.html#2485" class="Function">progress</a> <a id="4251" href="add-small-step-reduction.html#4235" class="Bound">L</a>
<a id="4253" class="Symbol">...</a> <a id="4257" class="Symbol">|</a> <a id="4259" href="add-small-step-reduction.html#2367" class="InductiveConstructor">done</a> <a id="4264" href="add-small-step-reduction.html#4264" class="Bound">x</a> <a id="4266" class="Symbol">=</a> <a id="4268" href="add-small-step-reduction.html#3940" class="InductiveConstructor">steps</a> <a id="4274" class="Symbol">(</a><a id="4275" class="Bound">L</a> <a id="4277" href="add-small-step-reduction.html#3094" class="InductiveConstructor Operator">∎</a><a id="4278" class="Symbol">)</a> <a id="4280" class="Symbol">(</a><a id="4281" href="add-small-step-reduction.html#3488" class="InductiveConstructor">done</a> <a id="4286" href="add-small-step-reduction.html#4264" class="Bound">x</a><a id="4287" class="Symbol">)</a>
<a id="4289" class="Symbol">...</a> <a id="4293" class="Symbol">|</a> <a id="4295" href="add-small-step-reduction.html#2304" class="InductiveConstructor">step</a> <a id="4300" class="Symbol">{</a><a id="4301" href="add-small-step-reduction.html#4301" class="Bound">M</a><a id="4302" class="Symbol">}</a> <a id="4304" href="add-small-step-reduction.html#4304" class="Bound">L—→M</a> <a id="4309" class="Keyword">with</a> <a id="4314" href="add-small-step-reduction.html#4129" class="Function">eval</a> <a id="4319" class="Bound">n</a> <a id="4321" href="add-small-step-reduction.html#4301" class="Bound">M</a>
<a id="4323" class="Symbol">...</a>   <a id="4329" class="Symbol">|</a> <a id="4331" href="add-small-step-reduction.html#3940" class="InductiveConstructor">steps</a> <a id="4337" href="add-small-step-reduction.html#4337" class="Bound">M—→N</a> <a id="4342" href="add-small-step-reduction.html#4342" class="Bound">fin</a> <a id="4346" class="Symbol">=</a> <a id="4348" href="add-small-step-reduction.html#3940" class="InductiveConstructor">steps</a> <a id="4354" class="Symbol">(</a><a id="4355" class="Bound">L</a> <a id="4357" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">—→⟨</a> <a id="4361" class="Bound">L—→M</a> <a id="4366" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">⟩</a> <a id="4368" href="add-small-step-reduction.html#4337" class="Bound">M—→N</a><a id="4372" class="Symbol">)</a> <a id="4374" href="add-small-step-reduction.html#4342" class="Bound">fin</a>
</pre>
<p>The evaluation takes gas as first param and the expression to evaluate. In the end, it returns the value with a proof that the expression evaluate to this value.</p>
<p>Here, some examples of the evaluation:</p>
<pre class="Agda"><a id="4590" href="add-small-step-reduction.html#4590" class="Function">_</a> <a id="4592" class="Symbol">:</a> <a id="4594" href="add-small-step-reduction.html#4129" class="Function">eval</a> <a id="4599" class="Number">100</a> <a id="4603" class="Symbol">(</a><a id="4604" class="InductiveConstructor">nat</a> <a id="4608" class="Number">2</a> <a id="4610" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="4612" class="InductiveConstructor">nat</a> <a id="4616" class="Number">2</a><a id="4617" class="Symbol">)</a> <a id="4619" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="4621" href="add-small-step-reduction.html#3940" class="InductiveConstructor">steps</a>
  <a id="4629" class="Symbol">(</a><a id="4630" class="InductiveConstructor">nat</a> <a id="4634" class="Number">2</a> <a id="4636" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="4638" class="InductiveConstructor">nat</a> <a id="4642" class="Number">2</a> <a id="4644" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">—→⟨</a> <a id="4648" href="add-small-step-reduction.html#1240" class="InductiveConstructor">ϕ+</a> <a id="4651" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">⟩</a>
   <a id="4656" class="InductiveConstructor">nat</a> <a id="4660" class="Number">1</a> <a id="4662" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="4664" class="InductiveConstructor">nat</a> <a id="4668" class="Number">3</a> <a id="4670" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">—→⟨</a> <a id="4674" href="add-small-step-reduction.html#1240" class="InductiveConstructor">ϕ+</a> <a id="4677" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">⟩</a>
   <a id="4682" class="InductiveConstructor">nat</a> <a id="4686" class="Number">0</a> <a id="4688" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="4690" class="InductiveConstructor">nat</a> <a id="4694" class="Number">4</a> <a id="4696" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">—→⟨</a> <a id="4700" href="add-small-step-reduction.html#1202" class="InductiveConstructor">ϕ0</a> <a id="4703" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">⟩</a>
   <a id="4708" class="InductiveConstructor">nat</a> <a id="4712" class="Number">4</a> <a id="4714" href="add-small-step-reduction.html#3094" class="InductiveConstructor Operator">∎</a><a id="4715" class="Symbol">)</a>
   <a id="4720" class="Symbol">(</a><a id="4721" class="InductiveConstructor">done</a> <a id="4726" class="Symbol">(</a><a id="4727" class="InductiveConstructor">nat</a> <a id="4731" class="Number">4</a><a id="4732" class="Symbol">))</a>
<a id="4735" class="Symbol">_</a> <a id="4737" class="Symbol">=</a> <a id="4739" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="4745" href="add-small-step-reduction.html#4745" class="Function">_</a> <a id="4747" class="Symbol">:</a> <a id="4749" href="add-small-step-reduction.html#4129" class="Function">eval</a> <a id="4754" class="Number">100</a> <a id="4758" class="Symbol">(</a><a id="4759" class="InductiveConstructor">nat</a> <a id="4763" class="Number">1</a> <a id="4765" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="4767" class="InductiveConstructor">nat</a> <a id="4771" class="Number">1</a> <a id="4773" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="4775" class="InductiveConstructor">nat</a> <a id="4779" class="Number">2</a><a id="4780" class="Symbol">)</a> <a id="4782" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="4784" href="add-small-step-reduction.html#3940" class="InductiveConstructor">steps</a>
    <a id="4794" class="Symbol">(</a><a id="4795" class="InductiveConstructor">nat</a> <a id="4799" class="Number">1</a> <a id="4801" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="4803" class="InductiveConstructor">nat</a> <a id="4807" class="Number">1</a> <a id="4809" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="4811" class="InductiveConstructor">nat</a> <a id="4815" class="Number">2</a> <a id="4817" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">—→⟨</a> <a id="4821" href="add-small-step-reduction.html#1134" class="InductiveConstructor">ξ₂</a> <a id="4824" class="Symbol">(</a><a id="4825" class="InductiveConstructor">nat</a> <a id="4829" class="Number">1</a><a id="4830" class="Symbol">)</a> <a id="4832" href="add-small-step-reduction.html#1240" class="InductiveConstructor">ϕ+</a> <a id="4835" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">⟩</a>
       <a id="4844" class="InductiveConstructor">nat</a> <a id="4848" class="Number">1</a> <a id="4850" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="4852" class="InductiveConstructor">nat</a> <a id="4856" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a> <a id="4861" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="4863" class="InductiveConstructor">nat</a> <a id="4867" class="Number">3</a> <a id="4869" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">—→⟨</a> <a id="4873" href="add-small-step-reduction.html#1134" class="InductiveConstructor">ξ₂</a> <a id="4876" class="Symbol">(</a><a id="4877" class="InductiveConstructor">nat</a> <a id="4881" class="Number">1</a><a id="4882" class="Symbol">)</a> <a id="4884" href="add-small-step-reduction.html#1202" class="InductiveConstructor">ϕ0</a> <a id="4887" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">⟩</a>
       <a id="4896" class="InductiveConstructor">nat</a> <a id="4900" class="Number">1</a> <a id="4902" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="4904" class="InductiveConstructor">nat</a> <a id="4908" class="Number">3</a> <a id="4910" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">—→⟨</a> <a id="4914" href="add-small-step-reduction.html#1240" class="InductiveConstructor">ϕ+</a> <a id="4917" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">⟩</a> <a id="4919" class="InductiveConstructor">nat</a> <a id="4923" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a> <a id="4928" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="4930" class="InductiveConstructor">nat</a> <a id="4934" class="Number">4</a> <a id="4936" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">—→⟨</a> <a id="4940" href="add-small-step-reduction.html#1202" class="InductiveConstructor">ϕ0</a> <a id="4943" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">⟩</a> <a id="4945" class="InductiveConstructor">nat</a> <a id="4949" class="Number">4</a> <a id="4951" href="add-small-step-reduction.html#3094" class="InductiveConstructor Operator">∎</a><a id="4952" class="Symbol">)</a>
   <a id="4957" class="Symbol">(</a><a id="4958" class="InductiveConstructor">done</a> <a id="4963" class="Symbol">(</a><a id="4964" class="InductiveConstructor">nat</a> <a id="4968" class="Number">4</a><a id="4969" class="Symbol">))</a>
<a id="4972" class="Symbol">_</a> <a id="4974" class="Symbol">=</a> <a id="4976" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="4982" href="add-small-step-reduction.html#4982" class="Function">_</a> <a id="4984" class="Symbol">:</a> <a id="4986" href="add-small-step-reduction.html#4129" class="Function">eval</a> <a id="4991" class="Number">100</a> <a id="4995" class="Symbol">((</a><a id="4997" class="InductiveConstructor">nat</a> <a id="5001" class="Number">1</a> <a id="5003" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="5005" class="InductiveConstructor">nat</a> <a id="5009" class="Number">1</a><a id="5010" class="Symbol">)</a> <a id="5012" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="5014" class="InductiveConstructor">nat</a> <a id="5018" class="Number">2</a><a id="5019" class="Symbol">)</a> <a id="5021" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="5023" href="add-small-step-reduction.html#3940" class="InductiveConstructor">steps</a>
  <a id="5031" class="Symbol">((</a><a id="5033" class="InductiveConstructor">nat</a> <a id="5037" class="Number">1</a> <a id="5039" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="5041" class="InductiveConstructor">nat</a> <a id="5045" class="Number">1</a><a id="5046" class="Symbol">)</a> <a id="5048" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="5050" class="InductiveConstructor">nat</a> <a id="5054" class="Number">2</a> <a id="5056" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">—→⟨</a> <a id="5060" href="add-small-step-reduction.html#1080" class="InductiveConstructor">ξ₁</a> <a id="5063" href="add-small-step-reduction.html#1240" class="InductiveConstructor">ϕ+</a> <a id="5066" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">⟩</a>
   <a id="5071" class="Symbol">(</a><a id="5072" class="InductiveConstructor">nat</a> <a id="5076" class="Number">0</a> <a id="5078" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="5080" class="InductiveConstructor">nat</a> <a id="5084" class="Number">2</a><a id="5085" class="Symbol">)</a> <a id="5087" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="5089" class="InductiveConstructor">nat</a> <a id="5093" class="Number">2</a> <a id="5095" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">—→⟨</a> <a id="5099" href="add-small-step-reduction.html#1080" class="InductiveConstructor">ξ₁</a> <a id="5102" href="add-small-step-reduction.html#1202" class="InductiveConstructor">ϕ0</a> <a id="5105" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">⟩</a>
    <a id="5111" class="InductiveConstructor">nat</a> <a id="5115" class="Number">2</a> <a id="5117" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="5119" class="InductiveConstructor">nat</a> <a id="5123" class="Number">2</a>          <a id="5134" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">—→⟨</a> <a id="5138" href="add-small-step-reduction.html#1240" class="InductiveConstructor">ϕ+</a>    <a id="5144" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">⟩</a>
    <a id="5150" class="InductiveConstructor">nat</a> <a id="5154" class="Number">1</a> <a id="5156" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="5158" class="InductiveConstructor">nat</a> <a id="5162" class="Number">3</a>          <a id="5173" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">—→⟨</a> <a id="5177" href="add-small-step-reduction.html#1240" class="InductiveConstructor">ϕ+</a>    <a id="5183" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">⟩</a>
    <a id="5189" class="InductiveConstructor">nat</a> <a id="5193" class="Number">0</a> <a id="5195" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="5197" class="InductiveConstructor">nat</a> <a id="5201" class="Number">4</a>          <a id="5212" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">—→⟨</a> <a id="5216" href="add-small-step-reduction.html#1202" class="InductiveConstructor">ϕ0</a>    <a id="5222" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">⟩</a>
    <a id="5228" class="InductiveConstructor">nat</a> <a id="5232" class="Number">4</a> <a id="5234" href="add-small-step-reduction.html#3094" class="InductiveConstructor Operator">∎</a><a id="5235" class="Symbol">)</a>
  <a id="5239" class="Symbol">(</a><a id="5240" class="InductiveConstructor">done</a> <a id="5245" class="Symbol">(</a><a id="5246" class="InductiveConstructor">nat</a> <a id="5250" class="Number">4</a><a id="5251" class="Symbol">))</a>
<a id="5254" class="Symbol">_</a> <a id="5256" class="Symbol">=</a> <a id="5258" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
</pre>
<h1 id="proofs-for-later-use">Proofs for later use</h1>
<p>I prove some axioms to use it later in the part of parallel reduction.</p>
<pre class="Agda"><a id="—↠-trans"></a><a id="5368" href="add-small-step-reduction.html#5368" class="Function">—↠-trans</a> <a id="5377" class="Symbol">:</a> <a id="5379" class="Symbol">∀</a> <a id="5381" class="Symbol">{</a><a id="5382" href="add-small-step-reduction.html#5382" class="Bound">L</a> <a id="5384" href="add-small-step-reduction.html#5384" class="Bound">M</a> <a id="5386" href="add-small-step-reduction.html#5386" class="Bound">N</a><a id="5387" class="Symbol">}</a>
         <a id="5398" class="Symbol">→</a> <a id="5400" href="add-small-step-reduction.html#5382" class="Bound">L</a> <a id="5402" href="add-small-step-reduction.html#3060" class="Datatype Operator">—↠</a> <a id="5405" href="add-small-step-reduction.html#5384" class="Bound">M</a>
         <a id="5416" class="Symbol">→</a> <a id="5418" href="add-small-step-reduction.html#5384" class="Bound">M</a> <a id="5420" href="add-small-step-reduction.html#3060" class="Datatype Operator">—↠</a> <a id="5423" href="add-small-step-reduction.html#5386" class="Bound">N</a>
         <a id="5434" class="Symbol">→</a> <a id="5436" href="add-small-step-reduction.html#5382" class="Bound">L</a> <a id="5438" href="add-small-step-reduction.html#3060" class="Datatype Operator">—↠</a> <a id="5441" href="add-small-step-reduction.html#5386" class="Bound">N</a>
<a id="5443" href="add-small-step-reduction.html#5368" class="Function">—↠-trans</a> <a id="5452" class="Symbol">(</a><a id="5453" href="add-small-step-reduction.html#5453" class="Bound">M</a> <a id="5455" href="add-small-step-reduction.html#3094" class="InductiveConstructor Operator">∎</a><a id="5456" class="Symbol">)</a> <a id="5458" href="add-small-step-reduction.html#5458" class="Bound">mn</a> <a id="5461" class="Symbol">=</a> <a id="5463" href="add-small-step-reduction.html#5458" class="Bound">mn</a>
<a id="5466" href="add-small-step-reduction.html#5368" class="Function">—↠-trans</a> <a id="5475" class="Symbol">(</a><a id="5476" href="add-small-step-reduction.html#5476" class="Bound">L</a> <a id="5478" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">—→⟨</a> <a id="5482" href="add-small-step-reduction.html#5482" class="Bound">r</a> <a id="5484" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">⟩</a> <a id="5486" href="add-small-step-reduction.html#5486" class="Bound">lm</a><a id="5488" class="Symbol">)</a> <a id="5490" href="add-small-step-reduction.html#5490" class="Bound">mn</a> <a id="5493" class="Symbol">=</a> <a id="5495" href="add-small-step-reduction.html#5476" class="Bound">L</a> <a id="5497" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">—→⟨</a> <a id="5501" href="add-small-step-reduction.html#5482" class="Bound">r</a> <a id="5503" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">⟩</a> <a id="5505" class="Symbol">(</a><a id="5506" href="add-small-step-reduction.html#5368" class="Function">—↠-trans</a> <a id="5515" href="add-small-step-reduction.html#5486" class="Bound">lm</a> <a id="5518" href="add-small-step-reduction.html#5490" class="Bound">mn</a><a id="5520" class="Symbol">)</a>

<a id="5523" class="Keyword">infixr</a> <a id="5530" class="Number">2</a> <a id="5532" href="add-small-step-reduction.html#5541" class="Function Operator">_—↠⟨_⟩_</a>

<a id="_—↠⟨_⟩_"></a><a id="5541" href="add-small-step-reduction.html#5541" class="Function Operator">_—↠⟨_⟩_</a> <a id="5549" class="Symbol">:</a> <a id="5551" class="Symbol">∀</a> <a id="5553" href="add-small-step-reduction.html#5553" class="Bound">L</a> <a id="5555" class="Symbol">{</a><a id="5556" href="add-small-step-reduction.html#5556" class="Bound">M</a> <a id="5558" href="add-small-step-reduction.html#5558" class="Bound">N</a><a id="5559" class="Symbol">}</a>
    <a id="5565" class="Symbol">→</a> <a id="5567" href="add-small-step-reduction.html#5553" class="Bound">L</a> <a id="5569" href="add-small-step-reduction.html#3060" class="Datatype Operator">—↠</a> <a id="5572" href="add-small-step-reduction.html#5556" class="Bound">M</a>
    <a id="5578" class="Symbol">→</a> <a id="5580" href="add-small-step-reduction.html#5556" class="Bound">M</a> <a id="5582" href="add-small-step-reduction.html#3060" class="Datatype Operator">—↠</a> <a id="5585" href="add-small-step-reduction.html#5558" class="Bound">N</a>
      <a id="5593" class="Comment">---------</a>
    <a id="5607" class="Symbol">→</a> <a id="5609" href="add-small-step-reduction.html#5553" class="Bound">L</a> <a id="5611" href="add-small-step-reduction.html#3060" class="Datatype Operator">—↠</a> <a id="5614" href="add-small-step-reduction.html#5558" class="Bound">N</a>
<a id="5616" href="add-small-step-reduction.html#5616" class="Bound">L</a> <a id="5618" href="add-small-step-reduction.html#5541" class="Function Operator">—↠⟨</a> <a id="5622" href="add-small-step-reduction.html#5622" class="Bound">L—↠M</a> <a id="5627" href="add-small-step-reduction.html#5541" class="Function Operator">⟩</a> <a id="5629" href="add-small-step-reduction.html#5629" class="Bound">M—↠N</a> <a id="5634" class="Symbol">=</a> <a id="5636" href="add-small-step-reduction.html#5368" class="Function">—↠-trans</a> <a id="5645" href="add-small-step-reduction.html#5622" class="Bound">L—↠M</a> <a id="5650" href="add-small-step-reduction.html#5629" class="Bound">M—↠N</a>

<a id="appL-cong"></a><a id="5656" href="add-small-step-reduction.html#5656" class="Function">appL-cong</a> <a id="5666" class="Symbol">:</a> <a id="5668" class="Symbol">∀</a> <a id="5670" class="Symbol">{</a><a id="5671" href="add-small-step-reduction.html#5671" class="Bound">L</a> <a id="5673" href="add-small-step-reduction.html#5673" class="Bound">L'</a> <a id="5676" href="add-small-step-reduction.html#5676" class="Bound">M</a><a id="5677" class="Symbol">}</a>
         <a id="5688" class="Symbol">→</a> <a id="5690" href="add-small-step-reduction.html#5671" class="Bound">L</a> <a id="5692" href="add-small-step-reduction.html#3060" class="Datatype Operator">—↠</a> <a id="5695" href="add-small-step-reduction.html#5673" class="Bound">L'</a>
           <a id="5709" class="Comment">---------------</a>
         <a id="5734" class="Symbol">→</a> <a id="5736" href="add-small-step-reduction.html#5671" class="Bound">L</a> <a id="5738" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="5740" href="add-small-step-reduction.html#5676" class="Bound">M</a> <a id="5742" href="add-small-step-reduction.html#3060" class="Datatype Operator">—↠</a> <a id="5745" href="add-small-step-reduction.html#5673" class="Bound">L'</a> <a id="5748" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="5750" href="add-small-step-reduction.html#5676" class="Bound">M</a>
<a id="5752" href="add-small-step-reduction.html#5656" class="Function">appL-cong</a> <a id="5762" class="Symbol">{</a><a id="5763" href="add-small-step-reduction.html#5763" class="Bound">L</a><a id="5764" class="Symbol">}{</a><a id="5766" href="add-small-step-reduction.html#5766" class="Bound">L'</a><a id="5768" class="Symbol">}{</a><a id="5770" href="add-small-step-reduction.html#5770" class="Bound">M</a><a id="5771" class="Symbol">}</a> <a id="5773" class="Symbol">(</a><a id="5774" href="add-small-step-reduction.html#5763" class="Bound">L</a> <a id="5776" href="add-small-step-reduction.html#3094" class="InductiveConstructor Operator">∎</a><a id="5777" class="Symbol">)</a> <a id="5779" class="Symbol">=</a> <a id="5781" href="add-small-step-reduction.html#5763" class="Bound">L</a> <a id="5783" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="5785" href="add-small-step-reduction.html#5770" class="Bound">M</a> <a id="5787" href="add-small-step-reduction.html#3094" class="InductiveConstructor Operator">∎</a>
<a id="5789" href="add-small-step-reduction.html#5656" class="Function">appL-cong</a> <a id="5799" class="Symbol">{</a><a id="5800" href="add-small-step-reduction.html#5800" class="Bound">L</a><a id="5801" class="Symbol">}{</a><a id="5803" href="add-small-step-reduction.html#5803" class="Bound">L'</a><a id="5805" class="Symbol">}{</a><a id="5807" href="add-small-step-reduction.html#5807" class="Bound">M</a><a id="5808" class="Symbol">}</a> <a id="5810" class="Symbol">(</a><a id="5811" href="add-small-step-reduction.html#5800" class="Bound">L</a> <a id="5813" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">—→⟨</a> <a id="5817" href="add-small-step-reduction.html#5817" class="Bound">r</a> <a id="5819" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">⟩</a> <a id="5821" href="add-small-step-reduction.html#5821" class="Bound">rs</a><a id="5823" class="Symbol">)</a> <a id="5825" class="Symbol">=</a> <a id="5827" href="add-small-step-reduction.html#5800" class="Bound">L</a> <a id="5829" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="5831" href="add-small-step-reduction.html#5807" class="Bound">M</a> <a id="5833" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">—→⟨</a> <a id="5837" href="add-small-step-reduction.html#1080" class="InductiveConstructor">ξ₁</a> <a id="5840" href="add-small-step-reduction.html#5817" class="Bound">r</a> <a id="5842" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">⟩</a> <a id="5844" href="add-small-step-reduction.html#5656" class="Function">appL-cong</a> <a id="5854" href="add-small-step-reduction.html#5821" class="Bound">rs</a>

<a id="appR-cong"></a><a id="5858" href="add-small-step-reduction.html#5858" class="Function">appR-cong</a> <a id="5868" class="Symbol">:</a> <a id="5870" class="Symbol">∀</a> <a id="5872" class="Symbol">{</a><a id="5873" href="add-small-step-reduction.html#5873" class="Bound">L</a> <a id="5875" href="add-small-step-reduction.html#5875" class="Bound">M</a> <a id="5877" href="add-small-step-reduction.html#5877" class="Bound">M'</a><a id="5879" class="Symbol">}</a>
         <a id="5890" class="Symbol">→</a> <a id="5892" href="add-small-step-reduction.html#848" class="Datatype">Value</a> <a id="5898" href="add-small-step-reduction.html#5873" class="Bound">L</a>
         <a id="5909" class="Symbol">→</a> <a id="5911" href="add-small-step-reduction.html#5875" class="Bound">M</a> <a id="5913" href="add-small-step-reduction.html#3060" class="Datatype Operator">—↠</a> <a id="5916" href="add-small-step-reduction.html#5877" class="Bound">M'</a>
           <a id="5930" class="Comment">---------------</a>
         <a id="5955" class="Symbol">→</a> <a id="5957" href="add-small-step-reduction.html#5873" class="Bound">L</a> <a id="5959" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="5961" href="add-small-step-reduction.html#5875" class="Bound">M</a> <a id="5963" href="add-small-step-reduction.html#3060" class="Datatype Operator">—↠</a> <a id="5966" href="add-small-step-reduction.html#5873" class="Bound">L</a> <a id="5968" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="5970" href="add-small-step-reduction.html#5877" class="Bound">M'</a>
<a id="5973" href="add-small-step-reduction.html#5858" class="Function">appR-cong</a> <a id="5983" class="Symbol">{</a><a id="5984" href="add-small-step-reduction.html#5984" class="Bound">L</a><a id="5985" class="Symbol">}{</a><a id="5987" href="add-small-step-reduction.html#5987" class="Bound">M</a><a id="5988" class="Symbol">}{</a><a id="5990" href="add-small-step-reduction.html#5990" class="Bound">M'</a><a id="5992" class="Symbol">}</a> <a id="5994" href="add-small-step-reduction.html#5994" class="Bound">VL</a> <a id="5997" class="Symbol">(</a><a id="5998" href="add-small-step-reduction.html#5987" class="Bound">M</a> <a id="6000" href="add-small-step-reduction.html#3094" class="InductiveConstructor Operator">∎</a><a id="6001" class="Symbol">)</a> <a id="6003" class="Symbol">=</a> <a id="6005" href="add-small-step-reduction.html#5984" class="Bound">L</a> <a id="6007" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="6009" href="add-small-step-reduction.html#5987" class="Bound">M</a> <a id="6011" href="add-small-step-reduction.html#3094" class="InductiveConstructor Operator">∎</a>
<a id="6013" href="add-small-step-reduction.html#5858" class="Function">appR-cong</a> <a id="6023" class="Symbol">{</a><a id="6024" href="add-small-step-reduction.html#6024" class="Bound">L</a><a id="6025" class="Symbol">}{</a><a id="6027" href="add-small-step-reduction.html#6027" class="Bound">M</a><a id="6028" class="Symbol">}{</a><a id="6030" href="add-small-step-reduction.html#6030" class="Bound">M'</a><a id="6032" class="Symbol">}</a> <a id="6034" href="add-small-step-reduction.html#6034" class="Bound">VL</a> <a id="6037" class="Symbol">(</a><a id="6038" href="add-small-step-reduction.html#6027" class="Bound">M</a> <a id="6040" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">—→⟨</a> <a id="6044" href="add-small-step-reduction.html#6044" class="Bound">r</a> <a id="6046" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">⟩</a> <a id="6048" href="add-small-step-reduction.html#6048" class="Bound">rs</a><a id="6050" class="Symbol">)</a> <a id="6052" class="Symbol">=</a> <a id="6054" href="add-small-step-reduction.html#6024" class="Bound">L</a> <a id="6056" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="6058" href="add-small-step-reduction.html#6027" class="Bound">M</a> <a id="6060" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">—→⟨</a> <a id="6064" href="add-small-step-reduction.html#1134" class="InductiveConstructor">ξ₂</a> <a id="6067" href="add-small-step-reduction.html#6034" class="Bound">VL</a> <a id="6070" href="add-small-step-reduction.html#6044" class="Bound">r</a> <a id="6072" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">⟩</a> <a id="6074" href="add-small-step-reduction.html#5858" class="Function">appR-cong</a> <a id="6084" href="add-small-step-reduction.html#6034" class="Bound">VL</a> <a id="6087" href="add-small-step-reduction.html#6048" class="Bound">rs</a>

<a id="abs-cong"></a><a id="6091" href="add-small-step-reduction.html#6091" class="Function">abs-cong</a> <a id="6100" class="Symbol">:</a> <a id="6102" class="Symbol">∀</a> <a id="6104" class="Symbol">{</a><a id="6105" href="add-small-step-reduction.html#6105" class="Bound">M</a> <a id="6107" href="add-small-step-reduction.html#6107" class="Bound">M'</a> <a id="6110" href="add-small-step-reduction.html#6110" class="Bound">N</a> <a id="6112" href="add-small-step-reduction.html#6112" class="Bound">N'</a><a id="6114" class="Symbol">}</a>
         <a id="6125" class="Symbol">→</a> <a id="6127" href="add-small-step-reduction.html#848" class="Datatype">Value</a> <a id="6133" href="add-small-step-reduction.html#6107" class="Bound">M'</a>
         <a id="6145" class="Symbol">→</a> <a id="6147" href="add-small-step-reduction.html#6105" class="Bound">M</a> <a id="6149" href="add-small-step-reduction.html#3060" class="Datatype Operator">—↠</a> <a id="6152" href="add-small-step-reduction.html#6107" class="Bound">M'</a>
         <a id="6164" class="Symbol">→</a> <a id="6166" href="add-small-step-reduction.html#6110" class="Bound">N</a> <a id="6168" href="add-small-step-reduction.html#3060" class="Datatype Operator">—↠</a> <a id="6171" href="add-small-step-reduction.html#6112" class="Bound">N'</a>
           <a id="6185" class="Comment">----------</a>
         <a id="6205" class="Symbol">→</a> <a id="6207" href="add-small-step-reduction.html#6105" class="Bound">M</a> <a id="6209" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="6211" href="add-small-step-reduction.html#6110" class="Bound">N</a> <a id="6213" href="add-small-step-reduction.html#3060" class="Datatype Operator">—↠</a> <a id="6216" href="add-small-step-reduction.html#6107" class="Bound">M'</a> <a id="6219" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="6221" href="add-small-step-reduction.html#6112" class="Bound">N'</a>
<a id="6224" href="add-small-step-reduction.html#6091" class="Function">abs-cong</a> <a id="6233" href="add-small-step-reduction.html#6233" class="Bound">VM</a> <a id="6236" class="Symbol">(</a><a id="6237" href="add-small-step-reduction.html#6237" class="Bound">M</a> <a id="6239" href="add-small-step-reduction.html#3094" class="InductiveConstructor Operator">∎</a><a id="6240" class="Symbol">)</a> <a id="6242" class="Symbol">(</a><a id="6243" href="add-small-step-reduction.html#6243" class="Bound">N</a> <a id="6245" href="add-small-step-reduction.html#3094" class="InductiveConstructor Operator">∎</a><a id="6246" class="Symbol">)</a> <a id="6248" class="Symbol">=</a> <a id="6250" href="add-small-step-reduction.html#6237" class="Bound">M</a> <a id="6252" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="6254" href="add-small-step-reduction.html#6243" class="Bound">N</a> <a id="6256" href="add-small-step-reduction.html#3094" class="InductiveConstructor Operator">∎</a>
<a id="6258" href="add-small-step-reduction.html#6091" class="Function">abs-cong</a> <a id="6267" href="add-small-step-reduction.html#6267" class="Bound">VM</a> <a id="6270" class="Symbol">(</a><a id="6271" href="add-small-step-reduction.html#6271" class="Bound">M</a> <a id="6273" href="add-small-step-reduction.html#3094" class="InductiveConstructor Operator">∎</a><a id="6274" class="Symbol">)</a> <a id="6276" class="Symbol">(</a><a id="6277" href="add-small-step-reduction.html#6277" class="Bound">N</a> <a id="6279" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">—→⟨</a> <a id="6283" href="add-small-step-reduction.html#6283" class="Bound">st</a> <a id="6286" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">⟩</a> <a id="6288" href="add-small-step-reduction.html#6288" class="Bound">N'</a><a id="6290" class="Symbol">)</a> <a id="6292" class="Symbol">=</a> <a id="6294" href="add-small-step-reduction.html#6271" class="Bound">M</a> <a id="6296" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="6298" href="add-small-step-reduction.html#6277" class="Bound">N</a> <a id="6300" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">—→⟨</a> <a id="6304" href="add-small-step-reduction.html#1134" class="InductiveConstructor">ξ₂</a> <a id="6307" href="add-small-step-reduction.html#6267" class="Bound">VM</a> <a id="6310" href="add-small-step-reduction.html#6283" class="Bound">st</a> <a id="6313" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">⟩</a> <a id="6315" href="add-small-step-reduction.html#6091" class="Function">abs-cong</a> <a id="6324" href="add-small-step-reduction.html#6267" class="Bound">VM</a> <a id="6327" class="Symbol">(</a><a id="6328" href="add-small-step-reduction.html#6271" class="Bound">M</a> <a id="6330" href="add-small-step-reduction.html#3094" class="InductiveConstructor Operator">∎</a><a id="6331" class="Symbol">)</a> <a id="6333" href="add-small-step-reduction.html#6288" class="Bound">N'</a>
<a id="6336" href="add-small-step-reduction.html#6091" class="Function">abs-cong</a> <a id="6345" href="add-small-step-reduction.html#6345" class="Bound">VM</a> <a id="6348" class="Symbol">(</a><a id="6349" href="add-small-step-reduction.html#6349" class="Bound">M</a> <a id="6351" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">—→⟨</a> <a id="6355" href="add-small-step-reduction.html#6355" class="Bound">st</a> <a id="6358" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">⟩</a> <a id="6360" href="add-small-step-reduction.html#6360" class="Bound">M'</a><a id="6362" class="Symbol">)</a> <a id="6364" class="Symbol">(</a><a id="6365" href="add-small-step-reduction.html#6365" class="Bound">N</a> <a id="6367" href="add-small-step-reduction.html#3094" class="InductiveConstructor Operator">∎</a><a id="6368" class="Symbol">)</a> <a id="6370" class="Symbol">=</a> <a id="6372" href="add-small-step-reduction.html#6349" class="Bound">M</a> <a id="6374" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="6376" href="add-small-step-reduction.html#6365" class="Bound">N</a> <a id="6378" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">—→⟨</a> <a id="6382" href="add-small-step-reduction.html#1080" class="InductiveConstructor">ξ₁</a> <a id="6385" href="add-small-step-reduction.html#6355" class="Bound">st</a> <a id="6388" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">⟩</a> <a id="6390" href="add-small-step-reduction.html#6091" class="Function">abs-cong</a> <a id="6399" href="add-small-step-reduction.html#6345" class="Bound">VM</a> <a id="6402" href="add-small-step-reduction.html#6360" class="Bound">M'</a> <a id="6405" class="Symbol">(</a><a id="6406" href="add-small-step-reduction.html#6365" class="Bound">N</a> <a id="6408" href="add-small-step-reduction.html#3094" class="InductiveConstructor Operator">∎</a><a id="6409" class="Symbol">)</a>
<a id="6411" href="add-small-step-reduction.html#6091" class="Function">abs-cong</a> <a id="6420" href="add-small-step-reduction.html#6420" class="Bound">VM</a> <a id="6423" class="Symbol">(</a><a id="6424" href="add-small-step-reduction.html#6424" class="Bound">M</a> <a id="6426" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">—→⟨</a> <a id="6430" href="add-small-step-reduction.html#6430" class="Bound">stm</a> <a id="6434" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">⟩</a> <a id="6436" href="add-small-step-reduction.html#6436" class="Bound">M'</a><a id="6438" class="Symbol">)</a> <a id="6440" class="Symbol">(</a><a id="6441" href="add-small-step-reduction.html#6441" class="Bound">N</a> <a id="6443" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">—→⟨</a> <a id="6447" href="add-small-step-reduction.html#6447" class="Bound">stn</a> <a id="6451" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">⟩</a> <a id="6453" href="add-small-step-reduction.html#6453" class="Bound">N'</a><a id="6455" class="Symbol">)</a> <a id="6457" class="Symbol">=</a> <a id="6459" href="add-small-step-reduction.html#6424" class="Bound">M</a> <a id="6461" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="6463" href="add-small-step-reduction.html#6441" class="Bound">N</a> <a id="6465" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">—→⟨</a> <a id="6469" href="add-small-step-reduction.html#1080" class="InductiveConstructor">ξ₁</a> <a id="6472" href="add-small-step-reduction.html#6430" class="Bound">stm</a> <a id="6476" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">⟩</a> <a id="6478" href="add-small-step-reduction.html#6091" class="Function">abs-cong</a> <a id="6487" href="add-small-step-reduction.html#6420" class="Bound">VM</a> <a id="6490" href="add-small-step-reduction.html#6436" class="Bound">M'</a> <a id="6493" class="Symbol">(</a><a id="6494" href="add-small-step-reduction.html#6441" class="Bound">N</a> <a id="6496" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">—→⟨</a> <a id="6500" href="add-small-step-reduction.html#6447" class="Bound">stn</a> <a id="6504" href="add-small-step-reduction.html#3134" class="InductiveConstructor Operator">⟩</a> <a id="6506" href="add-small-step-reduction.html#6453" class="Bound">N'</a><a id="6508" class="Symbol">)</a>
</pre>
<h1 id="parallel-reduction">Parallel Reduction</h1>
<p>The parallel reduction is good for doing reductions in parallel, so it can run faster in a multi core computer.</p>
<h2 id="single-step">Single step</h2>
<p>Here, the definition of single step reduction of the parallel reduction.</p>
<pre class="Agda"><a id="6744" class="Keyword">infix</a> <a id="6750" class="Number">2</a> <a id="6752" href="add-small-step-reduction.html#6762" class="Datatype Operator">_⇛_</a>

<a id="6757" class="Keyword">data</a> <a id="_⇛_"></a><a id="6762" href="add-small-step-reduction.html#6762" class="Datatype Operator">_⇛_</a> <a id="6766" class="Symbol">:</a> <a id="6768" href="add-small-step-reduction.html#665" class="Datatype">Expr</a> <a id="6773" class="Symbol">→</a> <a id="6775" href="add-small-step-reduction.html#665" class="Datatype">Expr</a> <a id="6780" class="Symbol">→</a> <a id="6782" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="6786" class="Keyword">where</a>
  <a id="_⇛_.pnat"></a><a id="6794" href="add-small-step-reduction.html#6794" class="InductiveConstructor">pnat</a> <a id="6799" class="Symbol">:</a> <a id="6801" class="Symbol">∀</a> <a id="6803" class="Symbol">{</a><a id="6804" href="add-small-step-reduction.html#6804" class="Bound">x</a><a id="6805" class="Symbol">}</a>
      <a id="6813" class="Comment">-----------------</a>
    <a id="6835" class="Symbol">→</a> <a id="6837" href="add-small-step-reduction.html#684" class="InductiveConstructor">nat</a> <a id="6841" href="add-small-step-reduction.html#6804" class="Bound">x</a> <a id="6843" href="add-small-step-reduction.html#6762" class="Datatype Operator">⇛</a> <a id="6845" href="add-small-step-reduction.html#684" class="InductiveConstructor">nat</a> <a id="6849" href="add-small-step-reduction.html#6804" class="Bound">x</a>

  <a id="_⇛_.papp"></a><a id="6854" href="add-small-step-reduction.html#6854" class="InductiveConstructor">papp</a> <a id="6859" class="Symbol">:</a> <a id="6861" class="Symbol">∀</a> <a id="6863" class="Symbol">{</a><a id="6864" href="add-small-step-reduction.html#6864" class="Bound">L</a> <a id="6866" href="add-small-step-reduction.html#6866" class="Bound">L′</a> <a id="6869" href="add-small-step-reduction.html#6869" class="Bound">M</a> <a id="6871" href="add-small-step-reduction.html#6871" class="Bound">M′</a><a id="6873" class="Symbol">}</a>
    <a id="6879" class="Symbol">→</a> <a id="6881" href="add-small-step-reduction.html#6864" class="Bound">L</a> <a id="6883" href="add-small-step-reduction.html#6762" class="Datatype Operator">⇛</a> <a id="6885" href="add-small-step-reduction.html#6866" class="Bound">L′</a>
    <a id="6892" class="Symbol">→</a> <a id="6894" href="add-small-step-reduction.html#6869" class="Bound">M</a> <a id="6896" href="add-small-step-reduction.html#6762" class="Datatype Operator">⇛</a> <a id="6898" href="add-small-step-reduction.html#6871" class="Bound">M′</a>
      <a id="6907" class="Comment">---------------</a>
    <a id="6927" class="Symbol">→</a> <a id="6929" href="add-small-step-reduction.html#6864" class="Bound">L</a> <a id="6931" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="6933" href="add-small-step-reduction.html#6869" class="Bound">M</a> <a id="6935" href="add-small-step-reduction.html#6762" class="Datatype Operator">⇛</a> <a id="6937" href="add-small-step-reduction.html#6866" class="Bound">L′</a> <a id="6940" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="6942" href="add-small-step-reduction.html#6871" class="Bound">M′</a>

  <a id="_⇛_.pzero"></a><a id="6948" href="add-small-step-reduction.html#6948" class="InductiveConstructor">pzero</a> <a id="6954" class="Symbol">:</a> <a id="6956" class="Symbol">∀</a> <a id="6958" class="Symbol">{</a><a id="6959" href="add-small-step-reduction.html#6959" class="Bound">N</a><a id="6960" class="Symbol">}</a>
    <a id="6966" class="Symbol">→</a> <a id="6968" href="add-small-step-reduction.html#684" class="InductiveConstructor">nat</a> <a id="6972" class="Number">0</a> <a id="6974" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="6976" href="add-small-step-reduction.html#6959" class="Bound">N</a> <a id="6978" href="add-small-step-reduction.html#6762" class="Datatype Operator">⇛</a> <a id="6980" href="add-small-step-reduction.html#6959" class="Bound">N</a>

  <a id="_⇛_.padd"></a><a id="6985" href="add-small-step-reduction.html#6985" class="InductiveConstructor">padd</a> <a id="6990" class="Symbol">:</a> <a id="6992" class="Symbol">∀</a> <a id="6994" class="Symbol">{</a><a id="6995" href="add-small-step-reduction.html#6995" class="Bound">m</a> <a id="6997" href="add-small-step-reduction.html#6997" class="Bound">n</a><a id="6998" class="Symbol">}</a>
    <a id="7004" class="Symbol">→</a> <a id="7006" href="add-small-step-reduction.html#684" class="InductiveConstructor">nat</a> <a id="7010" class="Symbol">(</a><a id="7011" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="7015" href="add-small-step-reduction.html#6995" class="Bound">m</a><a id="7016" class="Symbol">)</a> <a id="7018" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="7020" href="add-small-step-reduction.html#684" class="InductiveConstructor">nat</a> <a id="7024" href="add-small-step-reduction.html#6997" class="Bound">n</a> <a id="7026" href="add-small-step-reduction.html#6762" class="Datatype Operator">⇛</a> <a id="7028" href="add-small-step-reduction.html#684" class="InductiveConstructor">nat</a> <a id="7032" href="add-small-step-reduction.html#6995" class="Bound">m</a> <a id="7034" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="7036" href="add-small-step-reduction.html#684" class="InductiveConstructor">nat</a> <a id="7040" class="Symbol">(</a><a id="7041" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="7045" href="add-small-step-reduction.html#6997" class="Bound">n</a><a id="7046" class="Symbol">)</a>
</pre>
<p>The biggest difference of this reduction is <code>papp</code>, that do two reductions at the same time. It can run faster in a multi core computer.</p>
<h2 id="multi-step-1">Multi step</h2>
<p>The sequences of parallel reduction will be defined in this way:</p>
<pre class="Agda"><a id="7276" class="Keyword">infix</a>  <a id="7283" class="Number">2</a> <a id="7285" href="add-small-step-reduction.html#7325" class="Datatype Operator">_⇛*_</a>
<a id="7290" class="Keyword">infixr</a> <a id="7297" class="Number">2</a> <a id="7299" href="add-small-step-reduction.html#7399" class="InductiveConstructor Operator">_⇛⟨_⟩_</a>
<a id="7306" class="Keyword">infix</a>  <a id="7313" class="Number">3</a> <a id="7315" href="add-small-step-reduction.html#7358" class="InductiveConstructor Operator">_∎₂</a>

<a id="7320" class="Keyword">data</a> <a id="_⇛*_"></a><a id="7325" href="add-small-step-reduction.html#7325" class="Datatype Operator">_⇛*_</a> <a id="7330" class="Symbol">:</a> <a id="7332" href="add-small-step-reduction.html#665" class="Datatype">Expr</a> <a id="7337" class="Symbol">→</a> <a id="7339" href="add-small-step-reduction.html#665" class="Datatype">Expr</a> <a id="7344" class="Symbol">→</a> <a id="7346" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="7350" class="Keyword">where</a>
  <a id="_⇛*_._∎₂"></a><a id="7358" href="add-small-step-reduction.html#7358" class="InductiveConstructor Operator">_∎₂</a> <a id="7362" class="Symbol">:</a> <a id="7364" class="Symbol">∀</a> <a id="7366" href="add-small-step-reduction.html#7366" class="Bound">M</a>
      <a id="7374" class="Comment">--------</a>
    <a id="7387" class="Symbol">→</a> <a id="7389" href="add-small-step-reduction.html#7366" class="Bound">M</a> <a id="7391" href="add-small-step-reduction.html#7325" class="Datatype Operator">⇛*</a> <a id="7394" href="add-small-step-reduction.html#7366" class="Bound">M</a>

  <a id="_⇛*_._⇛⟨_⟩_"></a><a id="7399" href="add-small-step-reduction.html#7399" class="InductiveConstructor Operator">_⇛⟨_⟩_</a> <a id="7406" class="Symbol">:</a> <a id="7408" class="Symbol">∀</a> <a id="7410" href="add-small-step-reduction.html#7410" class="Bound">L</a> <a id="7412" class="Symbol">{</a><a id="7413" href="add-small-step-reduction.html#7413" class="Bound">M</a> <a id="7415" href="add-small-step-reduction.html#7415" class="Bound">N</a><a id="7416" class="Symbol">}</a>
    <a id="7422" class="Symbol">→</a> <a id="7424" href="add-small-step-reduction.html#7410" class="Bound">L</a> <a id="7426" href="add-small-step-reduction.html#6762" class="Datatype Operator">⇛</a> <a id="7428" href="add-small-step-reduction.html#7413" class="Bound">M</a>
    <a id="7434" class="Symbol">→</a> <a id="7436" href="add-small-step-reduction.html#7413" class="Bound">M</a> <a id="7438" href="add-small-step-reduction.html#7325" class="Datatype Operator">⇛*</a> <a id="7441" href="add-small-step-reduction.html#7415" class="Bound">N</a>
      <a id="7449" class="Comment">---------</a>
    <a id="7463" class="Symbol">→</a> <a id="7465" href="add-small-step-reduction.html#7410" class="Bound">L</a> <a id="7467" href="add-small-step-reduction.html#7325" class="Datatype Operator">⇛*</a> <a id="7470" href="add-small-step-reduction.html#7415" class="Bound">N</a>
</pre>
<h2 id="theorems-for-latter-use">Theorems for latter use</h2>
<p>Some theorems to use latter:</p>
<pre class="Agda"><a id="par-refl"></a><a id="7539" href="add-small-step-reduction.html#7539" class="Function">par-refl</a> <a id="7548" class="Symbol">:</a> <a id="7550" class="Symbol">∀</a> <a id="7552" class="Symbol">{</a><a id="7553" href="add-small-step-reduction.html#7553" class="Bound">M</a><a id="7554" class="Symbol">}</a> <a id="7556" class="Symbol">→</a> <a id="7558" href="add-small-step-reduction.html#7553" class="Bound">M</a> <a id="7560" href="add-small-step-reduction.html#6762" class="Datatype Operator">⇛</a> <a id="7562" href="add-small-step-reduction.html#7553" class="Bound">M</a>
<a id="7564" href="add-small-step-reduction.html#7539" class="Function">par-refl</a> <a id="7573" class="Symbol">{</a><a id="7574" href="add-small-step-reduction.html#684" class="InductiveConstructor">nat</a> <a id="7578" class="Symbol">_}</a> <a id="7581" class="Symbol">=</a> <a id="7583" href="add-small-step-reduction.html#6794" class="InductiveConstructor">pnat</a>
<a id="7588" href="add-small-step-reduction.html#7539" class="Function">par-refl</a> <a id="7597" class="Symbol">{_</a> <a id="7600" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="7602" class="Symbol">_}</a> <a id="7605" class="Symbol">=</a> <a id="7607" href="add-small-step-reduction.html#6854" class="InductiveConstructor">papp</a> <a id="7612" href="add-small-step-reduction.html#7539" class="Function">par-refl</a> <a id="7621" href="add-small-step-reduction.html#7539" class="Function">par-refl</a>

<a id="beta-par"></a><a id="7631" href="add-small-step-reduction.html#7631" class="Function">beta-par</a> <a id="7640" class="Symbol">:</a> <a id="7642" class="Symbol">∀</a> <a id="7644" class="Symbol">{</a><a id="7645" href="add-small-step-reduction.html#7645" class="Bound">M</a> <a id="7647" href="add-small-step-reduction.html#7647" class="Bound">N</a><a id="7648" class="Symbol">}</a>
  <a id="7652" class="Symbol">→</a> <a id="7654" href="add-small-step-reduction.html#7645" class="Bound">M</a> <a id="7656" href="add-small-step-reduction.html#1047" class="Datatype Operator">—→</a> <a id="7659" href="add-small-step-reduction.html#7647" class="Bound">N</a>
    <a id="7665" class="Comment">------</a>
  <a id="7674" class="Symbol">→</a> <a id="7676" href="add-small-step-reduction.html#7645" class="Bound">M</a> <a id="7678" href="add-small-step-reduction.html#6762" class="Datatype Operator">⇛</a> <a id="7680" href="add-small-step-reduction.html#7647" class="Bound">N</a>
<a id="7682" href="add-small-step-reduction.html#7631" class="Function">beta-par</a> <a id="7691" href="add-small-step-reduction.html#1202" class="InductiveConstructor">ϕ0</a> <a id="7694" class="Symbol">=</a> <a id="7696" href="add-small-step-reduction.html#6948" class="InductiveConstructor">pzero</a>
<a id="7702" href="add-small-step-reduction.html#7631" class="Function">beta-par</a> <a id="7711" href="add-small-step-reduction.html#1240" class="InductiveConstructor">ϕ+</a> <a id="7714" class="Symbol">=</a> <a id="7716" href="add-small-step-reduction.html#6985" class="InductiveConstructor">padd</a>
<a id="7721" href="add-small-step-reduction.html#7631" class="Function">beta-par</a> <a id="7730" class="Symbol">(</a><a id="7731" href="add-small-step-reduction.html#1080" class="InductiveConstructor">ξ₁</a> <a id="7734" href="add-small-step-reduction.html#7734" class="Bound">st</a><a id="7736" class="Symbol">)</a> <a id="7738" class="Symbol">=</a> <a id="7740" href="add-small-step-reduction.html#6854" class="InductiveConstructor">papp</a> <a id="7745" class="Symbol">(</a><a id="7746" href="add-small-step-reduction.html#7631" class="Function">beta-par</a> <a id="7755" href="add-small-step-reduction.html#7734" class="Bound">st</a><a id="7757" class="Symbol">)</a> <a id="7759" href="add-small-step-reduction.html#7539" class="Function">par-refl</a>
<a id="7768" href="add-small-step-reduction.html#7631" class="Function">beta-par</a> <a id="7777" class="Symbol">(</a><a id="7778" href="add-small-step-reduction.html#1134" class="InductiveConstructor">ξ₂</a> <a id="7781" href="add-small-step-reduction.html#7781" class="Bound">vl</a> <a id="7784" href="add-small-step-reduction.html#7784" class="Bound">st</a><a id="7786" class="Symbol">)</a> <a id="7788" class="Symbol">=</a> <a id="7790" href="add-small-step-reduction.html#6854" class="InductiveConstructor">papp</a> <a id="7795" href="add-small-step-reduction.html#7539" class="Function">par-refl</a> <a id="7804" class="Symbol">(</a><a id="7805" href="add-small-step-reduction.html#7631" class="Function">beta-par</a> <a id="7814" href="add-small-step-reduction.html#7784" class="Bound">st</a><a id="7816" class="Symbol">)</a>

<a id="par-nat"></a><a id="7819" href="add-small-step-reduction.html#7819" class="Function">par-nat</a> <a id="7827" class="Symbol">:</a> <a id="7829" class="Symbol">∀</a> <a id="7831" class="Symbol">{</a><a id="7832" href="add-small-step-reduction.html#7832" class="Bound">x</a> <a id="7834" href="add-small-step-reduction.html#7834" class="Bound">M</a><a id="7835" class="Symbol">}</a>
  <a id="7839" class="Symbol">→</a> <a id="7841" class="InductiveConstructor">nat</a> <a id="7845" href="add-small-step-reduction.html#7832" class="Bound">x</a> <a id="7847" href="add-small-step-reduction.html#6762" class="Datatype Operator">⇛</a> <a id="7849" href="add-small-step-reduction.html#7834" class="Bound">M</a>
  <a id="7853" class="Symbol">→</a> <a id="7855" href="add-small-step-reduction.html#7834" class="Bound">M</a> <a id="7857" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="7859" class="InductiveConstructor">nat</a> <a id="7863" href="add-small-step-reduction.html#7832" class="Bound">x</a>
<a id="7865" href="add-small-step-reduction.html#7819" class="Function">par-nat</a> <a id="7873" href="add-small-step-reduction.html#6794" class="InductiveConstructor">pnat</a> <a id="7878" class="Symbol">=</a> <a id="7880" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
</pre>
<h2 id="progress-1">Progress</h2>
<p>I will define progress in the same way that I defined previouly. It will be used to prove that an expression is already a value or there will be a step to reduce.</p>
<pre class="Agda"><a id="8071" class="Keyword">data</a> <a id="Progress⇛"></a><a id="8076" href="add-small-step-reduction.html#8076" class="Datatype">Progress⇛</a> <a id="8086" class="Symbol">(</a><a id="8087" href="add-small-step-reduction.html#8087" class="Bound">M</a> <a id="8089" class="Symbol">:</a> <a id="8091" href="add-small-step-reduction.html#665" class="Datatype">Expr</a><a id="8095" class="Symbol">)</a> <a id="8097" class="Symbol">:</a> <a id="8099" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="8103" class="Keyword">where</a>
  <a id="Progress⇛.step"></a><a id="8111" href="add-small-step-reduction.html#8111" class="InductiveConstructor">step</a> <a id="8116" class="Symbol">:</a> <a id="8118" class="Symbol">∀</a> <a id="8120" class="Symbol">{</a><a id="8121" href="add-small-step-reduction.html#8121" class="Bound">N</a><a id="8122" class="Symbol">}</a>
    <a id="8128" class="Symbol">→</a> <a id="8130" href="add-small-step-reduction.html#8087" class="Bound">M</a> <a id="8132" href="add-small-step-reduction.html#6762" class="Datatype Operator">⇛</a> <a id="8134" href="add-small-step-reduction.html#8121" class="Bound">N</a>
      <a id="8142" class="Comment">----------</a>
    <a id="8157" class="Symbol">→</a> <a id="8159" href="add-small-step-reduction.html#8076" class="Datatype">Progress⇛</a> <a id="8169" href="add-small-step-reduction.html#8087" class="Bound">M</a>

  <a id="Progress⇛.done"></a><a id="8174" href="add-small-step-reduction.html#8174" class="InductiveConstructor">done</a> <a id="8179" class="Symbol">:</a>
      <a id="8187" href="add-small-step-reduction.html#848" class="Datatype">Value</a> <a id="8193" href="add-small-step-reduction.html#8087" class="Bound">M</a>
      <a id="8201" class="Comment">----------</a>
    <a id="8216" class="Symbol">→</a> <a id="8218" href="add-small-step-reduction.html#8076" class="Datatype">Progress⇛</a> <a id="8228" href="add-small-step-reduction.html#8087" class="Bound">M</a>

<a id="progress⇛"></a><a id="8231" href="add-small-step-reduction.html#8231" class="Function">progress⇛</a> <a id="8241" class="Symbol">:</a> <a id="8243" class="Symbol">∀</a> <a id="8245" href="add-small-step-reduction.html#8245" class="Bound">M</a> <a id="8247" class="Symbol">→</a> <a id="8249" href="add-small-step-reduction.html#8076" class="Datatype">Progress⇛</a> <a id="8259" href="add-small-step-reduction.html#8245" class="Bound">M</a>
<a id="8261" href="add-small-step-reduction.html#8231" class="Function">progress⇛</a> <a id="8271" class="Symbol">(</a><a id="8272" href="add-small-step-reduction.html#684" class="InductiveConstructor">nat</a> <a id="8276" href="add-small-step-reduction.html#8276" class="Bound">x</a><a id="8277" class="Symbol">)</a> <a id="8279" class="Symbol">=</a> <a id="8281" href="add-small-step-reduction.html#8174" class="InductiveConstructor">done</a> <a id="8286" class="Symbol">(</a><a id="8287" href="add-small-step-reduction.html#875" class="InductiveConstructor">nat</a> <a id="8291" href="add-small-step-reduction.html#8276" class="Bound">x</a><a id="8292" class="Symbol">)</a>
<a id="8294" href="add-small-step-reduction.html#8231" class="Function">progress⇛</a> <a id="8304" class="Symbol">(</a><a id="8305" href="add-small-step-reduction.html#8305" class="Bound">M</a> <a id="8307" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="8309" href="add-small-step-reduction.html#8309" class="Bound">N</a><a id="8310" class="Symbol">)</a> <a id="8312" class="Keyword">with</a> <a id="8317" href="add-small-step-reduction.html#8231" class="Function">progress⇛</a> <a id="8327" href="add-small-step-reduction.html#8305" class="Bound">M</a>
<a id="8329" class="Symbol">...</a> <a id="8333" class="Symbol">|</a> <a id="8335" href="add-small-step-reduction.html#8111" class="InductiveConstructor">step</a> <a id="8340" href="add-small-step-reduction.html#8340" class="Bound">st</a> <a id="8343" class="Symbol">=</a> <a id="8345" href="add-small-step-reduction.html#8111" class="InductiveConstructor">step</a> <a id="8350" class="Symbol">(</a><a id="8351" href="add-small-step-reduction.html#6854" class="InductiveConstructor">papp</a> <a id="8356" href="add-small-step-reduction.html#8340" class="Bound">st</a> <a id="8359" href="add-small-step-reduction.html#7539" class="Function">par-refl</a><a id="8367" class="Symbol">)</a>
<a id="8369" class="Symbol">...</a> <a id="8373" class="Symbol">|</a> <a id="8375" href="add-small-step-reduction.html#8174" class="InductiveConstructor">done</a> <a id="8380" class="Symbol">(</a><a id="8381" href="add-small-step-reduction.html#875" class="InductiveConstructor">nat</a> <a id="8385" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a><a id="8389" class="Symbol">)</a> <a id="8391" class="Symbol">=</a> <a id="8393" href="add-small-step-reduction.html#8111" class="InductiveConstructor">step</a> <a id="8398" href="add-small-step-reduction.html#6948" class="InductiveConstructor">pzero</a>
<a id="8404" class="Symbol">...</a> <a id="8408" class="Symbol">|</a> <a id="8410" href="add-small-step-reduction.html#8174" class="InductiveConstructor">done</a> <a id="8415" class="Symbol">(</a><a id="8416" href="add-small-step-reduction.html#875" class="InductiveConstructor">nat</a> <a id="8420" class="Symbol">(</a><a id="8421" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="8425" class="Symbol">_))</a> <a id="8429" class="Keyword">with</a> <a id="8434" href="add-small-step-reduction.html#8231" class="Function">progress⇛</a> <a id="8444" class="Bound">N</a>
<a id="8446" class="Symbol">...</a>   <a id="8452" class="Symbol">|</a> <a id="8454" href="add-small-step-reduction.html#8111" class="InductiveConstructor">step</a> <a id="8459" href="add-small-step-reduction.html#8459" class="Bound">st</a> <a id="8462" class="Symbol">=</a> <a id="8464" href="add-small-step-reduction.html#8111" class="InductiveConstructor">step</a> <a id="8469" class="Symbol">(</a><a id="8470" href="add-small-step-reduction.html#6854" class="InductiveConstructor">papp</a> <a id="8475" href="add-small-step-reduction.html#6794" class="InductiveConstructor">pnat</a> <a id="8480" href="add-small-step-reduction.html#8459" class="Bound">st</a><a id="8482" class="Symbol">)</a>
<a id="8484" class="Symbol">...</a>   <a id="8490" class="Symbol">|</a> <a id="8492" href="add-small-step-reduction.html#8174" class="InductiveConstructor">done</a> <a id="8497" class="Symbol">(</a><a id="8498" href="add-small-step-reduction.html#875" class="InductiveConstructor">nat</a> <a id="8502" class="Symbol">_)</a> <a id="8505" class="Symbol">=</a> <a id="8507" href="add-small-step-reduction.html#8111" class="InductiveConstructor">step</a> <a id="8512" href="add-small-step-reduction.html#6985" class="InductiveConstructor">padd</a>
</pre>
    </section>
</article>

        </main>

        <footer>
            Site proudly generated by
            <a style="color:yellow;" href="http://jaspervdj.be/hakyll">Hakyll</a> with
            <a style="color:yellow;" href="https://github.com/guilhermehas/guilhermehas.github.io">source code</a>
        </footer>
    </body>
</html>
