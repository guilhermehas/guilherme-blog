<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Guilherme Silva Blog - Using small step reduction in addition</title>
        <link rel="stylesheet" href="../css/default.css" />
        <link rel="stylesheet" href="Agda.css" />
    </head>
    <body>
        <header>
            <div class="logo">
                <a href="../">Guilherme Silva</a>
            </div>
            <nav>
                <a href="../">Home</a>
                <a href="../archive.html">Archive</a>
            </nav>
        </header>

        <main role="main">
            <h1>Using small step reduction in addition</h1>
            <article>
    <section class="header">
        Posted on August 28, 2021
        
            by Guilherme
        
    </section>
    <section>
        <h1 id="motivation">Motivation</h1>
<p>The objective of this project is to do a minimalistic example of small step semantics using the concepts of the book <a href="https://plfa.github.io/">Programming Language Foundations in Agda</a>.</p>
<h1 id="imports">Imports</h1>
<p>Importing from <a href="https://github.com/agda/agda-stdlib">Agda standard library</a>.</p>
<pre class="Agda"><a id="385" class="Keyword">open</a> <a id="390" class="Keyword">import</a> <a id="397" href="Data.Nat.html" class="Module">Data.Nat</a> <a id="406" class="Keyword">hiding</a> <a id="413" class="Symbol">(</a><a id="414" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">_+_</a><a id="417" class="Symbol">)</a>
<a id="419" class="Keyword">open</a> <a id="424" class="Keyword">import</a> <a id="431" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>
<a id="469" class="Keyword">open</a> <a id="474" class="Keyword">import</a> <a id="481" href="Data.Product.html" class="Module">Data.Product</a> <a id="494" class="Keyword">renaming</a> <a id="503" class="Symbol">(</a><a id="504" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">_,_</a> <a id="508" class="Symbol">to</a> <a id="511" class="InductiveConstructor Operator">⟨_,_⟩</a><a id="516" class="Symbol">)</a>
</pre>
<h1 id="defining-the-language">Defining the language</h1>
<p>The language is a simple expression that can be a natural number or a sum of two expressions.</p>
<pre class="Agda"><a id="647" class="Keyword">infixr</a> <a id="654" class="Number">6</a> <a id="656" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">_+_</a>
<a id="660" class="Keyword">data</a> <a id="Expr"></a><a id="665" href="add-small-step-reduction.html#665" class="Datatype">Expr</a> <a id="670" class="Symbol">:</a> <a id="672" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="676" class="Keyword">where</a>
  <a id="Expr.nat"></a><a id="684" href="add-small-step-reduction.html#684" class="InductiveConstructor">nat</a> <a id="688" class="Symbol">:</a> <a id="690" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="692" class="Symbol">→</a> <a id="694" href="add-small-step-reduction.html#665" class="Datatype">Expr</a>
  <a id="Expr._+_"></a><a id="701" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">_+_</a> <a id="705" class="Symbol">:</a> <a id="707" href="add-small-step-reduction.html#665" class="Datatype">Expr</a> <a id="712" class="Symbol">→</a> <a id="714" href="add-small-step-reduction.html#665" class="Datatype">Expr</a> <a id="719" class="Symbol">→</a> <a id="721" href="add-small-step-reduction.html#665" class="Datatype">Expr</a>
</pre>
<h2 id="values">Values</h2>
<p>Value represents its normal form. It is the final answer when the expression is fully evaluated.</p>
<pre class="Agda"><a id="844" class="Keyword">data</a> <a id="Value"></a><a id="849" href="add-small-step-reduction.html#849" class="Datatype">Value</a> <a id="855" class="Symbol">:</a> <a id="857" href="add-small-step-reduction.html#665" class="Datatype">Expr</a> <a id="862" class="Symbol">→</a> <a id="864" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="868" class="Keyword">where</a>
  <a id="Value.nat"></a><a id="876" href="add-small-step-reduction.html#876" class="InductiveConstructor">nat</a>  <a id="881" class="Symbol">:</a> <a id="883" class="Symbol">∀</a> <a id="885" href="add-small-step-reduction.html#885" class="Bound">x</a>
      <a id="893" class="Comment">-------------</a>
    <a id="911" class="Symbol">→</a> <a id="913" href="add-small-step-reduction.html#849" class="Datatype">Value</a> <a id="919" class="Symbol">(</a><a id="920" href="add-small-step-reduction.html#684" class="InductiveConstructor">nat</a> <a id="924" href="add-small-step-reduction.html#885" class="Bound">x</a><a id="925" class="Symbol">)</a>
</pre>
<h1 id="small-step">Small Step</h1>
<p>Now, it will be defined the small step semantic of this programming language:</p>
<pre class="Agda"><a id="1029" class="Keyword">infixr</a> <a id="1036" class="Number">2</a> <a id="1038" href="add-small-step-reduction.html#1048" class="Datatype Operator">_—→_</a>
<a id="1043" class="Keyword">data</a> <a id="_—→_"></a><a id="1048" href="add-small-step-reduction.html#1048" class="Datatype Operator">_—→_</a> <a id="1053" class="Symbol">:</a> <a id="1055" href="add-small-step-reduction.html#665" class="Datatype">Expr</a> <a id="1060" class="Symbol">→</a> <a id="1062" href="add-small-step-reduction.html#665" class="Datatype">Expr</a> <a id="1067" class="Symbol">→</a> <a id="1069" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1073" class="Keyword">where</a>
  <a id="_—→_.ξ₁"></a><a id="1081" href="add-small-step-reduction.html#1081" class="InductiveConstructor">ξ₁</a> <a id="1084" class="Symbol">:</a> <a id="1086" class="Symbol">∀</a> <a id="1088" class="Symbol">{</a><a id="1089" href="add-small-step-reduction.html#1089" class="Bound">m</a> <a id="1091" href="add-small-step-reduction.html#1091" class="Bound">m'</a> <a id="1094" href="add-small-step-reduction.html#1094" class="Bound">n</a><a id="1095" class="Symbol">}</a>
    <a id="1101" class="Symbol">→</a> <a id="1103" href="add-small-step-reduction.html#1089" class="Bound">m</a> <a id="1105" href="add-small-step-reduction.html#1048" class="Datatype Operator">—→</a> <a id="1108" href="add-small-step-reduction.html#1091" class="Bound">m'</a>
    <a id="1115" class="Symbol">→</a> <a id="1117" href="add-small-step-reduction.html#1089" class="Bound">m</a> <a id="1119" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="1121" href="add-small-step-reduction.html#1094" class="Bound">n</a> <a id="1123" href="add-small-step-reduction.html#1048" class="Datatype Operator">—→</a> <a id="1126" href="add-small-step-reduction.html#1091" class="Bound">m'</a> <a id="1129" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="1131" href="add-small-step-reduction.html#1094" class="Bound">n</a>
  <a id="_—→_.ξ₂"></a><a id="1135" href="add-small-step-reduction.html#1135" class="InductiveConstructor">ξ₂</a> <a id="1138" class="Symbol">:</a> <a id="1140" class="Symbol">∀</a> <a id="1142" class="Symbol">{</a><a id="1143" href="add-small-step-reduction.html#1143" class="Bound">m</a> <a id="1145" href="add-small-step-reduction.html#1145" class="Bound">n</a> <a id="1147" href="add-small-step-reduction.html#1147" class="Bound">n'</a><a id="1149" class="Symbol">}</a>
    <a id="1155" class="Symbol">→</a> <a id="1157" href="add-small-step-reduction.html#849" class="Datatype">Value</a> <a id="1163" href="add-small-step-reduction.html#1143" class="Bound">m</a>
    <a id="1169" class="Symbol">→</a> <a id="1171" href="add-small-step-reduction.html#1145" class="Bound">n</a> <a id="1173" href="add-small-step-reduction.html#1048" class="Datatype Operator">—→</a> <a id="1176" href="add-small-step-reduction.html#1147" class="Bound">n'</a>
    <a id="1183" class="Symbol">→</a> <a id="1185" href="add-small-step-reduction.html#1143" class="Bound">m</a> <a id="1187" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="1189" href="add-small-step-reduction.html#1145" class="Bound">n</a> <a id="1191" href="add-small-step-reduction.html#1048" class="Datatype Operator">—→</a> <a id="1194" href="add-small-step-reduction.html#1143" class="Bound">m</a> <a id="1196" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="1198" href="add-small-step-reduction.html#1147" class="Bound">n'</a>
  <a id="_—→_.ϕ0"></a><a id="1203" href="add-small-step-reduction.html#1203" class="InductiveConstructor">ϕ0</a> <a id="1206" class="Symbol">:</a> <a id="1208" class="Symbol">∀</a> <a id="1210" class="Symbol">{</a><a id="1211" href="add-small-step-reduction.html#1211" class="Bound">n</a><a id="1212" class="Symbol">}</a> <a id="1214" class="Symbol">→</a> <a id="1216" href="add-small-step-reduction.html#684" class="InductiveConstructor">nat</a> <a id="1220" class="Number">0</a> <a id="1222" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="1224" href="add-small-step-reduction.html#684" class="InductiveConstructor">nat</a> <a id="1228" href="add-small-step-reduction.html#1211" class="Bound">n</a> <a id="1230" href="add-small-step-reduction.html#1048" class="Datatype Operator">—→</a> <a id="1233" href="add-small-step-reduction.html#684" class="InductiveConstructor">nat</a> <a id="1237" href="add-small-step-reduction.html#1211" class="Bound">n</a>
  <a id="_—→_.ϕ+"></a><a id="1241" href="add-small-step-reduction.html#1241" class="InductiveConstructor">ϕ+</a> <a id="1244" class="Symbol">:</a> <a id="1246" class="Symbol">∀</a> <a id="1248" class="Symbol">{</a><a id="1249" href="add-small-step-reduction.html#1249" class="Bound">m</a> <a id="1251" href="add-small-step-reduction.html#1251" class="Bound">n</a><a id="1252" class="Symbol">}</a> <a id="1254" class="Symbol">→</a> <a id="1256" href="add-small-step-reduction.html#684" class="InductiveConstructor">nat</a> <a id="1260" class="Symbol">(</a><a id="1261" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="1265" href="add-small-step-reduction.html#1249" class="Bound">m</a><a id="1266" class="Symbol">)</a> <a id="1268" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="1270" href="add-small-step-reduction.html#684" class="InductiveConstructor">nat</a> <a id="1274" href="add-small-step-reduction.html#1251" class="Bound">n</a> <a id="1276" href="add-small-step-reduction.html#1048" class="Datatype Operator">—→</a> <a id="1279" href="add-small-step-reduction.html#684" class="InductiveConstructor">nat</a> <a id="1283" href="add-small-step-reduction.html#1249" class="Bound">m</a> <a id="1285" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="1287" href="add-small-step-reduction.html#684" class="InductiveConstructor">nat</a> <a id="1291" class="Symbol">(</a><a id="1292" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="1296" href="add-small-step-reduction.html#1251" class="Bound">n</a><a id="1297" class="Symbol">)</a>

<a id="1300" href="add-small-step-reduction.html#1300" class="Function">_</a> <a id="1302" class="Symbol">:</a> <a id="1304" class="InductiveConstructor">nat</a> <a id="1308" class="Number">0</a> <a id="1310" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="1312" class="InductiveConstructor">nat</a> <a id="1316" class="Number">0</a> <a id="1318" href="add-small-step-reduction.html#1048" class="Datatype Operator">—→</a> <a id="1321" class="InductiveConstructor">nat</a> <a id="1325" class="Number">0</a>
<a id="1327" class="Symbol">_</a> <a id="1329" class="Symbol">=</a> <a id="1331" href="add-small-step-reduction.html#1203" class="InductiveConstructor">ϕ0</a>
</pre>
<p>The first two steps are reduction of some part of the addition. <code>ϕ0</code> is related to the reduction when the left part is zero. <code>ϕ+</code> is the reduction when the left part is the successor of a natural number. The definitions of <code>ϕ0</code> and <code>ϕ+</code> look like the induction definition of addition. While <code>ξ₁</code> and <code>ξ₂</code> are extra steps.</p>
<h2 id="deterministic">Deterministic</h2>
<p>With determinism, it is only possible to have one step of reduction. If there are two, both reduce to the same expression.</p>
<pre class="Agda"><a id="deterministic"></a><a id="1810" href="add-small-step-reduction.html#1810" class="Function">deterministic</a> <a id="1824" class="Symbol">:</a> <a id="1826" class="Symbol">∀</a> <a id="1828" class="Symbol">{</a><a id="1829" href="add-small-step-reduction.html#1829" class="Bound">L</a> <a id="1831" href="add-small-step-reduction.html#1831" class="Bound">M</a> <a id="1833" href="add-small-step-reduction.html#1833" class="Bound">N</a><a id="1834" class="Symbol">}</a>
  <a id="1838" class="Symbol">→</a> <a id="1840" href="add-small-step-reduction.html#1829" class="Bound">L</a> <a id="1842" href="add-small-step-reduction.html#1048" class="Datatype Operator">—→</a> <a id="1845" href="add-small-step-reduction.html#1831" class="Bound">M</a>
  <a id="1849" class="Symbol">→</a> <a id="1851" href="add-small-step-reduction.html#1829" class="Bound">L</a> <a id="1853" href="add-small-step-reduction.html#1048" class="Datatype Operator">—→</a> <a id="1856" href="add-small-step-reduction.html#1833" class="Bound">N</a>
      <a id="1864" class="Comment">------</a>
  <a id="1873" class="Symbol">→</a> <a id="1875" href="add-small-step-reduction.html#1831" class="Bound">M</a> <a id="1877" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="1879" href="add-small-step-reduction.html#1833" class="Bound">N</a>
<a id="1881" href="add-small-step-reduction.html#1810" class="Function">deterministic</a> <a id="1895" href="add-small-step-reduction.html#1203" class="InductiveConstructor">ϕ0</a> <a id="1898" href="add-small-step-reduction.html#1203" class="InductiveConstructor">ϕ0</a> <a id="1901" class="Symbol">=</a> <a id="1903" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="1908" href="add-small-step-reduction.html#1810" class="Function">deterministic</a> <a id="1922" href="add-small-step-reduction.html#1241" class="InductiveConstructor">ϕ+</a> <a id="1925" href="add-small-step-reduction.html#1241" class="InductiveConstructor">ϕ+</a> <a id="1928" class="Symbol">=</a> <a id="1930" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="1935" href="add-small-step-reduction.html#1810" class="Function">deterministic</a> <a id="1949" class="Symbol">(</a><a id="1950" href="add-small-step-reduction.html#1081" class="InductiveConstructor">ξ₁</a> <a id="1953" href="add-small-step-reduction.html#1953" class="Bound">LM</a><a id="1955" class="Symbol">)</a> <a id="1957" class="Symbol">(</a><a id="1958" href="add-small-step-reduction.html#1081" class="InductiveConstructor">ξ₁</a> <a id="1961" href="add-small-step-reduction.html#1961" class="Bound">LN</a><a id="1963" class="Symbol">)</a> <a id="1965" class="Keyword">with</a> <a id="1970" href="add-small-step-reduction.html#1810" class="Function">deterministic</a> <a id="1984" href="add-small-step-reduction.html#1953" class="Bound">LM</a> <a id="1987" href="add-small-step-reduction.html#1961" class="Bound">LN</a>
<a id="1990" class="Symbol">...</a> <a id="1994" class="Symbol">|</a> <a id="1996" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="2001" class="Symbol">=</a> <a id="2003" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
<a id="2008" href="add-small-step-reduction.html#1810" class="Function">deterministic</a> <a id="2022" class="Symbol">(</a><a id="2023" href="add-small-step-reduction.html#1081" class="InductiveConstructor">ξ₁</a> <a id="2026" class="Symbol">())</a> <a id="2030" class="Symbol">(</a><a id="2031" href="add-small-step-reduction.html#1135" class="InductiveConstructor">ξ₂</a> <a id="2034" class="Symbol">(</a><a id="2035" href="add-small-step-reduction.html#876" class="InductiveConstructor">nat</a> <a id="2039" href="add-small-step-reduction.html#2039" class="Bound">x</a><a id="2040" class="Symbol">)</a> <a id="2042" href="add-small-step-reduction.html#2042" class="Bound">LN</a><a id="2044" class="Symbol">)</a>
<a id="2046" href="add-small-step-reduction.html#1810" class="Function">deterministic</a> <a id="2060" class="Symbol">(</a><a id="2061" href="add-small-step-reduction.html#1135" class="InductiveConstructor">ξ₂</a> <a id="2064" class="Symbol">(</a><a id="2065" href="add-small-step-reduction.html#876" class="InductiveConstructor">nat</a> <a id="2069" href="add-small-step-reduction.html#2069" class="Bound">x</a><a id="2070" class="Symbol">)</a> <a id="2072" href="add-small-step-reduction.html#2072" class="Bound">LM</a><a id="2074" class="Symbol">)</a> <a id="2076" class="Symbol">(</a><a id="2077" href="add-small-step-reduction.html#1081" class="InductiveConstructor">ξ₁</a> <a id="2080" class="Symbol">())</a>
<a id="2084" href="add-small-step-reduction.html#1810" class="CatchallClause Function">deterministic</a><a id="2097" class="CatchallClause"> </a><a id="2098" class="CatchallClause Symbol">(</a><a id="2099" href="add-small-step-reduction.html#1135" class="CatchallClause InductiveConstructor">ξ₂</a><a id="2101" class="CatchallClause"> </a><a id="2102" href="add-small-step-reduction.html#2102" class="CatchallClause Bound">x</a><a id="2103" class="CatchallClause"> </a><a id="2104" href="add-small-step-reduction.html#2104" class="CatchallClause Bound">LM</a><a id="2106" class="CatchallClause Symbol">)</a><a id="2107" class="CatchallClause"> </a><a id="2108" class="CatchallClause Symbol">(</a><a id="2109" href="add-small-step-reduction.html#1135" class="CatchallClause InductiveConstructor">ξ₂</a><a id="2111" class="CatchallClause"> </a><a id="2112" href="add-small-step-reduction.html#2112" class="CatchallClause Bound">x₁</a><a id="2114" class="CatchallClause"> </a><a id="2115" href="add-small-step-reduction.html#2115" class="CatchallClause Bound">LN</a><a id="2117" class="CatchallClause Symbol">)</a> <a id="2119" class="Keyword">with</a> <a id="2124" href="add-small-step-reduction.html#1810" class="Function">deterministic</a> <a id="2138" href="add-small-step-reduction.html#2104" class="Bound">LM</a> <a id="2141" href="add-small-step-reduction.html#2115" class="Bound">LN</a>
<a id="2144" class="Symbol">...</a> <a id="2148" class="Symbol">|</a> <a id="2150" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="2155" class="Symbol">=</a> <a id="2157" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
</pre>
<h2 id="progress">Progress</h2>
<p>Progress means that the expression is a value or there is a next step to reduce.</p>
<pre class="Agda"><a id="2266" class="Keyword">data</a> <a id="Progress"></a><a id="2271" href="add-small-step-reduction.html#2271" class="Datatype">Progress</a> <a id="2280" class="Symbol">(</a><a id="2281" href="add-small-step-reduction.html#2281" class="Bound">M</a> <a id="2283" class="Symbol">:</a> <a id="2285" href="add-small-step-reduction.html#665" class="Datatype">Expr</a><a id="2289" class="Symbol">)</a> <a id="2291" class="Symbol">:</a> <a id="2293" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="2297" class="Keyword">where</a>
  <a id="Progress.step"></a><a id="2305" href="add-small-step-reduction.html#2305" class="InductiveConstructor">step</a> <a id="2310" class="Symbol">:</a> <a id="2312" class="Symbol">∀</a> <a id="2314" class="Symbol">{</a><a id="2315" href="add-small-step-reduction.html#2315" class="Bound">N</a><a id="2316" class="Symbol">}</a>
    <a id="2322" class="Symbol">→</a> <a id="2324" href="add-small-step-reduction.html#2281" class="Bound">M</a> <a id="2326" href="add-small-step-reduction.html#1048" class="Datatype Operator">—→</a> <a id="2329" href="add-small-step-reduction.html#2315" class="Bound">N</a>
      <a id="2337" class="Comment">----------</a>
    <a id="2352" class="Symbol">→</a> <a id="2354" href="add-small-step-reduction.html#2271" class="Datatype">Progress</a> <a id="2363" href="add-small-step-reduction.html#2281" class="Bound">M</a>

  <a id="Progress.done"></a><a id="2368" href="add-small-step-reduction.html#2368" class="InductiveConstructor">done</a> <a id="2373" class="Symbol">:</a>
      <a id="2381" href="add-small-step-reduction.html#849" class="Datatype">Value</a> <a id="2387" href="add-small-step-reduction.html#2281" class="Bound">M</a>
      <a id="2395" class="Comment">----------</a>
    <a id="2410" class="Symbol">→</a> <a id="2412" href="add-small-step-reduction.html#2271" class="Datatype">Progress</a> <a id="2421" href="add-small-step-reduction.html#2281" class="Bound">M</a>
</pre>
<p>I will show that every expression has this property:</p>
<pre class="Agda"><a id="progress"></a><a id="2486" href="add-small-step-reduction.html#2486" class="Function">progress</a> <a id="2495" class="Symbol">:</a> <a id="2497" class="Symbol">∀</a> <a id="2499" href="add-small-step-reduction.html#2499" class="Bound">M</a> <a id="2501" class="Symbol">→</a> <a id="2503" href="add-small-step-reduction.html#2271" class="Datatype">Progress</a> <a id="2512" href="add-small-step-reduction.html#2499" class="Bound">M</a>
<a id="2514" href="add-small-step-reduction.html#2486" class="Function">progress</a> <a id="2523" class="Symbol">(</a><a id="2524" href="add-small-step-reduction.html#684" class="InductiveConstructor">nat</a> <a id="2528" href="add-small-step-reduction.html#2528" class="Bound">x</a><a id="2529" class="Symbol">)</a> <a id="2531" class="Symbol">=</a> <a id="2533" href="add-small-step-reduction.html#2368" class="InductiveConstructor">done</a> <a id="2538" class="Symbol">(</a><a id="2539" href="add-small-step-reduction.html#876" class="InductiveConstructor">nat</a> <a id="2543" href="add-small-step-reduction.html#2528" class="Bound">x</a><a id="2544" class="Symbol">)</a>
<a id="2546" href="add-small-step-reduction.html#2486" class="Function">progress</a> <a id="2555" class="Symbol">(</a><a id="2556" href="add-small-step-reduction.html#2556" class="Bound">M</a> <a id="2558" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="2560" href="add-small-step-reduction.html#2560" class="Bound">N</a><a id="2561" class="Symbol">)</a> <a id="2563" class="Keyword">with</a> <a id="2568" href="add-small-step-reduction.html#511" class="InductiveConstructor Operator">⟨</a> <a id="2570" href="add-small-step-reduction.html#2486" class="Function">progress</a> <a id="2579" href="add-small-step-reduction.html#2556" class="Bound">M</a> <a id="2581" href="add-small-step-reduction.html#511" class="InductiveConstructor Operator">,</a> <a id="2583" href="add-small-step-reduction.html#2486" class="Function">progress</a> <a id="2592" href="add-small-step-reduction.html#2560" class="Bound">N</a> <a id="2594" href="add-small-step-reduction.html#511" class="InductiveConstructor Operator">⟩</a>
<a id="2596" class="Symbol">...</a> <a id="2600" class="Symbol">|</a> <a id="2602" href="add-small-step-reduction.html#511" class="InductiveConstructor Operator">⟨</a> <a id="2604" href="add-small-step-reduction.html#2305" class="InductiveConstructor">step</a> <a id="2609" href="add-small-step-reduction.html#2609" class="Bound">x</a> <a id="2611" href="add-small-step-reduction.html#511" class="InductiveConstructor Operator">,</a> <a id="2613" href="add-small-step-reduction.html#2613" class="Bound">snd</a> <a id="2617" href="add-small-step-reduction.html#511" class="InductiveConstructor Operator">⟩</a> <a id="2619" class="Symbol">=</a> <a id="2621" href="add-small-step-reduction.html#2305" class="InductiveConstructor">step</a> <a id="2626" class="Symbol">(</a><a id="2627" href="add-small-step-reduction.html#1081" class="InductiveConstructor">ξ₁</a> <a id="2630" href="add-small-step-reduction.html#2609" class="Bound">x</a><a id="2631" class="Symbol">)</a>
<a id="2633" class="Symbol">...</a> <a id="2637" class="Symbol">|</a> <a id="2639" href="add-small-step-reduction.html#511" class="InductiveConstructor Operator">⟨</a> <a id="2641" href="add-small-step-reduction.html#2368" class="InductiveConstructor">done</a> <a id="2646" href="add-small-step-reduction.html#2646" class="Bound">x</a> <a id="2648" href="add-small-step-reduction.html#511" class="InductiveConstructor Operator">,</a> <a id="2650" href="add-small-step-reduction.html#2305" class="InductiveConstructor">step</a> <a id="2655" href="add-small-step-reduction.html#2655" class="Bound">x₁</a> <a id="2658" href="add-small-step-reduction.html#511" class="InductiveConstructor Operator">⟩</a> <a id="2660" class="Symbol">=</a> <a id="2662" href="add-small-step-reduction.html#2305" class="InductiveConstructor">step</a> <a id="2667" class="Symbol">(</a><a id="2668" href="add-small-step-reduction.html#1135" class="InductiveConstructor">ξ₂</a> <a id="2671" href="add-small-step-reduction.html#2646" class="Bound">x</a> <a id="2673" href="add-small-step-reduction.html#2655" class="Bound">x₁</a><a id="2675" class="Symbol">)</a>
<a id="2677" class="Symbol">...</a> <a id="2681" class="Symbol">|</a> <a id="2683" href="add-small-step-reduction.html#511" class="InductiveConstructor Operator">⟨</a> <a id="2685" href="add-small-step-reduction.html#2368" class="InductiveConstructor">done</a> <a id="2690" class="Symbol">(</a><a id="2691" href="add-small-step-reduction.html#876" class="InductiveConstructor">nat</a> <a id="2695" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a><a id="2699" class="Symbol">)</a> <a id="2701" href="add-small-step-reduction.html#511" class="InductiveConstructor Operator">,</a> <a id="2703" href="add-small-step-reduction.html#2368" class="InductiveConstructor">done</a> <a id="2708" class="Symbol">(</a><a id="2709" href="add-small-step-reduction.html#876" class="InductiveConstructor">nat</a> <a id="2713" href="add-small-step-reduction.html#2713" class="Bound">y</a><a id="2714" class="Symbol">)</a> <a id="2716" href="add-small-step-reduction.html#511" class="InductiveConstructor Operator">⟩</a> <a id="2718" class="Symbol">=</a> <a id="2720" href="add-small-step-reduction.html#2305" class="InductiveConstructor">step</a> <a id="2725" href="add-small-step-reduction.html#1203" class="InductiveConstructor">ϕ0</a>
<a id="2728" class="Symbol">...</a> <a id="2732" class="Symbol">|</a> <a id="2734" href="add-small-step-reduction.html#511" class="InductiveConstructor Operator">⟨</a> <a id="2736" href="add-small-step-reduction.html#2368" class="InductiveConstructor">done</a> <a id="2741" class="Symbol">(</a><a id="2742" href="add-small-step-reduction.html#876" class="InductiveConstructor">nat</a> <a id="2746" class="Symbol">(</a><a id="2747" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="2751" href="add-small-step-reduction.html#2751" class="Bound">x</a><a id="2752" class="Symbol">))</a> <a id="2755" href="add-small-step-reduction.html#511" class="InductiveConstructor Operator">,</a> <a id="2757" href="add-small-step-reduction.html#2368" class="InductiveConstructor">done</a> <a id="2762" class="Symbol">(</a><a id="2763" href="add-small-step-reduction.html#876" class="InductiveConstructor">nat</a> <a id="2767" href="add-small-step-reduction.html#2767" class="Bound">y</a><a id="2768" class="Symbol">)</a> <a id="2770" href="add-small-step-reduction.html#511" class="InductiveConstructor Operator">⟩</a> <a id="2772" class="Symbol">=</a> <a id="2774" href="add-small-step-reduction.html#2305" class="InductiveConstructor">step</a> <a id="2779" href="add-small-step-reduction.html#1241" class="InductiveConstructor">ϕ+</a>
</pre>
<h2 id="multi-step">Multi step</h2>
<p>Now, it will be defined the multi step of the language. It can be a zero step, so an expression <code>M</code> can go to <code>M</code> (<code>M —↠ M</code>) or it can be a multiple step (that can be one, two or any natural number).</p>
<pre class="Agda"><a id="3007" class="Keyword">infix</a>  <a id="3014" class="Number">2</a> <a id="3016" href="add-small-step-reduction.html#3072" class="Datatype Operator">_—↠_</a>
<a id="3021" class="Keyword">infix</a>  <a id="3028" class="Number">1</a> <a id="3030" href="add-small-step-reduction.html#3222" class="Function Operator">begin_</a>
<a id="3037" class="Keyword">infixr</a> <a id="3044" class="Number">2</a> <a id="3046" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">_—→⟨_⟩_</a>
<a id="3054" class="Keyword">infix</a>  <a id="3061" class="Number">3</a> <a id="3063" href="add-small-step-reduction.html#3106" class="InductiveConstructor Operator">_∎</a>

<a id="3067" class="Keyword">data</a> <a id="_—↠_"></a><a id="3072" href="add-small-step-reduction.html#3072" class="Datatype Operator">_—↠_</a> <a id="3077" class="Symbol">:</a> <a id="3079" href="add-small-step-reduction.html#665" class="Datatype">Expr</a> <a id="3084" class="Symbol">→</a> <a id="3086" href="add-small-step-reduction.html#665" class="Datatype">Expr</a> <a id="3091" class="Symbol">→</a> <a id="3093" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="3097" class="Keyword">where</a>

  <a id="_—↠_._∎"></a><a id="3106" href="add-small-step-reduction.html#3106" class="InductiveConstructor Operator">_∎</a> <a id="3109" class="Symbol">:</a> <a id="3111" class="Symbol">∀</a> <a id="3113" href="add-small-step-reduction.html#3113" class="Bound">M</a>
      <a id="3121" class="Comment">--------</a>
    <a id="3134" class="Symbol">→</a> <a id="3136" href="add-small-step-reduction.html#3113" class="Bound">M</a> <a id="3138" href="add-small-step-reduction.html#3072" class="Datatype Operator">—↠</a> <a id="3141" href="add-small-step-reduction.html#3113" class="Bound">M</a>

  <a id="_—↠_._—→⟨_⟩_"></a><a id="3146" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">_—→⟨_⟩_</a> <a id="3154" class="Symbol">:</a> <a id="3156" class="Symbol">∀</a> <a id="3158" href="add-small-step-reduction.html#3158" class="Bound">L</a> <a id="3160" class="Symbol">{</a><a id="3161" href="add-small-step-reduction.html#3161" class="Bound">M</a> <a id="3163" href="add-small-step-reduction.html#3163" class="Bound">N</a><a id="3164" class="Symbol">}</a>
    <a id="3170" class="Symbol">→</a> <a id="3172" href="add-small-step-reduction.html#3158" class="Bound">L</a> <a id="3174" href="add-small-step-reduction.html#1048" class="Datatype Operator">—→</a> <a id="3177" href="add-small-step-reduction.html#3161" class="Bound">M</a>
    <a id="3183" class="Symbol">→</a> <a id="3185" href="add-small-step-reduction.html#3161" class="Bound">M</a> <a id="3187" href="add-small-step-reduction.html#3072" class="Datatype Operator">—↠</a> <a id="3190" href="add-small-step-reduction.html#3163" class="Bound">N</a>
      <a id="3198" class="Comment">---------</a>
    <a id="3212" class="Symbol">→</a> <a id="3214" href="add-small-step-reduction.html#3158" class="Bound">L</a> <a id="3216" href="add-small-step-reduction.html#3072" class="Datatype Operator">—↠</a> <a id="3219" href="add-small-step-reduction.html#3163" class="Bound">N</a>

<a id="begin_"></a><a id="3222" href="add-small-step-reduction.html#3222" class="Function Operator">begin_</a> <a id="3229" class="Symbol">:</a> <a id="3231" class="Symbol">∀</a> <a id="3233" class="Symbol">{</a><a id="3234" href="add-small-step-reduction.html#3234" class="Bound">M</a> <a id="3236" href="add-small-step-reduction.html#3236" class="Bound">N</a><a id="3237" class="Symbol">}</a>
  <a id="3241" class="Symbol">→</a> <a id="3243" href="add-small-step-reduction.html#3234" class="Bound">M</a> <a id="3245" href="add-small-step-reduction.html#3072" class="Datatype Operator">—↠</a> <a id="3248" href="add-small-step-reduction.html#3236" class="Bound">N</a>
    <a id="3254" class="Comment">------</a>
  <a id="3263" class="Symbol">→</a> <a id="3265" href="add-small-step-reduction.html#3234" class="Bound">M</a> <a id="3267" href="add-small-step-reduction.html#3072" class="Datatype Operator">—↠</a> <a id="3270" href="add-small-step-reduction.html#3236" class="Bound">N</a>
<a id="3272" href="add-small-step-reduction.html#3222" class="Function Operator">begin</a> <a id="3278" href="add-small-step-reduction.html#3278" class="Bound">M—↠N</a> <a id="3283" class="Symbol">=</a> <a id="3285" href="add-small-step-reduction.html#3278" class="Bound">M—↠N</a>
</pre>
<h2 id="evaluation">Evaluation</h2>
<p>For the definition evaluation, it will be necessary to defined when an expression was finished in the evaluation and the steps of the evaluation.</p>
<pre class="Agda"><a id="3461" class="Keyword">data</a> <a id="Finished"></a><a id="3466" href="add-small-step-reduction.html#3466" class="Datatype">Finished</a> <a id="3475" class="Symbol">(</a><a id="3476" href="add-small-step-reduction.html#3476" class="Bound">N</a> <a id="3478" class="Symbol">:</a> <a id="3480" href="add-small-step-reduction.html#665" class="Datatype">Expr</a><a id="3484" class="Symbol">)</a> <a id="3486" class="Symbol">:</a> <a id="3488" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="3492" class="Keyword">where</a>
   <a id="Finished.done"></a><a id="3501" href="add-small-step-reduction.html#3501" class="InductiveConstructor">done</a> <a id="3506" class="Symbol">:</a>
       <a id="3515" href="add-small-step-reduction.html#849" class="Datatype">Value</a> <a id="3521" href="add-small-step-reduction.html#3476" class="Bound">N</a>
       <a id="3530" class="Comment">----------</a>
     <a id="3546" class="Symbol">→</a> <a id="3548" href="add-small-step-reduction.html#3466" class="Datatype">Finished</a> <a id="3557" href="add-small-step-reduction.html#3476" class="Bound">N</a>

   <a id="Finished.out-of-gas"></a><a id="3563" href="add-small-step-reduction.html#3563" class="InductiveConstructor">out-of-gas</a> <a id="3574" class="Symbol">:</a>
       <a id="3583" class="Comment">----------</a>
       <a id="3601" href="add-small-step-reduction.html#3466" class="Datatype">Finished</a> <a id="3610" href="add-small-step-reduction.html#3476" class="Bound">N</a>
</pre>
<p>A expression is finished when it is a value or when there is no more gas available to calculate it. In Agda, every computation must terminates. So it is impossible to have an infinite loop. So when an expression takes so much time to finish, it runs out of gas and there is no result.</p>
<pre class="Agda"><a id="3907" class="Keyword">data</a> <a id="Steps"></a><a id="3912" href="add-small-step-reduction.html#3912" class="Datatype">Steps</a> <a id="3918" class="Symbol">:</a> <a id="3920" href="add-small-step-reduction.html#665" class="Datatype">Expr</a> <a id="3925" class="Symbol">→</a> <a id="3927" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="3931" class="Keyword">where</a>
  <a id="Steps.steps"></a><a id="3939" href="add-small-step-reduction.html#3939" class="InductiveConstructor">steps</a> <a id="3945" class="Symbol">:</a> <a id="3947" class="Symbol">∀</a> <a id="3949" class="Symbol">{</a><a id="3950" href="add-small-step-reduction.html#3950" class="Bound">L</a> <a id="3952" href="add-small-step-reduction.html#3952" class="Bound">N</a><a id="3953" class="Symbol">}</a>
    <a id="3959" class="Symbol">→</a> <a id="3961" href="add-small-step-reduction.html#3950" class="Bound">L</a> <a id="3963" href="add-small-step-reduction.html#3072" class="Datatype Operator">—↠</a> <a id="3966" href="add-small-step-reduction.html#3952" class="Bound">N</a>
    <a id="3972" class="Symbol">→</a> <a id="3974" href="add-small-step-reduction.html#3466" class="Datatype">Finished</a> <a id="3983" href="add-small-step-reduction.html#3952" class="Bound">N</a>
      <a id="3991" class="Comment">----------</a>
    <a id="4006" class="Symbol">→</a> <a id="4008" href="add-small-step-reduction.html#3912" class="Datatype">Steps</a> <a id="4014" href="add-small-step-reduction.html#3950" class="Bound">L</a>
</pre>
<p>The evaluation finishes when there is a proof of multi step for the value and it is already finished.</p>
<pre class="Agda"><a id="eval"></a><a id="4128" href="add-small-step-reduction.html#4128" class="Function">eval</a> <a id="4133" class="Symbol">:</a>
    <a id="4139" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
  <a id="4143" class="Symbol">→</a> <a id="4145" class="Symbol">(</a><a id="4146" href="add-small-step-reduction.html#4146" class="Bound">L</a> <a id="4148" class="Symbol">:</a> <a id="4150" href="add-small-step-reduction.html#665" class="Datatype">Expr</a><a id="4154" class="Symbol">)</a>
    <a id="4160" class="Comment">-----------</a>
  <a id="4174" class="Symbol">→</a> <a id="4176" href="add-small-step-reduction.html#3912" class="Datatype">Steps</a> <a id="4182" href="add-small-step-reduction.html#4146" class="Bound">L</a>
<a id="4184" href="add-small-step-reduction.html#4128" class="Function">eval</a> <a id="4189" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a> <a id="4194" href="add-small-step-reduction.html#4194" class="Bound">L</a> <a id="4196" class="Symbol">=</a> <a id="4198" href="add-small-step-reduction.html#3939" class="InductiveConstructor">steps</a> <a id="4204" class="Symbol">(</a><a id="4205" href="add-small-step-reduction.html#4194" class="Bound">L</a> <a id="4207" href="add-small-step-reduction.html#3106" class="InductiveConstructor Operator">∎</a><a id="4208" class="Symbol">)</a> <a id="4210" href="add-small-step-reduction.html#3563" class="InductiveConstructor">out-of-gas</a>
<a id="4221" href="add-small-step-reduction.html#4128" class="Function">eval</a> <a id="4226" class="Symbol">(</a><a id="4227" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="4231" href="add-small-step-reduction.html#4231" class="Bound">n</a><a id="4232" class="Symbol">)</a> <a id="4234" href="add-small-step-reduction.html#4234" class="Bound">L</a> <a id="4236" class="Keyword">with</a> <a id="4241" href="add-small-step-reduction.html#2486" class="Function">progress</a> <a id="4250" href="add-small-step-reduction.html#4234" class="Bound">L</a>
<a id="4252" class="Symbol">...</a> <a id="4256" class="Symbol">|</a> <a id="4258" href="add-small-step-reduction.html#2368" class="InductiveConstructor">done</a> <a id="4263" href="add-small-step-reduction.html#4263" class="Bound">x</a> <a id="4265" class="Symbol">=</a> <a id="4267" href="add-small-step-reduction.html#3939" class="InductiveConstructor">steps</a> <a id="4273" class="Symbol">(</a><a id="4274" class="Bound">L</a> <a id="4276" href="add-small-step-reduction.html#3106" class="InductiveConstructor Operator">∎</a><a id="4277" class="Symbol">)</a> <a id="4279" class="Symbol">(</a><a id="4280" href="add-small-step-reduction.html#3501" class="InductiveConstructor">done</a> <a id="4285" href="add-small-step-reduction.html#4263" class="Bound">x</a><a id="4286" class="Symbol">)</a>
<a id="4288" class="Symbol">...</a> <a id="4292" class="Symbol">|</a> <a id="4294" href="add-small-step-reduction.html#2305" class="InductiveConstructor">step</a> <a id="4299" class="Symbol">{</a><a id="4300" href="add-small-step-reduction.html#4300" class="Bound">M</a><a id="4301" class="Symbol">}</a> <a id="4303" href="add-small-step-reduction.html#4303" class="Bound">L—→M</a> <a id="4308" class="Keyword">with</a> <a id="4313" href="add-small-step-reduction.html#4128" class="Function">eval</a> <a id="4318" class="Bound">n</a> <a id="4320" href="add-small-step-reduction.html#4300" class="Bound">M</a>
<a id="4322" class="Symbol">...</a>   <a id="4328" class="Symbol">|</a> <a id="4330" href="add-small-step-reduction.html#3939" class="InductiveConstructor">steps</a> <a id="4336" href="add-small-step-reduction.html#4336" class="Bound">M—→N</a> <a id="4341" href="add-small-step-reduction.html#4341" class="Bound">fin</a> <a id="4345" class="Symbol">=</a> <a id="4347" href="add-small-step-reduction.html#3939" class="InductiveConstructor">steps</a> <a id="4353" class="Symbol">(</a><a id="4354" class="Bound">L</a> <a id="4356" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">—→⟨</a> <a id="4360" class="Bound">L—→M</a> <a id="4365" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">⟩</a> <a id="4367" href="add-small-step-reduction.html#4336" class="Bound">M—→N</a><a id="4371" class="Symbol">)</a> <a id="4373" href="add-small-step-reduction.html#4341" class="Bound">fin</a>
</pre>
<p>The evaluation takes gas and the expression to evaluate. In the end, it returns the value with a proof that the expression evaluates to this value.</p>
<p>Here, some examples of the evaluation:</p>
<pre class="Agda"><a id="4575" href="add-small-step-reduction.html#4575" class="Function">_</a> <a id="4577" class="Symbol">:</a> <a id="4579" href="add-small-step-reduction.html#4128" class="Function">eval</a> <a id="4584" class="Number">100</a> <a id="4588" class="Symbol">(</a><a id="4589" class="InductiveConstructor">nat</a> <a id="4593" class="Number">2</a> <a id="4595" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="4597" class="InductiveConstructor">nat</a> <a id="4601" class="Number">2</a><a id="4602" class="Symbol">)</a> <a id="4604" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="4606" href="add-small-step-reduction.html#3939" class="InductiveConstructor">steps</a>
  <a id="4614" class="Symbol">(</a><a id="4615" class="InductiveConstructor">nat</a> <a id="4619" class="Number">2</a> <a id="4621" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="4623" class="InductiveConstructor">nat</a> <a id="4627" class="Number">2</a> <a id="4629" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">—→⟨</a> <a id="4633" href="add-small-step-reduction.html#1241" class="InductiveConstructor">ϕ+</a> <a id="4636" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">⟩</a>
   <a id="4641" class="InductiveConstructor">nat</a> <a id="4645" class="Number">1</a> <a id="4647" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="4649" class="InductiveConstructor">nat</a> <a id="4653" class="Number">3</a> <a id="4655" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">—→⟨</a> <a id="4659" href="add-small-step-reduction.html#1241" class="InductiveConstructor">ϕ+</a> <a id="4662" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">⟩</a>
   <a id="4667" class="InductiveConstructor">nat</a> <a id="4671" class="Number">0</a> <a id="4673" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="4675" class="InductiveConstructor">nat</a> <a id="4679" class="Number">4</a> <a id="4681" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">—→⟨</a> <a id="4685" href="add-small-step-reduction.html#1203" class="InductiveConstructor">ϕ0</a> <a id="4688" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">⟩</a>
   <a id="4693" class="InductiveConstructor">nat</a> <a id="4697" class="Number">4</a> <a id="4699" href="add-small-step-reduction.html#3106" class="InductiveConstructor Operator">∎</a><a id="4700" class="Symbol">)</a>
   <a id="4705" class="Symbol">(</a><a id="4706" class="InductiveConstructor">done</a> <a id="4711" class="Symbol">(</a><a id="4712" class="InductiveConstructor">nat</a> <a id="4716" class="Number">4</a><a id="4717" class="Symbol">))</a>
<a id="4720" class="Symbol">_</a> <a id="4722" class="Symbol">=</a> <a id="4724" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="4730" href="add-small-step-reduction.html#4730" class="Function">_</a> <a id="4732" class="Symbol">:</a> <a id="4734" href="add-small-step-reduction.html#4128" class="Function">eval</a> <a id="4739" class="Number">100</a> <a id="4743" class="Symbol">(</a><a id="4744" class="InductiveConstructor">nat</a> <a id="4748" class="Number">1</a> <a id="4750" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="4752" class="InductiveConstructor">nat</a> <a id="4756" class="Number">1</a> <a id="4758" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="4760" class="InductiveConstructor">nat</a> <a id="4764" class="Number">2</a><a id="4765" class="Symbol">)</a> <a id="4767" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="4769" href="add-small-step-reduction.html#3939" class="InductiveConstructor">steps</a>
    <a id="4779" class="Symbol">(</a><a id="4780" class="InductiveConstructor">nat</a> <a id="4784" class="Number">1</a> <a id="4786" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="4788" class="InductiveConstructor">nat</a> <a id="4792" class="Number">1</a> <a id="4794" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="4796" class="InductiveConstructor">nat</a> <a id="4800" class="Number">2</a> <a id="4802" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">—→⟨</a> <a id="4806" href="add-small-step-reduction.html#1135" class="InductiveConstructor">ξ₂</a> <a id="4809" class="Symbol">(</a><a id="4810" class="InductiveConstructor">nat</a> <a id="4814" class="Number">1</a><a id="4815" class="Symbol">)</a> <a id="4817" href="add-small-step-reduction.html#1241" class="InductiveConstructor">ϕ+</a> <a id="4820" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">⟩</a>
       <a id="4829" class="InductiveConstructor">nat</a> <a id="4833" class="Number">1</a> <a id="4835" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="4837" class="InductiveConstructor">nat</a> <a id="4841" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a> <a id="4846" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="4848" class="InductiveConstructor">nat</a> <a id="4852" class="Number">3</a> <a id="4854" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">—→⟨</a> <a id="4858" href="add-small-step-reduction.html#1135" class="InductiveConstructor">ξ₂</a> <a id="4861" class="Symbol">(</a><a id="4862" class="InductiveConstructor">nat</a> <a id="4866" class="Number">1</a><a id="4867" class="Symbol">)</a> <a id="4869" href="add-small-step-reduction.html#1203" class="InductiveConstructor">ϕ0</a> <a id="4872" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">⟩</a>
       <a id="4881" class="InductiveConstructor">nat</a> <a id="4885" class="Number">1</a> <a id="4887" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="4889" class="InductiveConstructor">nat</a> <a id="4893" class="Number">3</a> <a id="4895" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">—→⟨</a> <a id="4899" href="add-small-step-reduction.html#1241" class="InductiveConstructor">ϕ+</a> <a id="4902" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">⟩</a> <a id="4904" class="InductiveConstructor">nat</a> <a id="4908" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a> <a id="4913" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="4915" class="InductiveConstructor">nat</a> <a id="4919" class="Number">4</a> <a id="4921" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">—→⟨</a> <a id="4925" href="add-small-step-reduction.html#1203" class="InductiveConstructor">ϕ0</a> <a id="4928" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">⟩</a> <a id="4930" class="InductiveConstructor">nat</a> <a id="4934" class="Number">4</a> <a id="4936" href="add-small-step-reduction.html#3106" class="InductiveConstructor Operator">∎</a><a id="4937" class="Symbol">)</a>
   <a id="4942" class="Symbol">(</a><a id="4943" class="InductiveConstructor">done</a> <a id="4948" class="Symbol">(</a><a id="4949" class="InductiveConstructor">nat</a> <a id="4953" class="Number">4</a><a id="4954" class="Symbol">))</a>
<a id="4957" class="Symbol">_</a> <a id="4959" class="Symbol">=</a> <a id="4961" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="4967" href="add-small-step-reduction.html#4967" class="Function">_</a> <a id="4969" class="Symbol">:</a> <a id="4971" href="add-small-step-reduction.html#4128" class="Function">eval</a> <a id="4976" class="Number">100</a> <a id="4980" class="Symbol">((</a><a id="4982" class="InductiveConstructor">nat</a> <a id="4986" class="Number">1</a> <a id="4988" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="4990" class="InductiveConstructor">nat</a> <a id="4994" class="Number">1</a><a id="4995" class="Symbol">)</a> <a id="4997" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="4999" class="InductiveConstructor">nat</a> <a id="5003" class="Number">2</a><a id="5004" class="Symbol">)</a> <a id="5006" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="5008" href="add-small-step-reduction.html#3939" class="InductiveConstructor">steps</a>
  <a id="5016" class="Symbol">((</a><a id="5018" class="InductiveConstructor">nat</a> <a id="5022" class="Number">1</a> <a id="5024" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="5026" class="InductiveConstructor">nat</a> <a id="5030" class="Number">1</a><a id="5031" class="Symbol">)</a> <a id="5033" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="5035" class="InductiveConstructor">nat</a> <a id="5039" class="Number">2</a> <a id="5041" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">—→⟨</a> <a id="5045" href="add-small-step-reduction.html#1081" class="InductiveConstructor">ξ₁</a> <a id="5048" href="add-small-step-reduction.html#1241" class="InductiveConstructor">ϕ+</a> <a id="5051" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">⟩</a>
   <a id="5056" class="Symbol">(</a><a id="5057" class="InductiveConstructor">nat</a> <a id="5061" class="Number">0</a> <a id="5063" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="5065" class="InductiveConstructor">nat</a> <a id="5069" class="Number">2</a><a id="5070" class="Symbol">)</a> <a id="5072" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="5074" class="InductiveConstructor">nat</a> <a id="5078" class="Number">2</a> <a id="5080" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">—→⟨</a> <a id="5084" href="add-small-step-reduction.html#1081" class="InductiveConstructor">ξ₁</a> <a id="5087" href="add-small-step-reduction.html#1203" class="InductiveConstructor">ϕ0</a> <a id="5090" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">⟩</a>
    <a id="5096" class="InductiveConstructor">nat</a> <a id="5100" class="Number">2</a> <a id="5102" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="5104" class="InductiveConstructor">nat</a> <a id="5108" class="Number">2</a>          <a id="5119" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">—→⟨</a> <a id="5123" href="add-small-step-reduction.html#1241" class="InductiveConstructor">ϕ+</a>    <a id="5129" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">⟩</a>
    <a id="5135" class="InductiveConstructor">nat</a> <a id="5139" class="Number">1</a> <a id="5141" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="5143" class="InductiveConstructor">nat</a> <a id="5147" class="Number">3</a>          <a id="5158" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">—→⟨</a> <a id="5162" href="add-small-step-reduction.html#1241" class="InductiveConstructor">ϕ+</a>    <a id="5168" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">⟩</a>
    <a id="5174" class="InductiveConstructor">nat</a> <a id="5178" class="Number">0</a> <a id="5180" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="5182" class="InductiveConstructor">nat</a> <a id="5186" class="Number">4</a>          <a id="5197" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">—→⟨</a> <a id="5201" href="add-small-step-reduction.html#1203" class="InductiveConstructor">ϕ0</a>    <a id="5207" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">⟩</a>
    <a id="5213" class="InductiveConstructor">nat</a> <a id="5217" class="Number">4</a> <a id="5219" href="add-small-step-reduction.html#3106" class="InductiveConstructor Operator">∎</a><a id="5220" class="Symbol">)</a>
  <a id="5224" class="Symbol">(</a><a id="5225" class="InductiveConstructor">done</a> <a id="5230" class="Symbol">(</a><a id="5231" class="InductiveConstructor">nat</a> <a id="5235" class="Number">4</a><a id="5236" class="Symbol">))</a>
<a id="5239" class="Symbol">_</a> <a id="5241" class="Symbol">=</a> <a id="5243" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
</pre>
<h2 id="proofs-for-later-use">Proofs for later use</h2>
<p>I will prove some axioms to use it later in the part of parallel reduction:</p>
<pre class="Agda"><a id="—↠-trans"></a><a id="5359" href="add-small-step-reduction.html#5359" class="Function">—↠-trans</a> <a id="5368" class="Symbol">:</a> <a id="5370" class="Symbol">∀</a> <a id="5372" class="Symbol">{</a><a id="5373" href="add-small-step-reduction.html#5373" class="Bound">L</a> <a id="5375" href="add-small-step-reduction.html#5375" class="Bound">M</a> <a id="5377" href="add-small-step-reduction.html#5377" class="Bound">N</a><a id="5378" class="Symbol">}</a>
         <a id="5389" class="Symbol">→</a> <a id="5391" href="add-small-step-reduction.html#5373" class="Bound">L</a> <a id="5393" href="add-small-step-reduction.html#3072" class="Datatype Operator">—↠</a> <a id="5396" href="add-small-step-reduction.html#5375" class="Bound">M</a>
         <a id="5407" class="Symbol">→</a> <a id="5409" href="add-small-step-reduction.html#5375" class="Bound">M</a> <a id="5411" href="add-small-step-reduction.html#3072" class="Datatype Operator">—↠</a> <a id="5414" href="add-small-step-reduction.html#5377" class="Bound">N</a>
         <a id="5425" class="Symbol">→</a> <a id="5427" href="add-small-step-reduction.html#5373" class="Bound">L</a> <a id="5429" href="add-small-step-reduction.html#3072" class="Datatype Operator">—↠</a> <a id="5432" href="add-small-step-reduction.html#5377" class="Bound">N</a>
<a id="5434" href="add-small-step-reduction.html#5359" class="Function">—↠-trans</a> <a id="5443" class="Symbol">(</a><a id="5444" href="add-small-step-reduction.html#5444" class="Bound">M</a> <a id="5446" href="add-small-step-reduction.html#3106" class="InductiveConstructor Operator">∎</a><a id="5447" class="Symbol">)</a> <a id="5449" href="add-small-step-reduction.html#5449" class="Bound">mn</a> <a id="5452" class="Symbol">=</a> <a id="5454" href="add-small-step-reduction.html#5449" class="Bound">mn</a>
<a id="5457" href="add-small-step-reduction.html#5359" class="Function">—↠-trans</a> <a id="5466" class="Symbol">(</a><a id="5467" href="add-small-step-reduction.html#5467" class="Bound">L</a> <a id="5469" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">—→⟨</a> <a id="5473" href="add-small-step-reduction.html#5473" class="Bound">r</a> <a id="5475" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">⟩</a> <a id="5477" href="add-small-step-reduction.html#5477" class="Bound">lm</a><a id="5479" class="Symbol">)</a> <a id="5481" href="add-small-step-reduction.html#5481" class="Bound">mn</a> <a id="5484" class="Symbol">=</a> <a id="5486" href="add-small-step-reduction.html#5467" class="Bound">L</a> <a id="5488" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">—→⟨</a> <a id="5492" href="add-small-step-reduction.html#5473" class="Bound">r</a> <a id="5494" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">⟩</a> <a id="5496" class="Symbol">(</a><a id="5497" href="add-small-step-reduction.html#5359" class="Function">—↠-trans</a> <a id="5506" href="add-small-step-reduction.html#5477" class="Bound">lm</a> <a id="5509" href="add-small-step-reduction.html#5481" class="Bound">mn</a><a id="5511" class="Symbol">)</a>

<a id="5514" class="Keyword">infixr</a> <a id="5521" class="Number">2</a> <a id="5523" href="add-small-step-reduction.html#5532" class="Function Operator">_—↠⟨_⟩_</a>

<a id="_—↠⟨_⟩_"></a><a id="5532" href="add-small-step-reduction.html#5532" class="Function Operator">_—↠⟨_⟩_</a> <a id="5540" class="Symbol">:</a> <a id="5542" class="Symbol">∀</a> <a id="5544" href="add-small-step-reduction.html#5544" class="Bound">L</a> <a id="5546" class="Symbol">{</a><a id="5547" href="add-small-step-reduction.html#5547" class="Bound">M</a> <a id="5549" href="add-small-step-reduction.html#5549" class="Bound">N</a><a id="5550" class="Symbol">}</a>
    <a id="5556" class="Symbol">→</a> <a id="5558" href="add-small-step-reduction.html#5544" class="Bound">L</a> <a id="5560" href="add-small-step-reduction.html#3072" class="Datatype Operator">—↠</a> <a id="5563" href="add-small-step-reduction.html#5547" class="Bound">M</a>
    <a id="5569" class="Symbol">→</a> <a id="5571" href="add-small-step-reduction.html#5547" class="Bound">M</a> <a id="5573" href="add-small-step-reduction.html#3072" class="Datatype Operator">—↠</a> <a id="5576" href="add-small-step-reduction.html#5549" class="Bound">N</a>
      <a id="5584" class="Comment">---------</a>
    <a id="5598" class="Symbol">→</a> <a id="5600" href="add-small-step-reduction.html#5544" class="Bound">L</a> <a id="5602" href="add-small-step-reduction.html#3072" class="Datatype Operator">—↠</a> <a id="5605" href="add-small-step-reduction.html#5549" class="Bound">N</a>
<a id="5607" href="add-small-step-reduction.html#5607" class="Bound">L</a> <a id="5609" href="add-small-step-reduction.html#5532" class="Function Operator">—↠⟨</a> <a id="5613" href="add-small-step-reduction.html#5613" class="Bound">L—↠M</a> <a id="5618" href="add-small-step-reduction.html#5532" class="Function Operator">⟩</a> <a id="5620" href="add-small-step-reduction.html#5620" class="Bound">M—↠N</a> <a id="5625" class="Symbol">=</a> <a id="5627" href="add-small-step-reduction.html#5359" class="Function">—↠-trans</a> <a id="5636" href="add-small-step-reduction.html#5613" class="Bound">L—↠M</a> <a id="5641" href="add-small-step-reduction.html#5620" class="Bound">M—↠N</a>

<a id="appL-cong"></a><a id="5647" href="add-small-step-reduction.html#5647" class="Function">appL-cong</a> <a id="5657" class="Symbol">:</a> <a id="5659" class="Symbol">∀</a> <a id="5661" class="Symbol">{</a><a id="5662" href="add-small-step-reduction.html#5662" class="Bound">L</a> <a id="5664" href="add-small-step-reduction.html#5664" class="Bound">L'</a> <a id="5667" href="add-small-step-reduction.html#5667" class="Bound">M</a><a id="5668" class="Symbol">}</a>
         <a id="5679" class="Symbol">→</a> <a id="5681" href="add-small-step-reduction.html#5662" class="Bound">L</a> <a id="5683" href="add-small-step-reduction.html#3072" class="Datatype Operator">—↠</a> <a id="5686" href="add-small-step-reduction.html#5664" class="Bound">L'</a>
           <a id="5700" class="Comment">---------------</a>
         <a id="5725" class="Symbol">→</a> <a id="5727" href="add-small-step-reduction.html#5662" class="Bound">L</a> <a id="5729" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="5731" href="add-small-step-reduction.html#5667" class="Bound">M</a> <a id="5733" href="add-small-step-reduction.html#3072" class="Datatype Operator">—↠</a> <a id="5736" href="add-small-step-reduction.html#5664" class="Bound">L'</a> <a id="5739" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="5741" href="add-small-step-reduction.html#5667" class="Bound">M</a>
<a id="5743" href="add-small-step-reduction.html#5647" class="Function">appL-cong</a> <a id="5753" class="Symbol">{</a><a id="5754" href="add-small-step-reduction.html#5754" class="Bound">L</a><a id="5755" class="Symbol">}{</a><a id="5757" href="add-small-step-reduction.html#5757" class="Bound">L'</a><a id="5759" class="Symbol">}{</a><a id="5761" href="add-small-step-reduction.html#5761" class="Bound">M</a><a id="5762" class="Symbol">}</a> <a id="5764" class="Symbol">(</a><a id="5765" href="add-small-step-reduction.html#5754" class="Bound">L</a> <a id="5767" href="add-small-step-reduction.html#3106" class="InductiveConstructor Operator">∎</a><a id="5768" class="Symbol">)</a> <a id="5770" class="Symbol">=</a> <a id="5772" href="add-small-step-reduction.html#5754" class="Bound">L</a> <a id="5774" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="5776" href="add-small-step-reduction.html#5761" class="Bound">M</a> <a id="5778" href="add-small-step-reduction.html#3106" class="InductiveConstructor Operator">∎</a>
<a id="5780" href="add-small-step-reduction.html#5647" class="Function">appL-cong</a> <a id="5790" class="Symbol">{</a><a id="5791" href="add-small-step-reduction.html#5791" class="Bound">L</a><a id="5792" class="Symbol">}{</a><a id="5794" href="add-small-step-reduction.html#5794" class="Bound">L'</a><a id="5796" class="Symbol">}{</a><a id="5798" href="add-small-step-reduction.html#5798" class="Bound">M</a><a id="5799" class="Symbol">}</a> <a id="5801" class="Symbol">(</a><a id="5802" href="add-small-step-reduction.html#5791" class="Bound">L</a> <a id="5804" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">—→⟨</a> <a id="5808" href="add-small-step-reduction.html#5808" class="Bound">r</a> <a id="5810" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">⟩</a> <a id="5812" href="add-small-step-reduction.html#5812" class="Bound">rs</a><a id="5814" class="Symbol">)</a> <a id="5816" class="Symbol">=</a> <a id="5818" href="add-small-step-reduction.html#5791" class="Bound">L</a> <a id="5820" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="5822" href="add-small-step-reduction.html#5798" class="Bound">M</a> <a id="5824" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">—→⟨</a> <a id="5828" href="add-small-step-reduction.html#1081" class="InductiveConstructor">ξ₁</a> <a id="5831" href="add-small-step-reduction.html#5808" class="Bound">r</a> <a id="5833" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">⟩</a> <a id="5835" href="add-small-step-reduction.html#5647" class="Function">appL-cong</a> <a id="5845" href="add-small-step-reduction.html#5812" class="Bound">rs</a>

<a id="appR-cong"></a><a id="5849" href="add-small-step-reduction.html#5849" class="Function">appR-cong</a> <a id="5859" class="Symbol">:</a> <a id="5861" class="Symbol">∀</a> <a id="5863" class="Symbol">{</a><a id="5864" href="add-small-step-reduction.html#5864" class="Bound">L</a> <a id="5866" href="add-small-step-reduction.html#5866" class="Bound">M</a> <a id="5868" href="add-small-step-reduction.html#5868" class="Bound">M'</a><a id="5870" class="Symbol">}</a>
         <a id="5881" class="Symbol">→</a> <a id="5883" href="add-small-step-reduction.html#849" class="Datatype">Value</a> <a id="5889" href="add-small-step-reduction.html#5864" class="Bound">L</a>
         <a id="5900" class="Symbol">→</a> <a id="5902" href="add-small-step-reduction.html#5866" class="Bound">M</a> <a id="5904" href="add-small-step-reduction.html#3072" class="Datatype Operator">—↠</a> <a id="5907" href="add-small-step-reduction.html#5868" class="Bound">M'</a>
           <a id="5921" class="Comment">---------------</a>
         <a id="5946" class="Symbol">→</a> <a id="5948" href="add-small-step-reduction.html#5864" class="Bound">L</a> <a id="5950" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="5952" href="add-small-step-reduction.html#5866" class="Bound">M</a> <a id="5954" href="add-small-step-reduction.html#3072" class="Datatype Operator">—↠</a> <a id="5957" href="add-small-step-reduction.html#5864" class="Bound">L</a> <a id="5959" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="5961" href="add-small-step-reduction.html#5868" class="Bound">M'</a>
<a id="5964" href="add-small-step-reduction.html#5849" class="Function">appR-cong</a> <a id="5974" class="Symbol">{</a><a id="5975" href="add-small-step-reduction.html#5975" class="Bound">L</a><a id="5976" class="Symbol">}{</a><a id="5978" href="add-small-step-reduction.html#5978" class="Bound">M</a><a id="5979" class="Symbol">}{</a><a id="5981" href="add-small-step-reduction.html#5981" class="Bound">M'</a><a id="5983" class="Symbol">}</a> <a id="5985" href="add-small-step-reduction.html#5985" class="Bound">VL</a> <a id="5988" class="Symbol">(</a><a id="5989" href="add-small-step-reduction.html#5978" class="Bound">M</a> <a id="5991" href="add-small-step-reduction.html#3106" class="InductiveConstructor Operator">∎</a><a id="5992" class="Symbol">)</a> <a id="5994" class="Symbol">=</a> <a id="5996" href="add-small-step-reduction.html#5975" class="Bound">L</a> <a id="5998" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="6000" href="add-small-step-reduction.html#5978" class="Bound">M</a> <a id="6002" href="add-small-step-reduction.html#3106" class="InductiveConstructor Operator">∎</a>
<a id="6004" href="add-small-step-reduction.html#5849" class="Function">appR-cong</a> <a id="6014" class="Symbol">{</a><a id="6015" href="add-small-step-reduction.html#6015" class="Bound">L</a><a id="6016" class="Symbol">}{</a><a id="6018" href="add-small-step-reduction.html#6018" class="Bound">M</a><a id="6019" class="Symbol">}{</a><a id="6021" href="add-small-step-reduction.html#6021" class="Bound">M'</a><a id="6023" class="Symbol">}</a> <a id="6025" href="add-small-step-reduction.html#6025" class="Bound">VL</a> <a id="6028" class="Symbol">(</a><a id="6029" href="add-small-step-reduction.html#6018" class="Bound">M</a> <a id="6031" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">—→⟨</a> <a id="6035" href="add-small-step-reduction.html#6035" class="Bound">r</a> <a id="6037" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">⟩</a> <a id="6039" href="add-small-step-reduction.html#6039" class="Bound">rs</a><a id="6041" class="Symbol">)</a> <a id="6043" class="Symbol">=</a> <a id="6045" href="add-small-step-reduction.html#6015" class="Bound">L</a> <a id="6047" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="6049" href="add-small-step-reduction.html#6018" class="Bound">M</a> <a id="6051" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">—→⟨</a> <a id="6055" href="add-small-step-reduction.html#1135" class="InductiveConstructor">ξ₂</a> <a id="6058" href="add-small-step-reduction.html#6025" class="Bound">VL</a> <a id="6061" href="add-small-step-reduction.html#6035" class="Bound">r</a> <a id="6063" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">⟩</a> <a id="6065" href="add-small-step-reduction.html#5849" class="Function">appR-cong</a> <a id="6075" href="add-small-step-reduction.html#6025" class="Bound">VL</a> <a id="6078" href="add-small-step-reduction.html#6039" class="Bound">rs</a>

<a id="abs-cong"></a><a id="6082" href="add-small-step-reduction.html#6082" class="Function">abs-cong</a> <a id="6091" class="Symbol">:</a> <a id="6093" class="Symbol">∀</a> <a id="6095" class="Symbol">{</a><a id="6096" href="add-small-step-reduction.html#6096" class="Bound">M</a> <a id="6098" href="add-small-step-reduction.html#6098" class="Bound">M'</a> <a id="6101" href="add-small-step-reduction.html#6101" class="Bound">N</a> <a id="6103" href="add-small-step-reduction.html#6103" class="Bound">N'</a><a id="6105" class="Symbol">}</a>
         <a id="6116" class="Symbol">→</a> <a id="6118" href="add-small-step-reduction.html#849" class="Datatype">Value</a> <a id="6124" href="add-small-step-reduction.html#6098" class="Bound">M'</a>
         <a id="6136" class="Symbol">→</a> <a id="6138" href="add-small-step-reduction.html#6096" class="Bound">M</a> <a id="6140" href="add-small-step-reduction.html#3072" class="Datatype Operator">—↠</a> <a id="6143" href="add-small-step-reduction.html#6098" class="Bound">M'</a>
         <a id="6155" class="Symbol">→</a> <a id="6157" href="add-small-step-reduction.html#6101" class="Bound">N</a> <a id="6159" href="add-small-step-reduction.html#3072" class="Datatype Operator">—↠</a> <a id="6162" href="add-small-step-reduction.html#6103" class="Bound">N'</a>
           <a id="6176" class="Comment">----------</a>
         <a id="6196" class="Symbol">→</a> <a id="6198" href="add-small-step-reduction.html#6096" class="Bound">M</a> <a id="6200" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="6202" href="add-small-step-reduction.html#6101" class="Bound">N</a> <a id="6204" href="add-small-step-reduction.html#3072" class="Datatype Operator">—↠</a> <a id="6207" href="add-small-step-reduction.html#6098" class="Bound">M'</a> <a id="6210" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="6212" href="add-small-step-reduction.html#6103" class="Bound">N'</a>
<a id="6215" href="add-small-step-reduction.html#6082" class="Function">abs-cong</a> <a id="6224" href="add-small-step-reduction.html#6224" class="Bound">VM</a> <a id="6227" class="Symbol">(</a><a id="6228" href="add-small-step-reduction.html#6228" class="Bound">M</a> <a id="6230" href="add-small-step-reduction.html#3106" class="InductiveConstructor Operator">∎</a><a id="6231" class="Symbol">)</a> <a id="6233" class="Symbol">(</a><a id="6234" href="add-small-step-reduction.html#6234" class="Bound">N</a> <a id="6236" href="add-small-step-reduction.html#3106" class="InductiveConstructor Operator">∎</a><a id="6237" class="Symbol">)</a> <a id="6239" class="Symbol">=</a> <a id="6241" href="add-small-step-reduction.html#6228" class="Bound">M</a> <a id="6243" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="6245" href="add-small-step-reduction.html#6234" class="Bound">N</a> <a id="6247" href="add-small-step-reduction.html#3106" class="InductiveConstructor Operator">∎</a>
<a id="6249" href="add-small-step-reduction.html#6082" class="Function">abs-cong</a> <a id="6258" href="add-small-step-reduction.html#6258" class="Bound">VM</a> <a id="6261" class="Symbol">(</a><a id="6262" href="add-small-step-reduction.html#6262" class="Bound">M</a> <a id="6264" href="add-small-step-reduction.html#3106" class="InductiveConstructor Operator">∎</a><a id="6265" class="Symbol">)</a> <a id="6267" class="Symbol">(</a><a id="6268" href="add-small-step-reduction.html#6268" class="Bound">N</a> <a id="6270" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">—→⟨</a> <a id="6274" href="add-small-step-reduction.html#6274" class="Bound">st</a> <a id="6277" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">⟩</a> <a id="6279" href="add-small-step-reduction.html#6279" class="Bound">N'</a><a id="6281" class="Symbol">)</a> <a id="6283" class="Symbol">=</a> <a id="6285" href="add-small-step-reduction.html#6262" class="Bound">M</a> <a id="6287" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="6289" href="add-small-step-reduction.html#6268" class="Bound">N</a> <a id="6291" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">—→⟨</a> <a id="6295" href="add-small-step-reduction.html#1135" class="InductiveConstructor">ξ₂</a> <a id="6298" href="add-small-step-reduction.html#6258" class="Bound">VM</a> <a id="6301" href="add-small-step-reduction.html#6274" class="Bound">st</a> <a id="6304" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">⟩</a> <a id="6306" href="add-small-step-reduction.html#6082" class="Function">abs-cong</a> <a id="6315" href="add-small-step-reduction.html#6258" class="Bound">VM</a> <a id="6318" class="Symbol">(</a><a id="6319" href="add-small-step-reduction.html#6262" class="Bound">M</a> <a id="6321" href="add-small-step-reduction.html#3106" class="InductiveConstructor Operator">∎</a><a id="6322" class="Symbol">)</a> <a id="6324" href="add-small-step-reduction.html#6279" class="Bound">N'</a>
<a id="6327" href="add-small-step-reduction.html#6082" class="Function">abs-cong</a> <a id="6336" href="add-small-step-reduction.html#6336" class="Bound">VM</a> <a id="6339" class="Symbol">(</a><a id="6340" href="add-small-step-reduction.html#6340" class="Bound">M</a> <a id="6342" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">—→⟨</a> <a id="6346" href="add-small-step-reduction.html#6346" class="Bound">st</a> <a id="6349" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">⟩</a> <a id="6351" href="add-small-step-reduction.html#6351" class="Bound">M'</a><a id="6353" class="Symbol">)</a> <a id="6355" class="Symbol">(</a><a id="6356" href="add-small-step-reduction.html#6356" class="Bound">N</a> <a id="6358" href="add-small-step-reduction.html#3106" class="InductiveConstructor Operator">∎</a><a id="6359" class="Symbol">)</a> <a id="6361" class="Symbol">=</a> <a id="6363" href="add-small-step-reduction.html#6340" class="Bound">M</a> <a id="6365" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="6367" href="add-small-step-reduction.html#6356" class="Bound">N</a> <a id="6369" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">—→⟨</a> <a id="6373" href="add-small-step-reduction.html#1081" class="InductiveConstructor">ξ₁</a> <a id="6376" href="add-small-step-reduction.html#6346" class="Bound">st</a> <a id="6379" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">⟩</a> <a id="6381" href="add-small-step-reduction.html#6082" class="Function">abs-cong</a> <a id="6390" href="add-small-step-reduction.html#6336" class="Bound">VM</a> <a id="6393" href="add-small-step-reduction.html#6351" class="Bound">M'</a> <a id="6396" class="Symbol">(</a><a id="6397" href="add-small-step-reduction.html#6356" class="Bound">N</a> <a id="6399" href="add-small-step-reduction.html#3106" class="InductiveConstructor Operator">∎</a><a id="6400" class="Symbol">)</a>
<a id="6402" href="add-small-step-reduction.html#6082" class="Function">abs-cong</a> <a id="6411" href="add-small-step-reduction.html#6411" class="Bound">VM</a> <a id="6414" class="Symbol">(</a><a id="6415" href="add-small-step-reduction.html#6415" class="Bound">M</a> <a id="6417" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">—→⟨</a> <a id="6421" href="add-small-step-reduction.html#6421" class="Bound">stm</a> <a id="6425" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">⟩</a> <a id="6427" href="add-small-step-reduction.html#6427" class="Bound">M'</a><a id="6429" class="Symbol">)</a> <a id="6431" class="Symbol">(</a><a id="6432" href="add-small-step-reduction.html#6432" class="Bound">N</a> <a id="6434" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">—→⟨</a> <a id="6438" href="add-small-step-reduction.html#6438" class="Bound">stn</a> <a id="6442" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">⟩</a> <a id="6444" href="add-small-step-reduction.html#6444" class="Bound">N'</a><a id="6446" class="Symbol">)</a> <a id="6448" class="Symbol">=</a> <a id="6450" href="add-small-step-reduction.html#6415" class="Bound">M</a> <a id="6452" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="6454" href="add-small-step-reduction.html#6432" class="Bound">N</a> <a id="6456" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">—→⟨</a> <a id="6460" href="add-small-step-reduction.html#1081" class="InductiveConstructor">ξ₁</a> <a id="6463" href="add-small-step-reduction.html#6421" class="Bound">stm</a> <a id="6467" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">⟩</a> <a id="6469" href="add-small-step-reduction.html#6082" class="Function">abs-cong</a> <a id="6478" href="add-small-step-reduction.html#6411" class="Bound">VM</a> <a id="6481" href="add-small-step-reduction.html#6427" class="Bound">M'</a> <a id="6484" class="Symbol">(</a><a id="6485" href="add-small-step-reduction.html#6432" class="Bound">N</a> <a id="6487" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">—→⟨</a> <a id="6491" href="add-small-step-reduction.html#6438" class="Bound">stn</a> <a id="6495" href="add-small-step-reduction.html#3146" class="InductiveConstructor Operator">⟩</a> <a id="6497" href="add-small-step-reduction.html#6444" class="Bound">N'</a><a id="6499" class="Symbol">)</a>
</pre>
<h1 id="parallel-reduction">Parallel Reduction</h1>
<p>The parallel reduction is good for doing reductions in parallel, so it can run faster in a multi core computer.</p>
<h2 id="single-step">Single step</h2>
<p>Here, the definition of single step of the parallel reduction.</p>
<pre class="Agda"><a id="6725" class="Keyword">infix</a> <a id="6731" class="Number">2</a> <a id="6733" href="add-small-step-reduction.html#6743" class="Datatype Operator">_⇛_</a>

<a id="6738" class="Keyword">data</a> <a id="_⇛_"></a><a id="6743" href="add-small-step-reduction.html#6743" class="Datatype Operator">_⇛_</a> <a id="6747" class="Symbol">:</a> <a id="6749" href="add-small-step-reduction.html#665" class="Datatype">Expr</a> <a id="6754" class="Symbol">→</a> <a id="6756" href="add-small-step-reduction.html#665" class="Datatype">Expr</a> <a id="6761" class="Symbol">→</a> <a id="6763" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="6767" class="Keyword">where</a>
  <a id="_⇛_.pnat"></a><a id="6775" href="add-small-step-reduction.html#6775" class="InductiveConstructor">pnat</a> <a id="6780" class="Symbol">:</a> <a id="6782" class="Symbol">∀</a> <a id="6784" class="Symbol">{</a><a id="6785" href="add-small-step-reduction.html#6785" class="Bound">x</a><a id="6786" class="Symbol">}</a>
      <a id="6794" class="Comment">-----------------</a>
    <a id="6816" class="Symbol">→</a> <a id="6818" href="add-small-step-reduction.html#684" class="InductiveConstructor">nat</a> <a id="6822" href="add-small-step-reduction.html#6785" class="Bound">x</a> <a id="6824" href="add-small-step-reduction.html#6743" class="Datatype Operator">⇛</a> <a id="6826" href="add-small-step-reduction.html#684" class="InductiveConstructor">nat</a> <a id="6830" href="add-small-step-reduction.html#6785" class="Bound">x</a>

  <a id="_⇛_.papp"></a><a id="6835" href="add-small-step-reduction.html#6835" class="InductiveConstructor">papp</a> <a id="6840" class="Symbol">:</a> <a id="6842" class="Symbol">∀</a> <a id="6844" class="Symbol">{</a><a id="6845" href="add-small-step-reduction.html#6845" class="Bound">L</a> <a id="6847" href="add-small-step-reduction.html#6847" class="Bound">L′</a> <a id="6850" href="add-small-step-reduction.html#6850" class="Bound">M</a> <a id="6852" href="add-small-step-reduction.html#6852" class="Bound">M′</a><a id="6854" class="Symbol">}</a>
    <a id="6860" class="Symbol">→</a> <a id="6862" href="add-small-step-reduction.html#6845" class="Bound">L</a> <a id="6864" href="add-small-step-reduction.html#6743" class="Datatype Operator">⇛</a> <a id="6866" href="add-small-step-reduction.html#6847" class="Bound">L′</a>
    <a id="6873" class="Symbol">→</a> <a id="6875" href="add-small-step-reduction.html#6850" class="Bound">M</a> <a id="6877" href="add-small-step-reduction.html#6743" class="Datatype Operator">⇛</a> <a id="6879" href="add-small-step-reduction.html#6852" class="Bound">M′</a>
      <a id="6888" class="Comment">---------------</a>
    <a id="6908" class="Symbol">→</a> <a id="6910" href="add-small-step-reduction.html#6845" class="Bound">L</a> <a id="6912" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="6914" href="add-small-step-reduction.html#6850" class="Bound">M</a> <a id="6916" href="add-small-step-reduction.html#6743" class="Datatype Operator">⇛</a> <a id="6918" href="add-small-step-reduction.html#6847" class="Bound">L′</a> <a id="6921" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="6923" href="add-small-step-reduction.html#6852" class="Bound">M′</a>

  <a id="_⇛_.pzero"></a><a id="6929" href="add-small-step-reduction.html#6929" class="InductiveConstructor">pzero</a> <a id="6935" class="Symbol">:</a> <a id="6937" class="Symbol">∀</a> <a id="6939" class="Symbol">{</a><a id="6940" href="add-small-step-reduction.html#6940" class="Bound">N</a><a id="6941" class="Symbol">}</a>
    <a id="6947" class="Symbol">→</a> <a id="6949" href="add-small-step-reduction.html#684" class="InductiveConstructor">nat</a> <a id="6953" class="Number">0</a> <a id="6955" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="6957" href="add-small-step-reduction.html#6940" class="Bound">N</a> <a id="6959" href="add-small-step-reduction.html#6743" class="Datatype Operator">⇛</a> <a id="6961" href="add-small-step-reduction.html#6940" class="Bound">N</a>

  <a id="_⇛_.padd"></a><a id="6966" href="add-small-step-reduction.html#6966" class="InductiveConstructor">padd</a> <a id="6971" class="Symbol">:</a> <a id="6973" class="Symbol">∀</a> <a id="6975" class="Symbol">{</a><a id="6976" href="add-small-step-reduction.html#6976" class="Bound">m</a> <a id="6978" href="add-small-step-reduction.html#6978" class="Bound">n</a><a id="6979" class="Symbol">}</a>
    <a id="6985" class="Symbol">→</a> <a id="6987" href="add-small-step-reduction.html#684" class="InductiveConstructor">nat</a> <a id="6991" class="Symbol">(</a><a id="6992" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="6996" href="add-small-step-reduction.html#6976" class="Bound">m</a><a id="6997" class="Symbol">)</a> <a id="6999" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="7001" href="add-small-step-reduction.html#684" class="InductiveConstructor">nat</a> <a id="7005" href="add-small-step-reduction.html#6978" class="Bound">n</a> <a id="7007" href="add-small-step-reduction.html#6743" class="Datatype Operator">⇛</a> <a id="7009" href="add-small-step-reduction.html#684" class="InductiveConstructor">nat</a> <a id="7013" href="add-small-step-reduction.html#6976" class="Bound">m</a> <a id="7015" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="7017" href="add-small-step-reduction.html#684" class="InductiveConstructor">nat</a> <a id="7021" class="Symbol">(</a><a id="7022" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="7026" href="add-small-step-reduction.html#6978" class="Bound">n</a><a id="7027" class="Symbol">)</a>
</pre>
<p>The biggest difference of this reduction is <code>papp</code>, that does two reductions at the same time. It can run faster in a multi core computer.</p>
<h2 id="multi-step-1">Multi step</h2>
<p>The sequences of parallel reduction will be defined in this way:</p>
<pre class="Agda"><a id="7259" class="Keyword">infix</a>  <a id="7266" class="Number">2</a> <a id="7268" href="add-small-step-reduction.html#7308" class="Datatype Operator">_⇛*_</a>
<a id="7273" class="Keyword">infixr</a> <a id="7280" class="Number">2</a> <a id="7282" href="add-small-step-reduction.html#7382" class="InductiveConstructor Operator">_⇛⟨_⟩_</a>
<a id="7289" class="Keyword">infix</a>  <a id="7296" class="Number">3</a> <a id="7298" href="add-small-step-reduction.html#7341" class="InductiveConstructor Operator">_∎₂</a>

<a id="7303" class="Keyword">data</a> <a id="_⇛*_"></a><a id="7308" href="add-small-step-reduction.html#7308" class="Datatype Operator">_⇛*_</a> <a id="7313" class="Symbol">:</a> <a id="7315" href="add-small-step-reduction.html#665" class="Datatype">Expr</a> <a id="7320" class="Symbol">→</a> <a id="7322" href="add-small-step-reduction.html#665" class="Datatype">Expr</a> <a id="7327" class="Symbol">→</a> <a id="7329" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="7333" class="Keyword">where</a>
  <a id="_⇛*_._∎₂"></a><a id="7341" href="add-small-step-reduction.html#7341" class="InductiveConstructor Operator">_∎₂</a> <a id="7345" class="Symbol">:</a> <a id="7347" class="Symbol">∀</a> <a id="7349" href="add-small-step-reduction.html#7349" class="Bound">M</a>
      <a id="7357" class="Comment">--------</a>
    <a id="7370" class="Symbol">→</a> <a id="7372" href="add-small-step-reduction.html#7349" class="Bound">M</a> <a id="7374" href="add-small-step-reduction.html#7308" class="Datatype Operator">⇛*</a> <a id="7377" href="add-small-step-reduction.html#7349" class="Bound">M</a>

  <a id="_⇛*_._⇛⟨_⟩_"></a><a id="7382" href="add-small-step-reduction.html#7382" class="InductiveConstructor Operator">_⇛⟨_⟩_</a> <a id="7389" class="Symbol">:</a> <a id="7391" class="Symbol">∀</a> <a id="7393" href="add-small-step-reduction.html#7393" class="Bound">L</a> <a id="7395" class="Symbol">{</a><a id="7396" href="add-small-step-reduction.html#7396" class="Bound">M</a> <a id="7398" href="add-small-step-reduction.html#7398" class="Bound">N</a><a id="7399" class="Symbol">}</a>
    <a id="7405" class="Symbol">→</a> <a id="7407" href="add-small-step-reduction.html#7393" class="Bound">L</a> <a id="7409" href="add-small-step-reduction.html#6743" class="Datatype Operator">⇛</a> <a id="7411" href="add-small-step-reduction.html#7396" class="Bound">M</a>
    <a id="7417" class="Symbol">→</a> <a id="7419" href="add-small-step-reduction.html#7396" class="Bound">M</a> <a id="7421" href="add-small-step-reduction.html#7308" class="Datatype Operator">⇛*</a> <a id="7424" href="add-small-step-reduction.html#7398" class="Bound">N</a>
      <a id="7432" class="Comment">---------</a>
    <a id="7446" class="Symbol">→</a> <a id="7448" href="add-small-step-reduction.html#7393" class="Bound">L</a> <a id="7450" href="add-small-step-reduction.html#7308" class="Datatype Operator">⇛*</a> <a id="7453" href="add-small-step-reduction.html#7398" class="Bound">N</a>
</pre>
<h2 id="theorems-for-latter-use">Theorems for latter use</h2>
<p>Some theorems to use latter:</p>
<pre class="Agda"><a id="par-refl"></a><a id="7522" href="add-small-step-reduction.html#7522" class="Function">par-refl</a> <a id="7531" class="Symbol">:</a> <a id="7533" class="Symbol">∀</a> <a id="7535" class="Symbol">{</a><a id="7536" href="add-small-step-reduction.html#7536" class="Bound">M</a><a id="7537" class="Symbol">}</a> <a id="7539" class="Symbol">→</a> <a id="7541" href="add-small-step-reduction.html#7536" class="Bound">M</a> <a id="7543" href="add-small-step-reduction.html#6743" class="Datatype Operator">⇛</a> <a id="7545" href="add-small-step-reduction.html#7536" class="Bound">M</a>
<a id="7547" href="add-small-step-reduction.html#7522" class="Function">par-refl</a> <a id="7556" class="Symbol">{</a><a id="7557" href="add-small-step-reduction.html#684" class="InductiveConstructor">nat</a> <a id="7561" class="Symbol">_}</a> <a id="7564" class="Symbol">=</a> <a id="7566" href="add-small-step-reduction.html#6775" class="InductiveConstructor">pnat</a>
<a id="7571" href="add-small-step-reduction.html#7522" class="Function">par-refl</a> <a id="7580" class="Symbol">{_</a> <a id="7583" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="7585" class="Symbol">_}</a> <a id="7588" class="Symbol">=</a> <a id="7590" href="add-small-step-reduction.html#6835" class="InductiveConstructor">papp</a> <a id="7595" href="add-small-step-reduction.html#7522" class="Function">par-refl</a> <a id="7604" href="add-small-step-reduction.html#7522" class="Function">par-refl</a>

<a id="beta-par"></a><a id="7614" href="add-small-step-reduction.html#7614" class="Function">beta-par</a> <a id="7623" class="Symbol">:</a> <a id="7625" class="Symbol">∀</a> <a id="7627" class="Symbol">{</a><a id="7628" href="add-small-step-reduction.html#7628" class="Bound">M</a> <a id="7630" href="add-small-step-reduction.html#7630" class="Bound">N</a><a id="7631" class="Symbol">}</a>
  <a id="7635" class="Symbol">→</a> <a id="7637" href="add-small-step-reduction.html#7628" class="Bound">M</a> <a id="7639" href="add-small-step-reduction.html#1048" class="Datatype Operator">—→</a> <a id="7642" href="add-small-step-reduction.html#7630" class="Bound">N</a>
    <a id="7648" class="Comment">------</a>
  <a id="7657" class="Symbol">→</a> <a id="7659" href="add-small-step-reduction.html#7628" class="Bound">M</a> <a id="7661" href="add-small-step-reduction.html#6743" class="Datatype Operator">⇛</a> <a id="7663" href="add-small-step-reduction.html#7630" class="Bound">N</a>
<a id="7665" href="add-small-step-reduction.html#7614" class="Function">beta-par</a> <a id="7674" href="add-small-step-reduction.html#1203" class="InductiveConstructor">ϕ0</a> <a id="7677" class="Symbol">=</a> <a id="7679" href="add-small-step-reduction.html#6929" class="InductiveConstructor">pzero</a>
<a id="7685" href="add-small-step-reduction.html#7614" class="Function">beta-par</a> <a id="7694" href="add-small-step-reduction.html#1241" class="InductiveConstructor">ϕ+</a> <a id="7697" class="Symbol">=</a> <a id="7699" href="add-small-step-reduction.html#6966" class="InductiveConstructor">padd</a>
<a id="7704" href="add-small-step-reduction.html#7614" class="Function">beta-par</a> <a id="7713" class="Symbol">(</a><a id="7714" href="add-small-step-reduction.html#1081" class="InductiveConstructor">ξ₁</a> <a id="7717" href="add-small-step-reduction.html#7717" class="Bound">st</a><a id="7719" class="Symbol">)</a> <a id="7721" class="Symbol">=</a> <a id="7723" href="add-small-step-reduction.html#6835" class="InductiveConstructor">papp</a> <a id="7728" class="Symbol">(</a><a id="7729" href="add-small-step-reduction.html#7614" class="Function">beta-par</a> <a id="7738" href="add-small-step-reduction.html#7717" class="Bound">st</a><a id="7740" class="Symbol">)</a> <a id="7742" href="add-small-step-reduction.html#7522" class="Function">par-refl</a>
<a id="7751" href="add-small-step-reduction.html#7614" class="Function">beta-par</a> <a id="7760" class="Symbol">(</a><a id="7761" href="add-small-step-reduction.html#1135" class="InductiveConstructor">ξ₂</a> <a id="7764" class="Symbol">_</a> <a id="7766" href="add-small-step-reduction.html#7766" class="Bound">st</a><a id="7768" class="Symbol">)</a> <a id="7770" class="Symbol">=</a> <a id="7772" href="add-small-step-reduction.html#6835" class="InductiveConstructor">papp</a> <a id="7777" href="add-small-step-reduction.html#7522" class="Function">par-refl</a> <a id="7786" class="Symbol">(</a><a id="7787" href="add-small-step-reduction.html#7614" class="Function">beta-par</a> <a id="7796" href="add-small-step-reduction.html#7766" class="Bound">st</a><a id="7798" class="Symbol">)</a>

<a id="par-nat"></a><a id="7801" href="add-small-step-reduction.html#7801" class="Function">par-nat</a> <a id="7809" class="Symbol">:</a> <a id="7811" class="Symbol">∀</a> <a id="7813" class="Symbol">{</a><a id="7814" href="add-small-step-reduction.html#7814" class="Bound">x</a> <a id="7816" href="add-small-step-reduction.html#7816" class="Bound">M</a><a id="7817" class="Symbol">}</a>
  <a id="7821" class="Symbol">→</a> <a id="7823" class="InductiveConstructor">nat</a> <a id="7827" href="add-small-step-reduction.html#7814" class="Bound">x</a> <a id="7829" href="add-small-step-reduction.html#6743" class="Datatype Operator">⇛</a> <a id="7831" href="add-small-step-reduction.html#7816" class="Bound">M</a>
  <a id="7835" class="Symbol">→</a> <a id="7837" href="add-small-step-reduction.html#7816" class="Bound">M</a> <a id="7839" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="7841" class="InductiveConstructor">nat</a> <a id="7845" href="add-small-step-reduction.html#7814" class="Bound">x</a>
<a id="7847" href="add-small-step-reduction.html#7801" class="Function">par-nat</a> <a id="7855" href="add-small-step-reduction.html#6775" class="InductiveConstructor">pnat</a> <a id="7860" class="Symbol">=</a> <a id="7862" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
</pre>
<h2 id="progress-1">Progress</h2>
<p>I will define progress in the same way that I defined previouly. It will be used to prove that an expression is already a value or there is a step to reduce.</p>
<pre class="Agda"><a id="8048" class="Keyword">data</a> <a id="Progress⇛"></a><a id="8053" href="add-small-step-reduction.html#8053" class="Datatype">Progress⇛</a> <a id="8063" class="Symbol">(</a><a id="8064" href="add-small-step-reduction.html#8064" class="Bound">M</a> <a id="8066" class="Symbol">:</a> <a id="8068" href="add-small-step-reduction.html#665" class="Datatype">Expr</a><a id="8072" class="Symbol">)</a> <a id="8074" class="Symbol">:</a> <a id="8076" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="8080" class="Keyword">where</a>
  <a id="Progress⇛.step"></a><a id="8088" href="add-small-step-reduction.html#8088" class="InductiveConstructor">step</a> <a id="8093" class="Symbol">:</a> <a id="8095" class="Symbol">∀</a> <a id="8097" class="Symbol">{</a><a id="8098" href="add-small-step-reduction.html#8098" class="Bound">N</a><a id="8099" class="Symbol">}</a>
    <a id="8105" class="Symbol">→</a> <a id="8107" href="add-small-step-reduction.html#8064" class="Bound">M</a> <a id="8109" href="add-small-step-reduction.html#6743" class="Datatype Operator">⇛</a> <a id="8111" href="add-small-step-reduction.html#8098" class="Bound">N</a>
      <a id="8119" class="Comment">----------</a>
    <a id="8134" class="Symbol">→</a> <a id="8136" href="add-small-step-reduction.html#8053" class="Datatype">Progress⇛</a> <a id="8146" href="add-small-step-reduction.html#8064" class="Bound">M</a>

  <a id="Progress⇛.done"></a><a id="8151" href="add-small-step-reduction.html#8151" class="InductiveConstructor">done</a> <a id="8156" class="Symbol">:</a>
      <a id="8164" href="add-small-step-reduction.html#849" class="Datatype">Value</a> <a id="8170" href="add-small-step-reduction.html#8064" class="Bound">M</a>
      <a id="8178" class="Comment">----------</a>
    <a id="8193" class="Symbol">→</a> <a id="8195" href="add-small-step-reduction.html#8053" class="Datatype">Progress⇛</a> <a id="8205" href="add-small-step-reduction.html#8064" class="Bound">M</a>

<a id="progress⇛"></a><a id="8208" href="add-small-step-reduction.html#8208" class="Function">progress⇛</a> <a id="8218" class="Symbol">:</a> <a id="8220" class="Symbol">∀</a> <a id="8222" href="add-small-step-reduction.html#8222" class="Bound">M</a> <a id="8224" class="Symbol">→</a> <a id="8226" href="add-small-step-reduction.html#8053" class="Datatype">Progress⇛</a> <a id="8236" href="add-small-step-reduction.html#8222" class="Bound">M</a>
<a id="8238" href="add-small-step-reduction.html#8208" class="Function">progress⇛</a> <a id="8248" class="Symbol">(</a><a id="8249" href="add-small-step-reduction.html#684" class="InductiveConstructor">nat</a> <a id="8253" href="add-small-step-reduction.html#8253" class="Bound">x</a><a id="8254" class="Symbol">)</a> <a id="8256" class="Symbol">=</a> <a id="8258" href="add-small-step-reduction.html#8151" class="InductiveConstructor">done</a> <a id="8263" class="Symbol">(</a><a id="8264" href="add-small-step-reduction.html#876" class="InductiveConstructor">nat</a> <a id="8268" href="add-small-step-reduction.html#8253" class="Bound">x</a><a id="8269" class="Symbol">)</a>
<a id="8271" href="add-small-step-reduction.html#8208" class="Function">progress⇛</a> <a id="8281" class="Symbol">(</a><a id="8282" href="add-small-step-reduction.html#8282" class="Bound">M</a> <a id="8284" href="add-small-step-reduction.html#701" class="InductiveConstructor Operator">+</a> <a id="8286" href="add-small-step-reduction.html#8286" class="Bound">N</a><a id="8287" class="Symbol">)</a> <a id="8289" class="Keyword">with</a> <a id="8294" href="add-small-step-reduction.html#8208" class="Function">progress⇛</a> <a id="8304" href="add-small-step-reduction.html#8282" class="Bound">M</a>
<a id="8306" class="Symbol">...</a> <a id="8310" class="Symbol">|</a> <a id="8312" href="add-small-step-reduction.html#8088" class="InductiveConstructor">step</a> <a id="8317" href="add-small-step-reduction.html#8317" class="Bound">st</a> <a id="8320" class="Symbol">=</a> <a id="8322" href="add-small-step-reduction.html#8088" class="InductiveConstructor">step</a> <a id="8327" class="Symbol">(</a><a id="8328" href="add-small-step-reduction.html#6835" class="InductiveConstructor">papp</a> <a id="8333" href="add-small-step-reduction.html#8317" class="Bound">st</a> <a id="8336" href="add-small-step-reduction.html#7522" class="Function">par-refl</a><a id="8344" class="Symbol">)</a>
<a id="8346" class="Symbol">...</a> <a id="8350" class="Symbol">|</a> <a id="8352" href="add-small-step-reduction.html#8151" class="InductiveConstructor">done</a> <a id="8357" class="Symbol">(</a><a id="8358" href="add-small-step-reduction.html#876" class="InductiveConstructor">nat</a> <a id="8362" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a><a id="8366" class="Symbol">)</a> <a id="8368" class="Symbol">=</a> <a id="8370" href="add-small-step-reduction.html#8088" class="InductiveConstructor">step</a> <a id="8375" href="add-small-step-reduction.html#6929" class="InductiveConstructor">pzero</a>
<a id="8381" class="Symbol">...</a> <a id="8385" class="Symbol">|</a> <a id="8387" href="add-small-step-reduction.html#8151" class="InductiveConstructor">done</a> <a id="8392" class="Symbol">(</a><a id="8393" href="add-small-step-reduction.html#876" class="InductiveConstructor">nat</a> <a id="8397" class="Symbol">(</a><a id="8398" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="8402" class="Symbol">_))</a> <a id="8406" class="Keyword">with</a> <a id="8411" href="add-small-step-reduction.html#8208" class="Function">progress⇛</a> <a id="8421" class="Bound">N</a>
<a id="8423" class="Symbol">...</a>   <a id="8429" class="Symbol">|</a> <a id="8431" href="add-small-step-reduction.html#8088" class="InductiveConstructor">step</a> <a id="8436" href="add-small-step-reduction.html#8436" class="Bound">st</a> <a id="8439" class="Symbol">=</a> <a id="8441" href="add-small-step-reduction.html#8088" class="InductiveConstructor">step</a> <a id="8446" class="Symbol">(</a><a id="8447" href="add-small-step-reduction.html#6835" class="InductiveConstructor">papp</a> <a id="8452" href="add-small-step-reduction.html#6775" class="InductiveConstructor">pnat</a> <a id="8457" href="add-small-step-reduction.html#8436" class="Bound">st</a><a id="8459" class="Symbol">)</a>
<a id="8461" class="Symbol">...</a>   <a id="8467" class="Symbol">|</a> <a id="8469" href="add-small-step-reduction.html#8151" class="InductiveConstructor">done</a> <a id="8474" class="Symbol">(</a><a id="8475" href="add-small-step-reduction.html#876" class="InductiveConstructor">nat</a> <a id="8479" class="Symbol">_)</a> <a id="8482" class="Symbol">=</a> <a id="8484" href="add-small-step-reduction.html#8088" class="InductiveConstructor">step</a> <a id="8489" href="add-small-step-reduction.html#6966" class="InductiveConstructor">padd</a>
</pre>
    </section>
</article>

        </main>

        <footer>
            Site proudly generated by
            <a style="color:yellow;" href="http://jaspervdj.be/hakyll">Hakyll</a> with
            <a style="color:yellow;" href="https://github.com/guilhermehas/guilhermehas.github.io">source code</a>
        </footer>
    </body>
</html>
